<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Want595</title>
  
  <subtitle>温特兔</subtitle>
  <link href="https://want595.github.io/atom.xml" rel="self"/>
  
  <link href="https://want595.github.io/"/>
  <updated>2024-07-22T07:12:08.273Z</updated>
  <id>https://want595.github.io/</id>
  
  <author>
    <name>junwei</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>完全分布式高可用集群（Flink）</title>
    <link href="https://want595.github.io/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Flink%EF%BC%89/"/>
    <id>https://want595.github.io/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Flink%EF%BC%89/</id>
    <published>2024-07-22T07:10:14.000Z</published>
    <updated>2024-07-22T07:12:08.273Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Flink"><a href="#Flink" class="headerlink" title="Flink"></a>Flink</h1><h2 id="零、前提条件"><a href="#零、前提条件" class="headerlink" title="零、前提条件"></a>零、前提条件</h2><p>Flink集群规划</p><div class="table-container"><table><thead><tr><th>hadoop1</th><th>hadoop2</th><th>hadoop3</th></tr></thead><tbody><tr><td>JobManager</td><td>TaskManager</td><td>TaskManager</td></tr></tbody></table></div><ol><li>上传安装包（在hadoop1操作）</li></ol><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Flink%EF%BC%89/image-20240722130840508.png" alt="image-20240722130840508"></p><ol><li>解压安装包</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf /software/flink-1.19.1-bin-scala_2.12.tgz -C /opt</span><br><span class="line">ln -s /opt/flink-1.19.1 /opt/flink</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Flink%EF%BC%89/image-20240722131007541.png" alt="image-20240722131007541"></p><ol><li>配置环境变量，添加如下内容</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export FLINK_HOME=/opt/flink</span><br><span class="line">export PATH=$PATH:$FLINK_HOME/bin</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Flink%EF%BC%89/image-20240722131055667.png" alt="image-20240722131055667"></p><p>让环境变量生效</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure><p>验证版本号</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flink -v</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Flink%EF%BC%89/image-20240722131123536.png" alt="image-20240722131123536"></p><p>看到如上版本号字样，说明环境变量配置成功。</p><h2 id="一、配置Flink"><a href="#一、配置Flink" class="headerlink" title="一、配置Flink"></a>一、配置Flink</h2><p>进入flink配置目录<code>/opt/flink/conf</code>，查看配置文件</p><ol><li>配置<code>flink-conf.yaml</code></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim flink-conf.yaml</span><br></pre></td></tr></table></figure><p>找到相关配置项并修改，如下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">jobmanager.rpc.address: hadoop1</span><br><span class="line">jobmanager.bind-host: 0.0.0.0</span><br><span class="line">taskmanager.bind-host: 0.0.0.0</span><br><span class="line">taskmanager.host: hadoop1</span><br><span class="line">rest.address: hadoop1</span><br><span class="line">rest.port: 8082</span><br><span class="line">rest.bind-address: 0.0.0.0</span><br></pre></td></tr></table></figure><p>（下图以rest为例）</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Flink%EF%BC%89/image-20240722142152267.png" alt="image-20240722142152267"></p><ol><li>配置workers</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim workers</span><br></pre></td></tr></table></figure><p>把原有内容删除，添加内容如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hadoop2</span><br><span class="line">hadoop3</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Flink%EF%BC%89/image-20240722131938038.png" alt="image-20240722131938038"></p><ol><li>配置masters</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim masters </span><br></pre></td></tr></table></figure><p>修改后内容如下：（由于8081端口被Spark占用了，改成8082）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop1:8082</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Flink%EF%BC%89/image-20240722132109968.png" alt="image-20240722132109968"></p><ol><li>分发flink安装目录</li></ol><p>确保hadoop2、hadoop3机器已开启的情况下，执行如下分发命令（注意分发的是flink-1.19.1，不是flink）。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">scp -r /opt/flink-1.19.1 root@hadoop2:/opt/</span><br><span class="line">scp /etc/profile root@hadoop2:/etc/</span><br><span class="line">scp -r /opt/flink-1.19.1 root@hadoop3:/opt/</span><br><span class="line">scp /etc/profile root@hadoop3:/etc/</span><br></pre></td></tr></table></figure><p>让环境变量生效</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh hadoop2 "source /etc/profile"</span><br><span class="line">ssh hadoop3 "source /etc/profile"</span><br></pre></td></tr></table></figure><ol><li>修改hadoop2和hadoop3的配置</li></ol><p>进入hadoop2机器flink的配置目录<code>/opt/flink-1.19.1/conf</code>，配置<code>config.yaml</code>文件</p><p>将taskmanager.host的值修改为hadoop2</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">taskmanager.host: hadoop2</span><br></pre></td></tr></table></figure><p>hadoop3机器同理修改为hadoop3</p><ol><li>启动flink集群</li></ol><p>1）在hadoop1机器，执行如下命令启动集群</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">start-cluster.sh</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Flink%EF%BC%89/image-20240722140517180.png" alt="image-20240722140517180"></p><p>2）查看进程</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh /opt/xshell/xjps.sh</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Flink%EF%BC%89/image-20240722142748823.png" alt="image-20240722142748823"></p><p>hadoop1有StandaloneSessionClusterEntrypoint进程</p><p>hadoop2有TaskManagerRunner进程</p><p>hadoop3有TaskManagerRunner进程</p><p>看到如上进程，说明flink集群配置成功。</p><p>网页查看（<a href="http://hadoop1:8082）">http://hadoop1:8082）</a></p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Flink%EF%BC%89/image-20240722142824463.png" alt="image-20240722142824463"></p><p>3）关闭flink集群</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stop-cluster.sh </span><br></pre></td></tr></table></figure><h2 id="二、测试Flink"><a href="#二、测试Flink" class="headerlink" title="二、测试Flink"></a>二、测试Flink</h2><ol><li>运行flink提供的WordCount案例程序</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flink run /opt/flink/examples/streaming/WordCount.jar</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Flink%EF%BC%89/image-20240722143245860.png" alt="image-20240722143245860"></p><ol><li><p>查看输出的WordCount结果的末尾10行数据</p><p>（运行时需要超过<strong>100G</strong>的内存，本人的内存不足，无法运行出结果）</p></li><li><p>Web UI查看运行结果</p></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Flink&quot;&gt;&lt;a href=&quot;#Flink&quot; class=&quot;headerlink&quot; title=&quot;Flink&quot;&gt;&lt;/a&gt;Flink&lt;/h1&gt;&lt;h2 id=&quot;零、前提条件&quot;&gt;&lt;a href=&quot;#零、前提条件&quot; class=&quot;headerlink&quot; title=&quot;零</summary>
      
    
    
    
    <category term="大数据集群" scheme="https://want595.github.io/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E9%9B%86%E7%BE%A4/"/>
    
    
  </entry>
  
  <entry>
    <title>完全分布式高可用集群（Scala+Spark）</title>
    <link href="https://want595.github.io/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Scala-Spark%EF%BC%89/"/>
    <id>https://want595.github.io/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Scala-Spark%EF%BC%89/</id>
    <published>2024-07-22T07:09:39.000Z</published>
    <updated>2024-07-22T07:09:51.251Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Spark"><a href="#Spark" class="headerlink" title="Spark"></a>Spark</h1><h2 id="一、前置准备（Scala）"><a href="#一、前置准备（Scala）" class="headerlink" title="一、前置准备（Scala）"></a>一、前置准备（Scala）</h2><p>以下步骤都在hadoop1机器执行</p><ol><li><p>上传scala包</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Scala-Spark%EF%BC%89/image-20240722102358308.png" alt="image-20240722102358308"></p></li><li><p>解压scala包</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar -zxf /software/scala-2.13.14.tgz -C /opt</span><br><span class="line">ln -s /opt/scala-2.13.14 /opt/scala</span><br></pre></td></tr></table></figure></li></ol><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Scala-Spark%EF%BC%89/image-20240722102504582.png" alt="image-20240722102504582"></p><ol><li>配置<code>/etc/profile</code>的scala环境变量，重新加载配置文件，运行scala（记得source让环境变量生效）</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export SCALA_HOME=/opt/scala</span><br><span class="line">export PATH=$PATH:$SCALA_HOME/bin</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Scala-Spark%EF%BC%89/image-20240722102612842.png" alt="image-20240722102612842"></p><ol><li>检查是否安装成功</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scala</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Scala-Spark%EF%BC%89/image-20240722102655402.png" alt="image-20240722102655402"></p><ol><li>分发到hadoop2和hadoop3</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">scp -r /opt/scala root@hadoop2:/opt/</span><br><span class="line">scp /etc/profile root@hadoop2:/etc/</span><br><span class="line">scp -r /opt/scala root@hadoop3:/opt/</span><br><span class="line">scp /etc/profile root@hadoop3:/etc/</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Scala-Spark%EF%BC%89/image-20240722120705329.png" alt="image-20240722120705329"></p><h2 id="二、完全分布式部署（Spark）"><a href="#二、完全分布式部署（Spark）" class="headerlink" title="二、完全分布式部署（Spark）"></a>二、完全分布式部署（Spark）</h2><ol><li><p>Spark部署方式</p><p>Local模式：单机模式</p><p>集群模式：</p><p>Standalone模式：使用Spark自带的简单集群管理器</p><p>YARN模式：使用YARN作为集群管理器</p><p>Mesos模式：使用Mesos作为集群管理器</p><p>Kubernetes模式：实验阶段</p></li><li><p>安装spark</p><p>1）Spark官网的Download界面<a href="https://spark.apache.org/downloads.html可选版本较少。">https://spark.apache.org/downloads.html可选版本较少。</a></p><p>2）可以在下载页面的下方进入它的release archives：<a href="https://archive.apache.org/dist/spark/">https://archive.apache.org/dist/spark/</a> 选择想要的版本。</p><p>由于我们之前配置过Hadoop了，所以选择without-hadoop的版本</p></li></ol><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Scala-Spark%EF%BC%89/image-20240722103729587.png" alt="image-20240722103729587"></p><ol><li><p>安装Spark</p><p>约定虚拟机主机名为hadoop1，用户名为root, 安装路径为/opt，如果不是，请自行修改相应配置文件。</p><p>1）上传安装包</p><p>将下载好的安装包上传至虚拟机（当然你也可以直接在虚拟机中下载，省得上传文件）</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Scala-Spark%EF%BC%89/image-20240722104232927.png" alt="image-20240722104232927"></p><p>2）解压并创建软链接</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar -xvf /software/spark-3.5.1-bin-without-hadoop.tgz -C /opt</span><br><span class="line">ln -s /opt/spark-3.5.1-bin-without-hadoop  /opt/spark</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Scala-Spark%EF%BC%89/image-20240722104350802.png" alt="image-20240722104350802"></p><p>3）查看Spark的目录结构</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls /opt/spark</span><br></pre></td></tr></table></figure></li></ol><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Scala-Spark%EF%BC%89/image-20240722104427100.png" alt="image-20240722104427100"></p><ul><li><p>bin: 可执行脚本，比如常用的spark-shell, pyspark等。</p></li><li><p>data：示例程序使用数据</p></li><li><p>jars：依赖的jar包</p></li><li><p>R：R API包</p></li><li><p>yarn：整合yarn相关内容</p></li><li><p>conf：配置文件目录</p></li><li><p>examples：示例程序</p></li><li><p>kubernetes：K8S相关内容</p></li><li><p>licenses：许可文件</p></li><li><p>python：python API包</p></li><li><p>sbin：管理使用的脚本，比如: start-all.sh、start-master.sh等。</p><p>4）配置环境变量（/etc/profile）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export SPARK_HOME=/opt/spark</span><br><span class="line">export PATH=$PATH:$SPARK_HOME/bin</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Scala-Spark%EF%BC%89/image-20240722104644135.png" alt="image-20240722104644135"></p><p>运行下面的命令使配置生效</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure><p>5）配置Hadoop信息</p><p>因为我们下载的是“without-hadoop” 版本，所以要配置SPARK_DIST_CLASSPATH 变量才能正常运行。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /opt/spark/conf</span><br><span class="line">cp spark-env.sh.template  spark-env.sh</span><br><span class="line">vi spark-env.sh</span><br></pre></td></tr></table></figure><p>添加配置如下信息</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export SPARK_DIST_CLASSPATH=$(/opt/hadoop/bin/hadoop classpath)</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Scala-Spark%EF%BC%89/image-20240722104849976.png" alt="image-20240722104849976"></p><p>6）测试安装</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spark-shell</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Scala-Spark%EF%BC%89/image-20240722105824151.png" alt="image-20240722105824151"></p><p>运行代码</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var r = sc.parallelize(Array(1,2,3,4))</span><br><span class="line">r.map(_*10).collect()</span><br></pre></td></tr></table></figure></li></ul><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Scala-Spark%EF%BC%89/image-20240722110106854.png" alt="image-20240722110106854"></p><h3 id="安装Anaconda（可选）"><a href="#安装Anaconda（可选）" class="headerlink" title="安装Anaconda（可选）"></a>安装Anaconda（可选）</h3><ol><li>安装python（centos9自带python3.9.18）</li></ol><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Scala-Spark%EF%BC%89/image-20240722112459698.png" alt="image-20240722112459698"></p><ol><li>安装Anaconda</li></ol><p>1）查看python3.9对应的Anaconda版本</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Scala-Spark%EF%BC%89/image-20240722114603637.png" alt="image-20240722114603637"></p><p>2）下载</p><p>可以在网页<a href="https://repo.anaconda.com/archive/（或网址https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/）上选择相应版本进行下载，这里将下载[Anaconda3-2022.10-Linux-x86_64.sh](https://repo.anaconda.com/archive/Anaconda3-2022.10-Linux-x86_64.sh),其python对应版本为3.9。">https://repo.anaconda.com/archive/（或网址https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/）上选择相应版本进行下载，这里将下载[Anaconda3-2022.10-Linux-x86_64.sh](https://repo.anaconda.com/archive/Anaconda3-2022.10-Linux-x86_64.sh),其python对应版本为3.9。</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /software</span><br><span class="line">wget https://repo.anaconda.com/archive/Anaconda3-2022.10-Linux-x86_64.sh</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Scala-Spark%EF%BC%89/image-20240722115039721.png" alt="image-20240722115039721"></p><p>3）执行安装命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash Anaconda3-2022.10-Linux-x86_64.sh</span><br></pre></td></tr></table></figure><p>然后一路回车，等出现接受许可界面，输入yes接收许可。</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Scala-Spark%EF%BC%89/image-20240722115227946.png" alt="image-20240722115227946"></p><p>接着可以配置anacoda的安装目录，这里配置的安装目录是：<code>/opt/anaconda3</code></p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Scala-Spark%EF%BC%89/image-20240722115502263.png" alt="image-20240722115502263"></p><p>然后配置是否自动配置PATH路径，这里输入的yes，让其自动配置</p><p>最后提示是否安装VSCode，这里输入的no，拒绝安装。</p><h3 id="伪分布式"><a href="#伪分布式" class="headerlink" title="伪分布式"></a>伪分布式</h3><ol><li>配置Spark伪Standalone模式</li></ol><p>这里配置Standalone模式，为了方便初学者，这里只配置一台从节点，所以将其称为”伪Standalone模式”</p><p>1）打开配置文件目录<code>/opt/spark/conf/spark-env.sh</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /opt/spark/conf/spark-env.sh</span><br></pre></td></tr></table></figure><p>添加如下配置信息</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">export SPARK_MASTER_HOST=hadoop1           #设置主节点地址</span><br><span class="line">export SPARK_MASTER_WEBUI_PORT=8081   #设置网页端口</span><br><span class="line">export SPARK_WORKER_MEMORY=2g              #设置节点内存大小，此处为4G。</span><br><span class="line">export SPARK_WORKER_CORES=2                #设置节点参与计算的核心数</span><br><span class="line">export SPARK_WORKER_INSTANCES=1            #设置节点实例数</span><br><span class="line">export JAVA_HOME=/opt/jdk</span><br><span class="line">export HADOOP_CONF_DIR=/opt/hadoop/etc/hadoop</span><br><span class="line">SPARK_HISTORY_OPTS="-Dspark.history.fs.logDirectory=hdfs://hadoop1:9000/sparklog/ -Dspark.history.fs.cleaner.enabled=true/"</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Scala-Spark%EF%BC%89/image-20240722125142795.png" alt="image-20240722125142795"></p><p>2）配置节点信息，打开<code>/opt/spark/conf</code>目录，复制<code>workers.template</code>文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp /opt/spark/conf/workers.template /opt/spark/conf/workers</span><br></pre></td></tr></table></figure><p>打开文件<code>vim /opt/spark/conf/workers</code>，删除localhost，填入以下信息</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hadoop2</span><br><span class="line">hadoop3</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Scala-Spark%EF%BC%89/image-20240722113442397.png" alt="image-20240722113442397"></p><ol><li><p>分发到hadoop2和hadoop3中</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">scp -r /opt/spark root@hadoop2:/opt/</span><br><span class="line">scp /etc/profile root@hadoop2:/etc/</span><br><span class="line">scp -r /opt/spark root@hadoop3:/opt/</span><br><span class="line">scp /etc/profile root@hadoop3:/etc/</span><br></pre></td></tr></table></figure></li><li><p>测试standalone模式（需要先启动hadoop）</p><p>1）启动命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/opt/spark/sbin/start-master.sh</span><br><span class="line">/opt/spark/sbin/start-workers.sh</span><br></pre></td></tr></table></figure><p>或</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/opt/spark/sbin/start-all.sh</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Scala-Spark%EF%BC%89/image-20240722122752870.png" alt="image-20240722122752870"></p><p>2）查看状态</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh /opt/xshell/xjps.sh</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Scala-Spark%EF%BC%89/image-20240722122904308.png" alt="image-20240722122904308"></p><p>Web网页（<a href="http://hadoop1:8081）">http://hadoop1:8081）</a></p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Scala-Spark%EF%BC%89/image-20240722124835873.png" alt="image-20240722124835873"></p><p>3）终止命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/opt/spark/sbin/stop-all.sh</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Spark&quot;&gt;&lt;a href=&quot;#Spark&quot; class=&quot;headerlink&quot; title=&quot;Spark&quot;&gt;&lt;/a&gt;Spark&lt;/h1&gt;&lt;h2 id=&quot;一、前置准备（Scala）&quot;&gt;&lt;a href=&quot;#一、前置准备（Scala）&quot; class=&quot;header</summary>
      
    
    
    
    <category term="大数据集群" scheme="https://want595.github.io/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E9%9B%86%E7%BE%A4/"/>
    
    
  </entry>
  
  <entry>
    <title>完全分布式高可用集群（Flume）</title>
    <link href="https://want595.github.io/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Flume%EF%BC%89/"/>
    <id>https://want595.github.io/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Flume%EF%BC%89/</id>
    <published>2024-07-22T07:06:39.000Z</published>
    <updated>2024-07-22T07:08:08.030Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Flume"><a href="#Flume" class="headerlink" title="Flume"></a>Flume</h1><h2 id="零、资源准备"><a href="#零、资源准备" class="headerlink" title="零、资源准备"></a>零、资源准备</h2><ul><li>apache-flume-1.11.0-bin.tar.gz</li></ul><h2 id="一、搭建完全分布式集群（Flume）"><a href="#一、搭建完全分布式集群（Flume）" class="headerlink" title="一、搭建完全分布式集群（Flume）"></a>一、搭建完全分布式集群（Flume）</h2><ol><li><p>Flume安装</p><p>1.1 上传压缩包</p></li></ol><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Flume%EF%BC%89/image-20240721202647183.png" alt="image-20240721202647183"></p><p>​        1.2 解压到安装目录下并设置软链接（或重命名）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf /software/apache-flume-1.11.0-bin.tar.gz -C /opt/</span><br><span class="line">ln -s /opt/apache-flume-1.11.0-bin /opt/flume</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Flume%EF%BC%89/image-20240721203354245.png" alt="image-20240721203354245"></p><ol><li><p>Flume配置（以hadoop1为例）</p><p>2.1 复制一个<code>/opt/flume/conf/flume-env.sh</code>文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp /opt/flume/conf/flume-env.sh.template /opt/flume/conf/flume-env.sh</span><br><span class="line">vim /opt/flume/conf/flume-env.sh</span><br></pre></td></tr></table></figure><p>2.2 修改<code>/opt/flume/conf/flume-env.sh</code>文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/opt/jdk</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Flume%EF%BC%89/image-20240721204140824.png" alt="image-20240721204140824"></p><p>2.3 配置环境变量<code>/etc/profile</code>，增加以下内容（记得source）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export FLUME_HOME=/opt/flume</span><br><span class="line">export PATH=$PATH:$FLUME_HOME/bin</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Flume%EF%BC%89/image-20240721204600928.png" alt="image-20240721204600928"></p><p>2.4 检查是否安装成功</p><p>输入命令<code>flume-ng version</code></p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Flume%EF%BC%89/image-20240721204650938.png" alt="image-20240721204650938"></p><h2 id="二、测试Flume集群"><a href="#二、测试Flume集群" class="headerlink" title="二、测试Flume集群"></a>二、测试Flume集群</h2></li></ol><p>Flume 除了可以监控单个日志文件外，还能监控整个目录，比如我们希望监控某个目录中出现的新文件。</p><ol><li><p>在<code>/opt/data/</code>目录下创建一个files文件夹。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /opt/data</span><br><span class="line">mkdir files</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Flume%EF%BC%89/image-20240721210016363.png" alt="image-20240721210016363"></p></li><li><p>在<code>/opt/flume/conf/</code>目录下创建一个配置文件 <code>flume-hdfs.conf</code>，填入以下内容。 </p></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">a1.sources = r1</span><br><span class="line">a1.channels = c1</span><br><span class="line">a1.sinks = k1</span><br><span class="line"></span><br><span class="line"># 指定 Source 的类型是 spooldir</span><br><span class="line">a1.sources.r1.type = spooldir</span><br><span class="line"># 指定监控的目录，会处理已存在和新增的文件</span><br><span class="line">a1.sources.r1.spoolDir = /opt/data/files</span><br><span class="line"># Flume 会读取文件的内容，转成独立的 Flume 事件，然后发送到 Channel</span><br><span class="line"># 一旦文件读取完成，Flume 会自动给文件增加一个 .COMPLETED 后缀，以防止重复读取</span><br><span class="line">a1.sources.r1.fileSuffix = .COMPLETED</span><br><span class="line"># fileHeader 设置为 true 时，Flume 会在每个事件中添加一个头部信息</span><br><span class="line"># 指明该事件来源于哪个文件，这对于跟踪事件来源很有帮助</span><br><span class="line">a1.sources.r1.fileHeader = true</span><br><span class="line"># 指定一个正则表达式，表示忽略哪些文件，这里会忽略掉所有以 .tmp 结尾的文件</span><br><span class="line">a1.sources.r1.ignorePattern = ([^ ]*\.tmp)</span><br><span class="line">a1.sources.r1.channels = c1</span><br><span class="line"></span><br><span class="line">a1.channels.c1.type = memory</span><br><span class="line">a1.channels.c1.capacity = 1000</span><br><span class="line">a1.channels.c1.transactionCapacity = 100</span><br><span class="line"></span><br><span class="line">a1.sinks.k1.type = hdfs</span><br><span class="line">a1.sinks.k1.hdfs.path = hdfs://hadoop1:9000/user/hadoop/output</span><br><span class="line">a1.sinks.k1.hdfs.round = true</span><br><span class="line">a1.sinks.k1.hdfs.roundValue = 1</span><br><span class="line">a1.sinks.k1.hdfs.roundUnit = hour</span><br><span class="line">a1.sinks.k1.hdfs.useLocalTimeStamp = true</span><br><span class="line">a1.sinks.k1.hdfs.batchSize = 100</span><br><span class="line">a1.sinks.k1.hdfs.fileType = DataStream</span><br><span class="line">a1.sinks.k1.hdfs.rollInterval = 0</span><br><span class="line">a1.sinks.k1.hdfs.rollSize = 10485760</span><br><span class="line">a1.sinks.k1.hdfs.rollCount = 0</span><br><span class="line">a1.sinks.k1.hdfs.filePrefix = event</span><br><span class="line">a1.sinks.k1.channel = c1</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Flume%EF%BC%89/image-20240721205431487.png" alt="image-20240721205431487"></p><ol><li>启动Flume（确保已启动Hadoop）</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flume-ng agent -c $FLUME_HOME/conf -n a1 -f $FLUME_HOME/conf/flume-hdfs.conf --name a1 -Dflume.root.logger=INFO,console</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Flume%EF%BC%89/image-20240721205743811.png" alt="image-20240721205743811"></p><ol><li>然后我们往 files 目录中创建几个新文件。 </li></ol><p>Flume 会每隔 500 毫秒扫描一次监控目录的文件变动，然后检测到 files 目录中新增了 a.txt 并进行读取。一旦读取完毕，会自动给文件增加一个 .COMPLETED 后缀，表示读取完毕。而 b.tmp 则没有读取，因为过滤掉了以 .tmp 结尾的文件。 注意：监控目录和监控单个文件有所不同，如果是监控单个文件，那么可以不停地追加内容。但如果是监控目录，那么应该向目录中上传已经包含完整内容的文件，而不要在监控的目录中对文件进行修改。 </p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Flume%EF%BC%89/image-20240721212346410.png" alt="image-20240721212346410"></p><ol><li>查看HDFS（<a href="http://192.168.121.160:9870/explorer.html#/user/hadoop/output）的内容，显然文件已成功上传。">http://192.168.121.160:9870/explorer.html#/user/hadoop/output）的内容，显然文件已成功上传。</a> </li></ol><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Flume%EF%BC%89/image-20240721212308535.png" alt="image-20240721212308535"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Flume&quot;&gt;&lt;a href=&quot;#Flume&quot; class=&quot;headerlink&quot; title=&quot;Flume&quot;&gt;&lt;/a&gt;Flume&lt;/h1&gt;&lt;h2 id=&quot;零、资源准备&quot;&gt;&lt;a href=&quot;#零、资源准备&quot; class=&quot;headerlink&quot; title=&quot;零</summary>
      
    
    
    
    <category term="大数据集群" scheme="https://want595.github.io/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E9%9B%86%E7%BE%A4/"/>
    
    
  </entry>
  
  <entry>
    <title>完全分布式高可用集群（HBase）</title>
    <link href="https://want595.github.io/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88HBase%EF%BC%89/"/>
    <id>https://want595.github.io/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88HBase%EF%BC%89/</id>
    <published>2024-07-22T07:05:13.000Z</published>
    <updated>2024-07-22T07:06:18.673Z</updated>
    
    <content type="html"><![CDATA[<h1 id="HBase"><a href="#HBase" class="headerlink" title="HBase"></a>HBase</h1><p>Apache HBase是一个分布式、可扩展、大数据存储的Hadoop数据库。当我们需要对大数据进行随机、实时的读/写访问时，可以使用HBase。这个项目的目标是在通用硬件集群上托管非常大的表——数十亿行X数百万列。Apache HBase是一个开源、分布式、版本化的非关系数据库，模仿了Chang等人的谷歌Bigtable:A distributed Storage System for Structured Data。正如Bigtable利用谷歌文件系统提供的分布式数据存储一样，Apache HBase在Hadoop和HDFS之上提供了类似Bigtable的功能。</p><p>本文部署HBase集群的时候，需要依赖于Hadoop集群和Zookeeper集群。</p><h2 id="一、准备工作"><a href="#一、准备工作" class="headerlink" title="一、准备工作"></a>一、准备工作</h2><p>HBase版本</p><ul><li>hbase-2.5.8-bin.tar.gz</li></ul><p>安装准备</p><ol><li><p>Hadoop安装</p><p>参考： 搭建Hadoop3.x完全分布式集群（CentOS 9）</p></li><li><p>Zookeeper安装</p><p>参考：搭建Zookeeper完全分布式集群（CentOS 9）</p></li><li><p>时钟同步</p><p>在HBase集群中，各个节点之间的时间同步非常重要，如果各个节点的时间不一致，那么会出现写入数据的时间戳不一致或某些操作的顺序发生错误等问题，从而影响HBase集群的稳定性和正确性。因此，在部署HBase之前，需要为集群的各节点配置时间同步。</p></li></ol><p>1）安装Chrony</p><p>在虚拟机hadoop1上运行如下命令安装时间同步工具Chrony。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum install chrony –y</span><br><span class="line">ssh hadoop2 "yum install chrony -y"</span><br><span class="line">ssh hadoop3 "yum install chrony -y"</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88HBase%EF%BC%89/image-20240722091354118.png" alt="image-20240722091354118"></p><p>2）启动Chrony服务</p><p>在虚拟机hadoop1上运行如下命令启动时间同步工具Chrony的服务。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl start chronyd</span><br><span class="line">ssh hadoop2 "systemctl start chronyd"</span><br><span class="line">ssh hadoop3 "systemctl start chronyd"</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88HBase%EF%BC%89/image-20240722091428233.png" alt="image-20240722091428233"></p><p>3）查看Chrony服务运行状态</p><p>在虚拟机hadoop1、 hadoop2和hadoop3查看Chrony服务的运行状态。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status chronyd</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88HBase%EF%BC%89/image-20240722091444387.png" alt="image-20240722091444387"></p><p>4）配置Chrony服务端</p><p>在虚拟机hadoop1执行<code>vi /etc/chrony.conf</code>命令编辑Chrony的配置文件<code>chrony.conf</code>，将Chrony默认使用的时钟源指定为中国国家授时中心，并且允许处于任意网段的Chrony客户端可以通过虚拟机hadoop1的Chrony服务端进行时间同步。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">server ntp.ntsc.ac.cn iburst</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88HBase%EF%BC%89/image-20240722091655104.png" alt="image-20240722091655104"></p><p>5）配置Chrony客户端</p><p>分别在虚拟机hadoop2和虚拟机hadoop3执行<code>vi /etc/chrony.conf</code>命令编辑Chrony的配置文件<code>chrony.conf</code>，指定Chrony客户端进行时间同步的Chrony服务端。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">server hadoop1 iburst</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88HBase%EF%BC%89/image-20240722091855733.png" alt="image-20240722091855733"></p><p>6）重新启动Chrony服务</p><p>在虚拟机hadoop1上运行如下命令重新启动时间同步工具Chrony的服务。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart chronyd</span><br><span class="line">ssh hadoop2 "systemctl restart chronyd"</span><br><span class="line">ssh hadoop3 "systemctl restart chronyd"</span><br></pre></td></tr></table></figure><p>7）查看时钟源</p><p>在虚拟机hadoop1上运行如下命令查看Chrony服务端和客户端的时钟源。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">chronyc sources -v</span><br><span class="line">ssh hadoop2 "chronyc sources -v"</span><br><span class="line">ssh hadoop3 "chronyc sources -v"</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88HBase%EF%BC%89/image-20240722092222831.png" alt="image-20240722092222831"></p><h2 id="二、安装HBase"><a href="#二、安装HBase" class="headerlink" title="二、安装HBase"></a>二、安装HBase</h2><ol><li><p>上传安装包</p><p>将hbase-2.5.8-bin.tar.gz上传到hadoop1的<code>/software</code>目录。</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88HBase%EF%BC%89/image-20240722092308717.png" alt="image-20240722092308717"></p></li><li><p>安装HBase</p><p>以解压方式安装HBase，将HBase安装到/opt目录。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf /software/hbase-2.5.8-bin.tar.gz  -C /opt</span><br><span class="line">ln -s /opt/hbase-2.5.9 /opt/hbase</span><br></pre></td></tr></table></figure></li></ol><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88HBase%EF%BC%89/image-20240722092519961.png" alt="image-20240722092519961"></p><ol><li><p>配置HBase系统环境变量</p><p>在虚拟机hadoop1执行<code>vi /etc/profile</code>命令编辑系统环境变量文件profile，在该文件的底部添加如下内容。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export HBASE_HOME=/opt/hbase</span><br><span class="line">export PATH=$PATH:$HBASE_HOME/bin</span><br></pre></td></tr></table></figure><p>执行<code>source /etc/profile</code>命令初始化系统环境变量使添加的HBase系统环境变量生效。</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88HBase%EF%BC%89/image-20240722092601236.png" alt="image-20240722092601236"></p></li></ol><h2 id="三、配置HBase"><a href="#三、配置HBase" class="headerlink" title="三、配置HBase"></a>三、配置HBase</h2><div class="table-container"><table><thead><tr><th>虚拟机</th><th>HMaster</th><th>HRegionServer</th></tr></thead><tbody><tr><td>hadoop1</td><td>√</td><td></td></tr><tr><td>hadoop2</td><td></td><td>√</td></tr><tr><td>hadoop3</td><td></td><td>√</td></tr></tbody></table></div><ol><li><p>配置文件介绍</p><p>所有配置文件都位于 conf 目录中，需要保持集群中每个节点同步。</p></li></ol><ul><li><p>backup-masters</p><p>默认情况下不存在。文件中添加运行备用HMaster进程的虚拟机主机名或IP。</p></li><li><p>hadoop-metrics2-hbase.properties</p><p>用于连接HBase Hadoop的Metrics2框架</p></li><li><p>hbase-env.cmd和hbase-env.sh</p><p>用于Windows和Linux/UNIX环境的脚本来设置HBase的工作环境，包括Java、Java选项和其他环境变量的位置。</p></li><li><p>hbase-policy.xml</p><p>它是一个RPC服务器使用的默认策略配置文件，根据文件配置内容对客户端请求进行授权决策。仅在启用HBase安全性时使用。</p></li><li><p>hbase-site.xml</p><p>该文件指定覆盖HBase默认的配置选项。</p></li></ul><div class="table-container"><table><thead><tr><th>配置项</th><th>说明</th></tr></thead><tbody><tr><td>hbase.tmp.dir</td><td>本地文件系统的临时目录，默认目录在/tmp目录下，该目录会在系统重启后清空，所以需要注意该参数的值<br>默认值为：j a v a . i o . t m p d i r / h b a s e − {java.io.tmpdir}/hbase-java.io.tmpdir/hbase−{user.name}</td></tr><tr><td>hbase.rootdir</td><td>RegionServers使用的目录，指定了HBase的数据存放目录，该路径需要完全限定（full-qualified），比如需要指定一个9000端口的HDFS文件系统下的/hbase目录，应写成：hdfs://namenode.example.org:9000/hbase<br>默认值：${hbase.tmp.dir}/hbase</td></tr><tr><td>hbase.cluster.distributed</td><td>是否分布式<br>默认值：false</td></tr><tr><td>hbase.zookeeper.quorum</td><td>用逗号分隔的ZooKeeper集群中的服务器列表</td></tr><tr><td>hbase.zookeeper.property.dataDir</td><td>存放HBase自己管理的zookeeper的属性数据信息的目录</td></tr><tr><td>zookeeper.znode.parent</td><td>指定了HBase在ZooKeeper上使用的节点路径</td></tr><tr><td>hbase.wal.provider</td><td>配置WAL的实现方式：<br>asyncfs：默认值。自hbase-2.0.0（hbase-1536、hbase-14790）以来新增。它构建在一个新的非阻塞dfsclient实现上。<br>filesystem：这是hbase-1.x版本中的默认设置。它构建在阻塞的DFSClient上，并以经典的DFSClient管道模式写入副本。<br>multiwal：由多个asyncfs或filesystem实例组成</td></tr><tr><td></td><td></td></tr><tr><td></td></tr></tbody></table></div><ul><li><p>log4j.properties</p><p>通过log4j进行HBase日志记录的配置文件。修改这个文件中的参数可以改变HBase的日志级别。</p></li><li><p>regionservers</p><p>包含HBase集群中运行的所有Region Server主机列表（默认情况下，这个文件包含单个条目localhost）。该文件是一个纯文本文件，每行是一个主机名或IP地址</p></li></ul><ol><li><p>配置HBase</p><p>1）修改HBase配置文件hbase-env.sh</p><p>HBase的配置文件<code>hbase-env.sh</code>主要用于配置HBase的运行环境。进入虚拟机hadoop1的<code>/opt/hbase/conf</code>目录，执行<code>vi hbase-env.sh</code>命令编辑配置文件<code>hbase-env.sh</code>，在文件的尾部添加如下内容。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export HBASE_MANAGES_ZK=false</span><br><span class="line">export JAVA_HOME=/opt/jdk</span><br></pre></td></tr></table></figure><p>HBASE_MANAGES_ZK 该配置项为true时，由HBase自己管理Zookeeper；否则，启动独立的Zookeeper</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88HBase%EF%BC%89/image-20240722093450894.png" alt="image-20240722093450894"></p><p>2）修改HBase配置文件hbase-site.xml</p><p>HBase的配置文件hbase-site.xml主要用于配置HBase的参数。进入虚拟机hadoop1的<code>/opt/hbase/conf</code>目录，执行<code>vi hbase-site.xml</code>命令编辑配置文件<code>hbase-site.xml</code>，将该文件的<code>&lt;configuration&gt;</code>标签中的默认配置替换为如下内容。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;property&gt;</span><br><span class="line">    &lt;name&gt;hbase.cluster.distributed&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;true&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">    &lt;name&gt;hbase.rootdir&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;hdfs://hadoop1:9000/hbase&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">    &lt;name&gt;hbase.tmp.dir&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;/opt/data/hbase/tmp&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">    &lt;name&gt;zookeeper.znode.parent&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;/hbase&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">    &lt;name&gt;hbase.zookeeper.property.dataDir&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;/opt/data/zookeeper/zkdata&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;hbase.zookeeper.quorum&lt;/name&gt;</span><br><span class="line">&lt;value&gt;hadoop1:2181,hadoop2:2181,hadoop3:2181&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">    &lt;name&gt;hbase.wal.provider&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;filesystem&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">    &lt;name&gt;hbase.unsafe.stream.capability.enforce&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;false&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88HBase%EF%BC%89/image-20240722093740769.png" alt="image-20240722093740769"></p><p>3）修改HBase配置文件regionservers</p><p>HBase的配置文件regionservers用于通过主机名指定运行Regionserver的计算机。由于这里在虚拟机hadoop2和hadoop3运行HRegionserver进程，执行 <code>vi regionservers</code> 命令编辑配置如下内容。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hadoop2</span><br><span class="line">hadoop3</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88HBase%EF%BC%89/image-20240722093918379.png" alt="image-20240722093918379"></p><p>4）分发HBase安装目录</p><p>为了便捷地在虚拟机hadoop2和hadoop3安装和配置HBase，这里通过scp命令将虚拟机hadoop1的相关配置同步到两台主机。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">scp -r /opt/hbase root@hadoop2:/opt/</span><br><span class="line">scp /etc/profile root@hadoop2:/etc/</span><br><span class="line">scp -r /opt/hbase root@hadoop3:/opt/</span><br><span class="line">scp /etc/profile root@hadoop3:/etc/</span><br></pre></td></tr></table></figure><h2 id="四、启动与测试"><a href="#四、启动与测试" class="headerlink" title="四、启动与测试"></a>四、启动与测试</h2></li><li><p>启动</p><p>在hadoop1主机运行如下命令启动集群。</p><p>1）启动hadoop</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">start-all.sh</span><br></pre></td></tr></table></figure><p>2）启动zookeeper</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /opt/xshell</span><br><span class="line">sh xzookeeper.sh start</span><br></pre></td></tr></table></figure><p>3）启动hbase</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">start-hbase.sh</span><br></pre></td></tr></table></figure></li></ol><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88HBase%EF%BC%89/image-20240722094415369.png" alt="image-20240722094415369"></p><ol><li><p>查看进程</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /opt/xshell</span><br><span class="line">sh xjps.sh</span><br></pre></td></tr></table></figure></li></ol><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88HBase%EF%BC%89/image-20240722094457314.png" alt="image-20240722094457314"></p><ol><li><p>网页查看（<a href="http://hadoop1:16010）">http://hadoop1:16010）</a></p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88HBase%EF%BC%89/image-20240722094531491.png" alt="image-20240722094531491"></p></li></ol><ol><li><p>shell测试<br>进入hbase shell交互界面，查看集群状态、命名空间列表、表列表，最后退出交互界面</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">status</span><br><span class="line">list_namespace</span><br><span class="line">list</span><br><span class="line">exit</span><br></pre></td></tr></table></figure></li></ol><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88HBase%EF%BC%89/image-20240722094750119.png" alt="image-20240722094750119"></p><ol><li><p>关闭集群</p><p>在hadoop1主机运行如下命令关闭集群。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">stop-hbase.sh      #关闭HBase集群</span><br><span class="line">cd /opt/xshell</span><br><span class="line">sh xzookeeper.sh stop  #关闭Zookeeper集群</span><br><span class="line">stop-all.sh#关闭Hadoop集群</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;HBase&quot;&gt;&lt;a href=&quot;#HBase&quot; class=&quot;headerlink&quot; title=&quot;HBase&quot;&gt;&lt;/a&gt;HBase&lt;/h1&gt;&lt;p&gt;Apache HBase是一个分布式、可扩展、大数据存储的Hadoop数据库。当我们需要对大数据进行随机、实时的读/</summary>
      
    
    
    
    <category term="大数据集群" scheme="https://want595.github.io/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E9%9B%86%E7%BE%A4/"/>
    
    
  </entry>
  
  <entry>
    <title>完全分布式高可用集群（MySQL+Hive）</title>
    <link href="https://want595.github.io/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88MySQL-Hive%EF%BC%89/"/>
    <id>https://want595.github.io/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88MySQL-Hive%EF%BC%89/</id>
    <published>2024-07-22T07:04:26.000Z</published>
    <updated>2024-07-22T07:04:49.091Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Hive"><a href="#Hive" class="headerlink" title="Hive"></a>Hive</h1><h2 id="零、资源准备"><a href="#零、资源准备" class="headerlink" title="零、资源准备"></a>零、资源准备</h2><ul><li>apache-hive-3.1.3-bin.tar.gz</li><li>mysql-connector-java-8.0.30.jar</li></ul><p>约定：所有安装包存放于/software， 安装目录为/opt。</p><h2 id="一、安装准备（MySQL）"><a href="#一、安装准备（MySQL）" class="headerlink" title="一、安装准备（MySQL）"></a>一、安装准备（MySQL）</h2><ol><li><p>安装MySQL</p><p>将MySQL安装在虚拟机Hadoop3。</p><p>1）下载MySQL的源文件</p><p>可以通过 wget 工具下载 MySQL 源文件。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /software</span><br><span class="line">yum -y install wget</span><br><span class="line">wget http://dev.mysql.com/get/mysql80-community-release-el9-1.noarch.rpm</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88MySQL-Hive%EF%BC%89/image-20240721214134672.png" alt="image-20240721214134672"></p><p>2）安装MySQL源</p><p>安装下载的MySQL源文件，在MySQL源文件所在目录执行如下命令。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum localinstall mysql80-community-release-el9-1.noarch.rpm</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88MySQL-Hive%EF%BC%89/image-20240721214205637.png" alt="image-20240721214205637"></p><p>3）安装MySQL</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install mysql-community-server -y</span><br></pre></td></tr></table></figure><p>如果出现Error: GPG check FAILED错误，是Mysql的GPG升级的缘故</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88MySQL-Hive%EF%BC%89/image-20240721214418834.png" alt="image-20240721214418834"></p><p>解决办法：</p><p>（1）获取GPG：<code>rpm --import https://repo.mysql.com/RPM-GPG-KEY-mysql-2023</code></p><p>（2）重新配置GPG： <code>vi /etc/yum.repos.d/mysql-community.repo</code></p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88MySQL-Hive%EF%BC%89/image-20240721214353421.png" alt="image-20240721214353421"></p><p>（3）运行<code>yum install mysql-community-server -y</code>重新安装MySQL</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88MySQL-Hive%EF%BC%89/image-20240721214505630.png" alt="image-20240721214505630"></p><p>如果还是不能解决，可以参考官方安装指南： <a href="https://dev.mysql.com/doc/mysql-yum-repo-quick-guide/en">https://dev.mysql.com/doc/mysql-yum-repo-quick-guide/en</a></p><p>4）启动MySQL服务</p><p>启动MySQL服务，在虚拟机Hadoop3上执行如下命令。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start mysqld</span><br></pre></td></tr></table></figure><p>可以使用命令 <code>systemctl status mysqld</code> 检查服务状态</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88MySQL-Hive%EF%BC%89/image-20240721214604836.png" alt="image-20240721214604836"></p><p>MySQL安装完成后，默认为root用户提供了初始密码，查看该初始密码的命令如下所示。</p><p>5）查看MySQL初始密码</p><p>MySQL安装完成后，默认为root用户提供了初始密码，查看该初始密码的命令如下所示。</p><p><code>grep 'temporary password' /var/log/mysqld.log</code></p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88MySQL-Hive%EF%BC%89/image-20240721215052539.png" alt="image-20240721215052539"></p><p>6）修改密码</p><p>通过root用户，以及MySQL为root用户提供的初始密码登陆MySQL，具体命令如下。</p><p><code>mysql –uroot -p</code></p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88MySQL-Hive%EF%BC%89/image-20240721214956930.png" alt="image-20240721214956930"></p><p>MySQL默认为root提供的密码较为复杂不便使用，这里将root用户的密码修改为Abc@2024，刷新MySQL配置，使修改root用户密码的操作生效，具体命令如下。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter user 'root'@'localhost' identified by 'Abc@2024';</span><br><span class="line">mysql&gt; FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88MySQL-Hive%EF%BC%89/image-20240721215307052.png" alt="image-20240721215307052"></p><p>7）配置远程访问</p><p>修改Mysql配置文件<code>vi /etc/my.cnf</code>, 在[mysqld]选项下添加如下配置：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bind-address=0.0.0.0</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88MySQL-Hive%EF%BC%89/image-20240721215407772.png" alt="image-20240721215407772"></p><p>授权帐号可以远程登录，介绍两种方法，任选其一：</p><p>方法一：改表法</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt;use mysql;</span><br><span class="line">mysql&gt;update user set host = '%' where user = 'root';</span><br><span class="line">mysql&gt;select host, user from user;</span><br></pre></td></tr></table></figure><p>方法二：授权法</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt;GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'Abc@2024' WITH GRANT OPTION;</span><br><span class="line">mysql&gt;FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure><p>最后重启Mysqld服务</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart mysqld</span><br></pre></td></tr></table></figure></li></ol><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88MySQL-Hive%EF%BC%89/image-20240721222738201.png" alt="image-20240721222738201"></p><p>这里将Hive安装在hadoop1虚拟机上</p><h2 id="二、完全分布式部署（Hive）"><a href="#二、完全分布式部署（Hive）" class="headerlink" title="二、完全分布式部署（Hive）"></a>二、完全分布式部署（Hive）</h2><ol><li><p>安装Hive</p><p>1）上传Hive安装包</p><p>通过Hive官网或者文末提供的百度网盘链接下载Hive的安装包apache-hive-3.1.3-bin.tar.gz，使用相关工具（如finalshell）上传安装包到 /software目录。</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88MySQL-Hive%EF%BC%89/image-20240721215756915.png" alt="image-20240721215756915"></p><p>2） 安装Hive</p><p>以解压方式安装Hive，将Hive安装到目录/opt，创建软链接（或重命名），在虚拟机hadoop1上执行如下命令即可。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf /software/apache-hive-3.1.3-bin.tar.gz -C /opt</span><br><span class="line">ln -s /opt/apache-hive-3.1.3-bin /opt/hive</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88MySQL-Hive%EF%BC%89/image-20240721220258104.png" alt="image-20240721220258104"></p><p>3） 同步guava包</p><p>将Hive中的guava-19.0.jar替换为Hadoop中的guava-27.0-jre.jar，具体操作执行如下命令。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /opt/hadoop-3.3.6/share/hadoop/common/lib</span><br><span class="line">cp guava-27.0-jre.jar /opt/hive/lib/</span><br><span class="line">rm -fr /opt/hive/lib/guava-19.0.jar</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88MySQL-Hive%EF%BC%89/image-20240721220458343.png" alt="image-20240721220458343"></p><p>4）配置Hive系统环境变量</p><p>在虚拟机执行<code>vi /etc/profile</code>命令配置系统环境变量文件profile，在该文件的底部添加如下内容。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export HIVE_HOME=/opt/hive</span><br><span class="line">export PATH=$PATH:$HIVE_HOME/bin</span><br></pre></td></tr></table></figure><p>执行<code>source /etc/profile</code>命令初始化系统环境变量使添加的Hive系统环境变量生效。</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88MySQL-Hive%EF%BC%89/image-20240721220549718.png" alt="image-20240721220549718"></p></li><li><p>配置Hive</p><p>在Hive安装目录的<code>/opt/hive/conf</code>下执行<code>vi hive-site.xml</code>命令创建Hive配置文件<code>hive-site.xml</code>，在该文件中添加如下内容。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;jdbc:mysql://hadoop1:3306/hive?createDatabaseIfNotExist=true &lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;com.mysql.cj.jdbc.Driver&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;root&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;Abc@2024&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;hive.metastore.warehouse.dir&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;/user/hive/warehouse&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">    &lt;property&gt;         </span><br><span class="line">        &lt;name&gt;hive.server2.thrift.port&lt;/name&gt;         </span><br><span class="line">        &lt;value&gt;10000&lt;/value&gt;     </span><br><span class="line">    &lt;/property&gt;    </span><br><span class="line">    &lt;property&gt;        </span><br><span class="line">        &lt;name&gt;hive.server2.thrift.bind.host&lt;/name&gt;        </span><br><span class="line">        &lt;value&gt;hadoop1&lt;/value&gt;    </span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure><p>常用参数介绍如下：</p></li></ol><div class="table-container"><table><thead><tr><th>属性名称</th><th>类型</th><th>默认值</th><th>描述</th></tr></thead><tbody><tr><td>hive.metastore.warehouse.dir</td><td>URI</td><td>/user/hive/warehouse</td><td>配置Hive数据存储在HDFS上的目录，托管表就存储在这里</td></tr><tr><td>hive.server2.thrift.port</td><td>INT</td><td>默认10000</td><td>配置hiveserver2的端口</td></tr><tr><td>hive.server2.thrift.bind.host</td><td>String</td><td>localhost</td><td>配置hiveserver2的主机</td></tr><tr><td>hive.metastore.uris</td><td>逗号分隔的URI</td><td>未设定</td><td>如果未设置（默认值），则使用当前的metastore，否则连接到由URI列表指定要连接的远程metastore服务器。如果有多个远程服务器，则客户端便以轮询方式连接</td></tr><tr><td>javax.jdo.option.ConnectionURL</td><td>URI</td><td>jdbc:derby:;<br>databaseName=metastore_db;<br>create=true</td><td>配置JDBC连接地址， mysql示例： jdbc:mysql://localhost:3306/hive?createDatabaseIfNotExist=true</td></tr><tr><td>javax.jdo.option.ConnectionDriverName</td><td>String</td><td>org.apache.derby.jdbc.EmbeddedDriver</td><td>配置JDBC驱动， mysql示例： com.mysql.jdbc.Driver</td></tr><tr><td>javax.jdo.option.ConnectionUserName</td><td>String</td><td>APP</td><td>配置连接MySQL的用户名</td></tr><tr><td>javax.jdo.option.ConnectionPassword</td><td>String</td><td>mine</td><td>配置连接MySQL的密码</td></tr></tbody></table></div><ol><li><p>元数据初始化</p><p>1）上传MySQL驱动包</p><p>在官网或者文末网盘链接下载MySQL驱动包mysql-connector-java-8.0.31.jar，将上传到在虚拟机hadoop1的<code>/opt/hive/lib</code>目录。</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88MySQL-Hive%EF%BC%89/image-20240722084229022.png" alt="image-20240722084229022"></p><p>2）初始化MySQL</p><p>在操作本地模式部署的Hive之前，需要执行初始化MySQL的操作，具体命令如下。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">schematool -initSchema -dbType mysql</span><br></pre></td></tr></table></figure></li></ol><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88MySQL-Hive%EF%BC%89/image-20240721222820025.png" alt="image-20240721222820025"></p><ol><li><p>测试</p><p>1）启动Hadoop</p><p>在虚拟机hadoop1中，使用命令<code>start-all.sh</code>启动hadoop集群。</p><p>2）CLI测试</p><p>hive命令后不跟参数时，默认启动cli，即下面命令可以省略—service cli参数</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hive --service cli</span><br><span class="line">hive&gt; show databases;</span><br></pre></td></tr></table></figure></li></ol><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88MySQL-Hive%EF%BC%89/image-20240721222937588.png" alt="image-20240721222937588"></p><ol><li><p>beeline测试（需保持hive启动状态）</p><p>Beeline是Hive 0.11版本引入的Hive客户端工具，它通过JDBC的方式连接HiveServer2服务。所以在使用beeline客户端，需要启动hiveserver2服务（HS2），在hadoop1上运行如下命令。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup hive --service hiveserver2  &amp;</span><br></pre></td></tr></table></figure><p>提示，在启动一些后台守护进程时经常搭配使用nohup和&amp;: nohup &lt;程序名&gt; &amp;</p><p>使用nohup运行程序使用Ctrl+C 发送SIGINT信号，程序关闭；关闭session发送SIGHUP信号，程序免疫</p><p>使用&amp;后台运行使用Ctrl+C 发送SIGINT信号，程序免疫；关闭session发送SIGHUP信号，程序关闭</p><p>运行如下命令测试环境。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#启动beeline</span><br><span class="line">beeline</span><br><span class="line">#在交互界面输入连接信息：</span><br><span class="line">!connect jdbc:hive2://hadoop1:10000</span><br><span class="line">#输入用户名和密码,注意，输入的用户名root和密码123456是虚拟机hadoop1的用户名和密码</span><br><span class="line">#查看所有数据库</span><br><span class="line">show databases;</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88MySQL-Hive%EF%BC%89/image-20240722085235129.png" alt="image-20240722085235129"></p><p>在运行beeline命令时，也可以使用下面命令指定连接的服务地址和用户名。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">beeline -u jdbc:hive2://hadoop1:10000 -n root</span><br></pre></td></tr></table></figure><p>参数-u：用于指定HiveServer2服务的地址。</p><p>hadoop1：表示启动HiveServer2服务的服务器主机名。</p><p>10000：是HiveServer2服务默认使用的端口。</p><p>参数-n：用于指定连接HiveServer2服务时加载的用户名，该用户名必须具有操作HDFS的权限。</p></li><li><p>远程模式</p></li></ol><p>将MetaStore服务部署在虚拟机hadoop2上。</p><p>网络拓扑：</p><div class="table-container"><table><thead><tr><th>服务</th><th>虚拟机</th></tr></thead><tbody><tr><td>MetaStore</td><td>hadoop2</td></tr><tr><td>HiveServer2</td><td>hadoop1</td></tr></tbody></table></div><p>1）修改Hive配置</p><p>进入虚拟机hadoop1中Hive安装目录下的conf目录，在该目录下执行<code>vi hive-site.xml</code>命令创建Hive配置文件hive-site.xml，在该文件中添加如下内容。</p>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;property&gt;</span><br><span class="line">    &lt;name&gt;hive.metastore.uris&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;thrift://hadoop2:9083&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br></pre></td></tr></table></figure><p>  hive.metastore.uris用于指定MetaStore服务器的地址，如有多个地址，使用逗号隔开。如果未设置（默认值），则使用当前的MetaStore，否则连接到由URI列表指定要连接的远程MetaStore服务器。如果有多个远程服务器，则客户端便以轮询方式连接。</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88MySQL-Hive%EF%BC%89/image-20240722085504926.png" alt="image-20240722085504926"></p><p>2）同步Hive</p><p>将hadoop1的Hive环境同步到hadoop2， 在hadoop1上执行一下命令：</p>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scp -r /opt/hive root@hadoop2:/opt</span><br><span class="line">scp /etc/profile root@hadoop2:/etc</span><br></pre></td></tr></table></figure><p>3）启动服务</p><p>在hadoop2主机上启动MetaStore服务</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup hive --service metastore &amp;</span><br></pre></td></tr></table></figure><p>在hadoop1主机上启动HiveServer2服务</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup hive --service hiveserver2 &amp;</span><br></pre></td></tr></table></figure><p> 注意，在本地模式步骤中已经启动了Hiveserver2服务，可以使用<code>ps -ef | grep hive</code>命令查看进程ID，使用<code>kill -9</code>进程ID结束指定进程。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Hive&quot;&gt;&lt;a href=&quot;#Hive&quot; class=&quot;headerlink&quot; title=&quot;Hive&quot;&gt;&lt;/a&gt;Hive&lt;/h1&gt;&lt;h2 id=&quot;零、资源准备&quot;&gt;&lt;a href=&quot;#零、资源准备&quot; class=&quot;headerlink&quot; title=&quot;零、资源准</summary>
      
    
    
    
    <category term="大数据集群" scheme="https://want595.github.io/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E9%9B%86%E7%BE%A4/"/>
    
    
  </entry>
  
  <entry>
    <title>完全分布式高可用集群（Kafka）</title>
    <link href="https://want595.github.io/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Kafka%EF%BC%89/"/>
    <id>https://want595.github.io/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Kafka%EF%BC%89/</id>
    <published>2024-07-22T07:03:34.000Z</published>
    <updated>2024-07-22T07:03:48.072Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Kafka"><a href="#Kafka" class="headerlink" title="Kafka"></a>Kafka</h1><h2 id="零、资源准备"><a href="#零、资源准备" class="headerlink" title="零、资源准备"></a>零、资源准备</h2><ul><li>kafka_2.13-3.7.1.tgz</li></ul><h2 id="一、搭建完全分布式集群（Kafka）"><a href="#一、搭建完全分布式集群（Kafka）" class="headerlink" title="一、搭建完全分布式集群（Kafka）"></a>一、搭建完全分布式集群（Kafka）</h2><p>注意：下载并使用Kafka前，必须安装Zookeeper！</p><p>kafka官网下载地址：<a href="https://kafka.apache.org/downloads">https://kafka.apache.org/downloads</a></p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Kafka%EF%BC%89/image-20240721184641847.png" alt="image-20240721184641847"></p><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><ol><li>解压压缩包到/opt目录并设置软链接（或直接改名）</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf /software/kafka_2.13-3.7.1.tgz -C /opt/</span><br><span class="line">ln -s /opt/kafka_2.13-3.7.1 /opt/kafka</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Kafka%EF%BC%89/image-20240721185231758.png" alt="image-20240721185231758"></p><ol><li>进入hadoop1机器的<code>/opt/kafka/config</code>目录并修改配置文件<code>server.properties</code></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /opt/kafka/config/</span><br><span class="line">vim server.properties</span><br></pre></td></tr></table></figure><p>修改以下内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">broker.id=1</span><br><span class="line">log.dir=/opt/data/kafka/kafka-logs</span><br><span class="line">listeners=PLAINTEXT://hadoop1:9092</span><br><span class="line">zookeeper.connect=hadoop1:2181,hadoop2:2181,hadoop3:2181</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Kafka%EF%BC%89/image-20240721191814025.png" alt="image-20240721191814025"></p><ol><li>修改<code>/etc/profile</code>文件，填入以下内容</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export KAFKA_HOME=/opt/kafka</span><br><span class="line">export PATH=$PATH:$KAFKA_HOME/bin</span><br></pre></td></tr></table></figure><p>修改后记得source一下</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Kafka%EF%BC%89/image-20240721190308241.png" alt="image-20240721190308241"></p><ol><li>分发到hadoop2和hadoop3</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">scp -r /opt/kafka hadoop2:/opt/</span><br><span class="line">scp -r /opt/kafka hadoop3:/opt/</span><br><span class="line">scp -r /etc/profile hadoop2:/etc</span><br><span class="line">scp -r /etc/profile hadoop3:/etc</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh hadoop2 "source /etc/profile"</span><br><span class="line">ssh hadoop3 "source /etc/profile"</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Kafka%EF%BC%89/image-20240721193839715.png" alt="image-20240721193839715"></p><ol><li>修改hadoop2和hadoop3的<code>/opt/kafka/config/server.properties</code>文件</li></ol><p><strong>hadoop2</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">broker.id=2</span><br><span class="line">listeners=PLAINTEXT://hadoop2:9092</span><br></pre></td></tr></table></figure><p><strong>hadoop3</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">broker.id=3</span><br><span class="line">listeners=PLAINTEXT://hadoop3:9092</span><br></pre></td></tr></table></figure><h3 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h3><p><strong>三台机器都要启动Zookeeper</strong></p><p><strong>三台机器都要启动Kafka</strong></p><ol><li><p>启停命令（三台都需要启动）</p><p>kafka启动命令：（不能用环境变量启动，因为环境变量只配置了bin，没配置config）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/opt/kafka/bin/kafka-server-start.sh -daemon /opt/kafka/config/server.properties</span><br><span class="line">ssh hadoop2 "/opt/kafka/bin/kafka-server-start.sh -daemon /opt/kafka/config/server.properties"</span><br><span class="line">ssh hadoop3 "/opt/kafka/bin/kafka-server-start.sh -daemon /opt/kafka/config/server.properties"</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Kafka%EF%BC%89/image-20240721194626136.png" alt="image-20240721194626136"></p><p>查看三台机器的Kafka状态</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">jps</span><br><span class="line">ssh hadoop2 "jps"</span><br><span class="line">ssh hadoop3 "jps"</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Kafka%EF%BC%89/image-20240721194741943.png" alt="image-20240721194741943"></p><p>kafka停止命令：（以hadoop1为例，如运行时找不到文件，可用完整路径运行，即加上前缀<code>/opt/kafka/bin</code>)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kafka-server-stop.sh</span><br><span class="line">ssh hadoop2 "kafka-server-stop.sh"</span><br><span class="line">ssh hadoop3 "kafka-server-stop.sh"</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Kafka%EF%BC%89/image-20240721193949189.png" alt="image-20240721193949189"></p></li><li><p>创建Topic（如运行时找不到文件，可用完整路径运行，即加上前缀<code>/opt/kafka/bin</code>）</p><p>1）进入到hadoop1的Kafka的<code>/opt/kafka</code>目录下，创建一个名为<code>test</code>的Topic。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kafka-topics.sh --bootstrap-server hadoop1:9092 --create --topic test --partitions 3 replication-factor 1</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Kafka%EF%BC%89/image-20240721195326702.png" alt="image-20240721195326702"></p><p>2）查看创建的Topic列表。</p><p><code>kafka-topics.sh --list --bootstrap-server hadoop1:9092</code></p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Kafka%EF%BC%89/image-20240721195519477.png" alt="image-20240721195519477"></p></li><li><p>测试通信（以hadoop1和hadoop2为例）</p><p>1）连接生产者，命令后面需要对应 Topic 名称。（如找不到文件，可用完整路径运行）</p><p>在<strong>hadoop1</strong>的命令行输入以下命令</p><p><code>kafka-console-producer.sh --bootstrap-server hadoop1:9092 --topic test</code></p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Kafka%EF%BC%89/image-20240721200131235.png" alt="image-20240721200131235"></p><p>2）连接消费者，需要连接消费者的Topic</p><p>在<strong>hadoop2</strong>的命令行输入以下命令</p><p><code>/opt/kafka/bin/kafka-console-consumer.sh --bootstrap-server hadoop1:9092 --topic test --from-beginning</code></p><p>当用户在hadoop1输入消息时，hadoop2会实时显示出用户在hadoop1中输入的消息</p></li></ol><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Kafka%EF%BC%89/image-20240721200206695.png" alt="image-20240721200206695"></p><p>​        同理，hadoop3也可以。</p><h3 id="脚本"><a href="#脚本" class="headerlink" title="脚本"></a>脚本</h3><p>可用脚本启停Kafka，查看Kafka状态</p><ol><li>在<code>/opt/xshell</code>文件夹中创建脚本<code>xjps.sh</code>，并输入以下内容</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#! /bin/bash</span><br><span class="line">for i in hadoop1 hadoop2 hadoop3</span><br><span class="line">do</span><br><span class="line">    echo --------- $i ----------</span><br><span class="line">    ssh $i "/opt/jdk/bin/jps $$*"</span><br><span class="line">done</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Kafka%EF%BC%89/image-20240721201352162.png" alt="image-20240721201352162"></p><p>运行脚本，查看状态</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Kafka%EF%BC%89/image-20240721201425053.png" alt="image-20240721201425053"></p><ol><li>在<code>/opt/xshell</code>文件夹中创建脚本<code>xzookeeper.sh</code>，并输入以下内容（上一章做过的可跳过）</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line"># 设置JAVA_HOME和更新PATH环境变量</span><br><span class="line">export JAVA_HOME=/opt/jdk</span><br><span class="line">export CLASSPATH=.:$JAVA_HOME/jre/lib/rt.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar</span><br><span class="line">export PATH=$PATH:$JAVA_HOME/bin</span><br><span class="line"></span><br><span class="line"># 检查输入参数</span><br><span class="line">if [ $# -ne 1 ]; then</span><br><span class="line">    echo "用法: $0 {start|stop|status}"</span><br><span class="line">    exit 1</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"># 执行操作</span><br><span class="line">case "$1" in</span><br><span class="line">    start)</span><br><span class="line">        echo "---------- Zookeeper 启动 ------------"</span><br><span class="line">        /opt/zookeeper/bin/zkServer.sh start</span><br><span class="line">        ssh hadoop2 "export JAVA_HOME=/opt/jdk; export PATH=\$PATH:\$JAVA_HOME/bin; /opt/zookeeper/bin/zkServer.sh start"</span><br><span class="line">        ssh hadoop3 "export JAVA_HOME=/opt/jdk; export PATH=\$PATH:\$JAVA_HOME/bin; /opt/zookeeper/bin/zkServer.sh start"</span><br><span class="line">        ;;</span><br><span class="line">    stop)</span><br><span class="line">        echo "---------- Zookeeper 停止 ------------"</span><br><span class="line">        /opt/zookeeper/bin/zkServer.sh stop</span><br><span class="line">        ssh hadoop2 "export JAVA_HOME=/opt/jdk; export PATH=\$PATH:\$JAVA_HOME/bin; /opt/zookeeper/bin/zkServer.sh stop"</span><br><span class="line">        ssh hadoop3 "export JAVA_HOME=/opt/jdk; export PATH=\$PATH:\$JAVA_HOME/bin; /opt/zookeeper/bin/zkServer.sh stop"</span><br><span class="line">        ;;</span><br><span class="line">    status)</span><br><span class="line">        echo "---------- Zookeeper 状态 ------------"</span><br><span class="line">        /opt/zookeeper/bin/zkServer.sh status</span><br><span class="line">        ssh hadoop2 "export JAVA_HOME=/opt/jdk; export PATH=\$PATH:\$JAVA_HOME/bin; /opt/zookeeper/bin/zkServer.sh status"</span><br><span class="line">        ssh hadoop3 "export JAVA_HOME=/opt/jdk; export PATH=\$PATH:\$JAVA_HOME/bin; /opt/zookeeper/bin/zkServer.sh status"</span><br><span class="line">        ;;</span><br><span class="line">    *)</span><br><span class="line">        echo "未知命令: $1"</span><br><span class="line">        echo "用法: $0 {start|stop|status}"</span><br><span class="line">        exit 2</span><br><span class="line">        ;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Kafka%EF%BC%89/image-20240721202131221.png" alt="image-20240721202131221"></p><p>运行代码<code>sh xzookeeper.sh status</code>，查看zookeeper状态</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Kafka%EF%BC%89/image-20240721202100896.png" alt="image-20240721202100896"></p><ol><li>在<code>/opt/xshell</code>文件夹中创建脚本<code>xkafka.sh</code>，并输入以下内容</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line"># Kafka和Zookeeper的配置</span><br><span class="line">KAFKA_HOME=/opt/kafka</span><br><span class="line">ZOOKEEPER_HOME=/opt/zookeeper</span><br><span class="line">JAVA_HOME=/opt/jdk</span><br><span class="line"></span><br><span class="line"># 定义启动Kafka的函数</span><br><span class="line">start_kafka() {</span><br><span class="line">    echo "Starting Kafka on hadoop1..."</span><br><span class="line">    $KAFKA_HOME/bin/kafka-server-start.sh -daemon $KAFKA_HOME/config/server.properties</span><br><span class="line">    </span><br><span class="line">    echo "Starting Kafka on hadoop2..."</span><br><span class="line">    ssh hadoop2 "export JAVA_HOME=$JAVA_HOME; export KAFKA_HOME=$KAFKA_HOME; $KAFKA_HOME/bin/kafka-server-start.sh -daemon $KAFKA_HOME/config/server.properties"</span><br><span class="line">    </span><br><span class="line">    echo "Starting Kafka on hadoop3..."</span><br><span class="line">    ssh hadoop3 "export JAVA_HOME=$JAVA_HOME; export KAFKA_HOME=$KAFKA_HOME; $KAFKA_HOME/bin/kafka-server-start.sh -daemon $KAFKA_HOME/config/server.properties"</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"># 定义停止Kafka的函数</span><br><span class="line">stop_kafka() {</span><br><span class="line">    echo "Stopping Kafka on hadoop1..."</span><br><span class="line">    $KAFKA_HOME/bin/kafka-server-stop.sh</span><br><span class="line">    </span><br><span class="line">    echo "Stopping Kafka on hadoop2..."</span><br><span class="line">    ssh hadoop2 "export KAFKA_HOME=$KAFKA_HOME; $KAFKA_HOME/bin/kafka-server-stop.sh"</span><br><span class="line">    </span><br><span class="line">    echo "Stopping Kafka on hadoop3..."</span><br><span class="line">    ssh hadoop3 "export KAFKA_HOME=$KAFKA_HOME; $KAFKA_HOME/bin/kafka-server-stop.sh"</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"># 定义检查Kafka状态的函数</span><br><span class="line">check_status() {</span><br><span class="line">    echo "Checking Kafka status on hadoop1..."</span><br><span class="line">    ssh hadoop1 "jps | grep -i kafka"</span><br><span class="line">    </span><br><span class="line">    echo "Checking Kafka status on hadoop2..."</span><br><span class="line">    ssh hadoop2 "jps | grep -i kafka"</span><br><span class="line">    </span><br><span class="line">    echo "Checking Kafka status on hadoop3..."</span><br><span class="line">    ssh hadoop3 "jps | grep -i kafka"</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"># 处理命令行参数</span><br><span class="line">case "$1" in</span><br><span class="line">    start)</span><br><span class="line">        start_kafka</span><br><span class="line">        ;;</span><br><span class="line">    stop)</span><br><span class="line">        stop_kafka</span><br><span class="line">        ;;</span><br><span class="line">    status)</span><br><span class="line">        check_status</span><br><span class="line">        ;;</span><br><span class="line">    *)</span><br><span class="line">        echo "Usage: $0 {start|stop|status}"</span><br><span class="line">        exit 1</span><br><span class="line">esac</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Kafka%EF%BC%89/image-20240721201615724.png" alt="image-20240721201615724"></p><p>运行代码<code>sh xkafka.sh status</code>，查看Kafka状态</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Kafka%EF%BC%89/image-20240721201724979.png" alt="image-20240721201724979"></p><h2 id="二、常见错误与解决方案"><a href="#二、常见错误与解决方案" class="headerlink" title="二、常见错误与解决方案"></a>二、常见错误与解决方案</h2><ol><li>找不到路径，可用完整路径运行文件，即加上前缀<code>/opt/kafka/bin</code></li><li>在scp后，需要修改hadoop2和hadoop3中的<code>/opt/kafka/config/server.properties</code> 文件</li><li>在scp系统文件<code>/etc/profile</code>后，记得source一下</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Kafka&quot;&gt;&lt;a href=&quot;#Kafka&quot; class=&quot;headerlink&quot; title=&quot;Kafka&quot;&gt;&lt;/a&gt;Kafka&lt;/h1&gt;&lt;h2 id=&quot;零、资源准备&quot;&gt;&lt;a href=&quot;#零、资源准备&quot; class=&quot;headerlink&quot; title=&quot;零</summary>
      
    
    
    
    <category term="大数据集群" scheme="https://want595.github.io/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E9%9B%86%E7%BE%A4/"/>
    
    
  </entry>
  
  <entry>
    <title>完全分布式高可用集群（Zookeeper）</title>
    <link href="https://want595.github.io/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Zookeeper%EF%BC%89/"/>
    <id>https://want595.github.io/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Zookeeper%EF%BC%89/</id>
    <published>2024-07-22T07:00:36.000Z</published>
    <updated>2024-07-22T07:01:28.270Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Zookeeper"><a href="#Zookeeper" class="headerlink" title="Zookeeper"></a>Zookeeper</h1><p>ZooKeeper是一个开源的分布式协调服务，它为分布式应用提供了高效且可靠的分布式协调服务，并且是分布式应用保证数据一致性的解决方案。该项目由雅虎公司创建，是Google Chubby的开源实现。</p><p>分布式应用可以基于ZooKeeper实现诸如数据发布/订阅、负载均衡、命名服务、分布式协调/通知、集群管理、Master选举、分布式锁、分布式队列等功能。在越来越多的分布式系统（Hadoop、HBase、Storm、Kafka）中，Zookeeper都作为核心组件使用。</p><h2 id="零、资源准备"><a href="#零、资源准备" class="headerlink" title="零、资源准备"></a>零、资源准备</h2><ul><li>apache-zookeeper-3.8.4-bin.tar.gz</li></ul><h2 id="一、搭建完全分布式集群（Zookeeper）"><a href="#一、搭建完全分布式集群（Zookeeper）" class="headerlink" title="一、搭建完全分布式集群（Zookeeper）"></a>一、搭建完全分布式集群（Zookeeper）</h2><p>Zookeeper的部署方式分为：</p><ul><li><p>独立模式（单机模式）</p></li><li><p>集群模式</p></li><li><p>伪分布式模式</p></li><li><p>完全分布模式</p></li></ul><p>本文介绍实际应用场景中的使用的完全分布模式的部署，生产环境一般采用奇数台（大于1）机器组成集群。</p><p>ZK节点为什么设置为奇数？</p><p>zookeeper有这样一个特性：集群中只要有过半的机器是正常工作的，那么整个集群对外就是可用的。</p><p>也就是说如果有2个zookeeper，那么只要有1个服务停止，zookeeper就不能对外提供服务，所以2个zookeeper的死亡容忍度为0；</p><p>同理，要是有3个zookeeper， 1个服务停止，还剩下2个正常的，过半了，所以3个zookeeper的容忍度为1；</p><p>同理：2 -&gt; 0; 3 -&gt; 1; 4 - &gt;1; 5 -&gt; 2; 6 -&gt; 2会发现一个规律，2n和2n-1的容忍度是一样的，都是n-1，所以为了更加高效，会选择奇数台组成集群。</p><p>在进行下面步骤之前，确保已经安装好虚拟机hadoop1、hadoop2、hadoop3，并且已经完成集群的网络环境配置和JDK的安装。</p><ol><li><p>安装Zookeeper</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Zookeeper%EF%BC%89/image-20240721181229680.png" alt="image-20240721181229680"></p><p>将zookeeper安装包上传至hadoop1虚拟机/software目录，运行下面命令解压安装</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar -xvf /software/apache-zookeeper-3.8.4-bin.tar.gz -C /opt</span><br><span class="line">ln -s /opt/apache-zookeeper-3.8.4-bin /opt/zookeeper</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Zookeeper%EF%BC%89/image-20240721181337560.png" alt="image-20240721181337560"></p><p>修改配置文件 <code>vi /etc/profile</code> ，添加如下内容：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export ZK_HOME=/opt/zookeeper</span><br><span class="line">export PATH=$PATH:$ZK_HOME/bin</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Zookeeper%EF%BC%89/image-20240721181416155.png" alt="image-20240721181416155"></p><p>运行<code>source /etc/profile</code>更新环境变量</p></li><li><p>修改配置文件</p><p>进入虚拟机hadoop1中ZooKeeper安装目录的conf目录，通过复制ZooKeeper模板文件zoo_sample.cfg创建文件zoo.cfg，再编辑文件zoo.cfg：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /opt/zookeeper/conf</span><br><span class="line">cp zoo_sample.cfg zoo.cfg</span><br><span class="line">vi zoo.cfg</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Zookeeper%EF%BC%89/image-20240721181526380.png" alt="image-20240721181526380"></p><p>修改相应的配置项</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#设置数据持久化目录</span><br><span class="line">dataDir=/opt/data/zookeeper/zkdata</span><br><span class="line">#设置客户端连接当前ZooKeeper服务使用的端口号</span><br><span class="line">clientPort=2181</span><br><span class="line">#设置ZooKeeper集群中每个ZooKeeper服务的地址及端口号</span><br><span class="line">server.1=hadoop1:2888:3888</span><br><span class="line">server.2=hadoop2:2888:3888</span><br><span class="line">server.3=hadoop3:2888:3888</span><br></pre></td></tr></table></figure></li></ol><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Zookeeper%EF%BC%89/image-20240721182921952.png" alt="image-20240721182921952"></p><ol><li><p>创建数据持久化目录</p><p>根据文件zoo.cfg中参数dataDir指定的值，在虚拟机hadoop1下执行以下命令，创建数据持久化目录。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /opt/data/zookeeper/zkdata</span><br><span class="line">ssh hadoop2 "mkdir -p /opt/data/zookeeper/zkdata"</span><br><span class="line">ssh hadoop3 "mkdir -p /opt/data/zookeeper/zkdata"</span><br></pre></td></tr></table></figure></li><li><p>创建myid文件</p><p>在虚拟机hadoop1主机执行以下命令，在数据持久化目录/opt/data/zookeeper/zkdata创建myid文件并分别写入值1、2、3。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">echo 1 &gt; /opt/data/zookeeper/zkdata/myid</span><br><span class="line">ssh hadoop2 "echo 2 &gt; /opt/data/zookeeper/zkdata/myid"</span><br><span class="line">ssh hadoop3 "echo 3 &gt; /opt/data/zookeeper/zkdata/myid"</span><br></pre></td></tr></table></figure><p>myid文件标识了该服务器在集群中的唯一ID号，该文件内容就是对应的ID号。</p><p>ID大小介于1至255，如果开启了扩展特征，比如TTL节点，ID需要介于1至254</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Zookeeper%EF%BC%89/image-20240721182254725.png" alt="image-20240721182254725"></p></li><li><p>分发Zookeeper和环境变量</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">scp -r /opt/zookeeper hadoop2:/opt/</span><br><span class="line">scp -r /opt/zookeeper hadoop3:/opt/</span><br><span class="line">scp -r /etc/profile hadoop2:/etc</span><br><span class="line">scp -r /etc/profile hadoop3:/etc</span><br></pre></td></tr></table></figure></li><li><p>启动zookeeper集群</p><p>在虚拟机hadoop1上执行以下命令启动ZooKeeper服务。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">zkServer.sh start</span><br><span class="line">ssh hadoop2 "source /etc/profile &amp;&amp; zkServer.sh start"</span><br><span class="line">ssh hadoop3 "source /etc/profile &amp;&amp; zkServer.sh start"</span><br></pre></td></tr></table></figure></li><li><p>查看启动状态</p><p>在虚拟机hadoop1上执行以下命令查看ZooKeeper集群运行状态。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">zkServer.sh status</span><br><span class="line">ssh hadoop2 "source /etc/profile &amp;&amp; zkServer.sh status"</span><br><span class="line">ssh hadoop3 "source /etc/profile &amp;&amp; zkServer.sh status"</span><br></pre></td></tr></table></figure></li></ol><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Zookeeper%EF%BC%89/image-20240721183236077.png" alt="image-20240721183236077"></p><ol><li><p>集群服务管理脚本</p><p>在虚拟机hadoop1上执行下面的命令，编写zookeeper集群服务管理脚本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cd /opt</span><br><span class="line">mkdir xshell</span><br><span class="line">cd xshell</span><br><span class="line">touch xzookeeper.sh</span><br><span class="line">chmod +x xzookeeper.sh</span><br><span class="line">vi xzookeeper.sh</span><br></pre></td></tr></table></figure><p>编辑如下脚本内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">for host in hadoop1 hadoop2 hadoop3</span><br><span class="line">do</span><br><span class="line">        case $1 in</span><br><span class="line">        "start"){</span><br><span class="line">                echo "                                               "</span><br><span class="line">                echo "--------------- 启 动 zookeeper ---------------"</span><br><span class="line">                echo "------------ $host zookeeper -----------"</span><br><span class="line">                ssh $host "source /etc/profile &amp;&amp; zkServer.sh start"</span><br><span class="line">        };;</span><br><span class="line">        "stop"){</span><br><span class="line">                echo "                                               "</span><br><span class="line">                echo "--------------- 关 闭 zookeeper ---------------"</span><br><span class="line">                echo "------------ $host zookeeper -----------"</span><br><span class="line">                ssh $host "source /etc/profile &amp;&amp; zkServer.sh stop"</span><br><span class="line">        };;</span><br><span class="line">        "status"){</span><br><span class="line">                echo "                                               "</span><br><span class="line">                echo "-------------- 查看zookeeper状态 --------------"</span><br><span class="line">                echo "------------ $host zookeeper -----------"</span><br><span class="line">                ssh $host "source /etc/profile &amp;&amp; zkServer.sh status"</span><br><span class="line">        };;</span><br><span class="line">        esac</span><br><span class="line">done</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Zookeeper%EF%BC%89/image-20240721183623130.png" alt="image-20240721183623130"></p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Zookeeper%EF%BC%89/image-20240721183709695.png" alt="image-20240721183709695"></p><h2 id="二、常见问题及解决办法"><a href="#二、常见问题及解决办法" class="headerlink" title="二、常见问题及解决办法"></a>二、常见问题及解决办法</h2></li><li><p>端口被占用</p><p>错误提示：Address already in use</p><p>解决办法：一方面，可以选择停止掉现在占用端口的进程，使用命令netstat -nltp 并结合命令grep进行查询；另一方面，可以修改zoo.cfg，改变端口号</p></li><li><p>磁盘空间不够</p><p>错误提示：No space left on device</p><p>解决办法：清磁盘或者磁盘</p></li><li><p>无法找到myid文件</p><p>错误提示：myid file is missing</p><p>解决办法：在dataDir对应的目录中创建myid文件，并设置正确的内容（服务器对应的id）</p></li><li><p>集群中其他机器Leader选举端口未开</p><p>错误提示：Cannot open channel to 2 at election address /xxx.xxx.xxx.xxx:3888</p><p>解决办法：</p><p>检查各服务器防火墙是否关闭，使用命令sudo ufw status</p><p>检查各服务器/etc/hosts中的内容是否一致，是否配置了所有节点的ip</p><p>检查各服务器的时间是一致</p><p>修改各服务器的zoo.cfg，将各自服务器中对应于自己的集群信息中的host修改成0.0.0.0</p><p>比如对示例中的服务器hadoop1，将其zoo.cfg的集群信息修改成</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">server.1=0.0.0.0:2888:3888</span><br><span class="line">server.2=hadoop2:2888:3888</span><br><span class="line">server.3=hadoop3:2888:3888</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Zookeeper&quot;&gt;&lt;a href=&quot;#Zookeeper&quot; class=&quot;headerlink&quot; title=&quot;Zookeeper&quot;&gt;&lt;/a&gt;Zookeeper&lt;/h1&gt;&lt;p&gt;ZooKeeper是一个开源的分布式协调服务，它为分布式应用提供了高效且可靠的分布式</summary>
      
    
    
    
    <category term="大数据集群" scheme="https://want595.github.io/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E9%9B%86%E7%BE%A4/"/>
    
    
  </entry>
  
  <entry>
    <title>完全分布式高可用集群（Hadoop3.3.6）</title>
    <link href="https://want595.github.io/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/"/>
    <id>https://want595.github.io/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/</id>
    <published>2024-07-22T06:56:02.000Z</published>
    <updated>2024-07-22T07:02:00.393Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Hadoop"><a href="#Hadoop" class="headerlink" title="Hadoop"></a>Hadoop</h1><h2 id="零、资源准备"><a href="#零、资源准备" class="headerlink" title="零、资源准备"></a>零、资源准备</h2><ul><li><p>VMware workstation 16</p></li><li><p>CentOS-Stream-9-latest-x86_64-dvd1.iso</p></li><li><p>jdk-8u361-linux-x64.tar.gz</p></li><li><p>Hadoop 3.3.6.tar.gz</p></li></ul><h2 id="一、前置准备"><a href="#一、前置准备" class="headerlink" title="一、前置准备"></a>一、前置准备</h2><ol><li>创建虚拟机</li></ol><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721140358041.png" alt="image-20240721140358041"></p><ol><li>选择典型安装</li></ol><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721140425249.png" alt="image-20240721140425249"></p><p>2）安装来源暂时不指定</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721140440892.png" alt="image-20240721140440892"></p><p>3）操作系统选择Linux</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721140457051.png" alt="image-20240721140457051"></p><p>4）设置虚拟机名称和位置</p><p>注意：位置可以根据自己电脑的使用情况选择相应空闲磁盘</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721140530128.png" alt="image-20240721140530128"></p><p>5）磁盘容量指定</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721140542229.png" alt="image-20240721140542229"></p><p>6）完成新建</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721140552492.png" alt="image-20240721140552492"></p><p>7）虚拟机设置</p><p>注意：配置内存为2G，处理器2个，可根据电脑配置适当增加</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721140625647.png" alt="image-20240721140625647"></p><ol><li><p>安装CentOS</p><p>1）设置CentOS映像文件</p><p>ISO映像选择下载的<strong>CentOS-Stream-9-xxxxxxx.iso</strong></p></li></ol><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721140732879.png" alt="image-20240721140732879"></p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721140702212.png" alt="image-20240721140702212"></p><p>2）启动虚拟机</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721140755596.png" alt="image-20240721140755596"></p><p>3）开始安装</p><p>选择Install CentOS Stream 9进行安装</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721140817699.png" alt="image-20240721140817699"></p><p>4）语言选择中文（或English）</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721140912212.png" alt="image-20240721140912212"></p><p>5）安装前的配置</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721141331991.png" alt="image-20240721141331991"></p><p>① 安装目的地</p><p>默认配置即可</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721141343343.png" alt="image-20240721141343343"></p><p>② 软件选择</p><p>选择Server with GUI，并勾选Performance Tools</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721141402345.png" alt="image-20240721141402345"></p><p>③ 时区</p><p>区域选择亚洲， 城市选择上海</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721141503285.png" alt="image-20240721141503285"></p><p>④ 网络设置</p><p>确保网卡已经打开（左下角可设置主机名，也可以后续设置）</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721141754308.png" alt="image-20240721141754308"></p><p>⑤ 配置root用户密码</p><p>注意勾选“允许root用户使用密码进行SSH登录”，作为练习，密码可以设置简单点，比如123456</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721141617628.png" alt="image-20240721141617628"></p><p>6）等待安装完成后重启系统。</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721141825364.png" alt="image-20240721141825364"></p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721143839541.png" alt="image-20240721143839541"></p><p>7）配置虚拟机SSH远程登录</p><p>① 启动hadoop1</p><p>进入登录界面注册用户</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721143958759.png" alt="image-20240721143958759"></p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721144035001.png" alt="image-20240721144035001"></p><p>打开终端</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721144247390.png" alt="image-20240721144247390"></p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721144300119.png" alt="image-20240721144300119"></p><p>切换到root用户，输入<code>su root</code>命令然后输入密码即可</p><p>②配置虚拟机SSH远程登录</p><p><strong>第一步，检查SSH服务是否安装和启动</strong></p><p>在虚拟机中，分别执行<code>rpm -qa | grep ssh</code>和<code>ps -ef | grep sshd</code>命令，查看当前虚拟机是否安装了SSH服务，以及SSH服务是否启动。</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721144528022.png" alt="image-20240721144528022"></p><p>rpm（英文全拼：redhat package manager） 原本是 Red Hat Linux 发行版专门用来管理 Linux 各项套件的程序，由于它遵循 GPL 规则且功能强大方便，因而广受欢迎。逐渐受到其他发行版的采用。RPM 套件管理方式的出现，让 Linux 易于安装，升级，间接提升了 Linux 的适用度。</p><p>ps （英文全拼：process status）命令用于显示当前进程的状态，类似于 windows 的任务管理器。</p><p>grep (global regular expression) 命令用于查找文件里符合条件的字符串或正则表达式。该命令用于查找内容包含指定的范本样式的文件，如果发现某文件的内容符合所指定的范本样式，预设 grep 指令会把含有范本样式的那一列显示出来。若不指定任何文件名称，或是所给予的文件名为 -，则 grep 指令会从标准输入设备读取数据。</p><p>如果没有安装，可以使用以下命令进行安装</p><p><code>yum install openssh-server openssh-clients</code></p><p><strong>第二步，修改SSH服务配置文件</strong></p><p>默认情况下，CentOS Stream 9不允许用户root进行远程登录，在虚拟机hadoop1中执行<code>vi /etc/ssh/sshd_config</code>命令编辑配置文件sshd_config。将PermitRootLogin修改为yes</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721145123672.png" alt="image-20240721145123672"></p><blockquote><p>对于小白，这里介绍下vi命令的简单使用方式：使用vi命令打开文件后，输入字母i进入插入模式 =&gt; 修改相应的文件内容 =&gt; 按Esc键进入命令行模式 =&gt; 输入:进入底行模式 =&gt; 输入x或者wq保存退出。</p><p>如果文件修改后不想保存，进行底行模式后输入q!进行不保存退出。</p></blockquote><p><strong>第三步， 重启SSH服务</strong></p><p><code>systemctl restart sshd</code></p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721145430440.png" alt="image-20240721145430440"></p><ol><li><p>克隆主机<br>1）关闭hadoop1<br>在终端使用命令<code>shutdown -h now</code>关闭hadoop1或直接关机</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721145558170.png" alt="image-20240721145558170"></p><p>2）克隆虚拟机<br>克隆虚拟机hadoop1、hadoop2、hadoop3，以hadoop1为例</p></li></ol><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721145846715.png" alt="image-20240721145846715"></p><p>完整克隆的虚拟机是通过复制原虚拟机创建完全独立的新虚拟机，不和原虚拟机共享任何资源，可以脱离原虚拟机独立使用。</p><p>链接克隆的虚拟机需要和原虚拟机共享同一个虚拟磁盘文件，不能脱离原虚拟机独立运行。</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721145940932.png" alt="image-20240721145940932"></p><p>克隆hadoop1</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721150101913.png" alt="image-20240721150101913"></p><p>克隆hadoop2（同理）</p><p>克隆hadoop3（同理）</p><ol><li><p>网络设置</p><p>网络整体规划如下：</p></li></ol><div class="table-container"><table><thead><tr><th>虚拟机名</th><th>主机名</th><th>IP</th></tr></thead><tbody><tr><td>hadoop1</td><td>hadoop1</td><td>192.168.121.160</td></tr><tr><td>hadoop2</td><td>hadoop2</td><td>192.168.121.161</td></tr><tr><td>hadoop3</td><td>hadoop3</td><td>192.168.121.162</td></tr></tbody></table></div><p>1）配置VMware Workstation网络</p><p>在VMware Workstation主界面，依次单击“编辑”→“虚拟网络编辑器…”选项，配置VMware Workstation网络。</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721150948899.png" alt="image-20240721150948899"></p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721151031381.png" alt="image-20240721151031381"></p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721151059435.png" alt="image-20240721151059435"></p><p>2）配置静态IP</p><p>以hadoop1主机为例，类似配置hadoop2、 hadoop3（所有命令三台机器都要测试）</p><p>编辑配置文件（先切换到root用户）</p><p><code>vi /etc/NetworkManager/system-connections/ens160.nmconnection</code></p><p>注意每台机器的address不同，第一台是address1，ip是192.168.121.160，另两台分别是161和162</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">method=manual</span><br><span class="line">address1=192.168.121.160/24,192.168.121.2</span><br><span class="line">dns=114.114.114.114</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721151618354.png" alt="image-20240721151618354"></p><p>修改uuid（只需要修改hadoop2、 hadoop3主机）</p><p>uuid的作用是使分布式系统中的所有元素都有唯一的标识码。</p><p><code>sed -i '/uuid=/c\uuid='</code>uuidgen<code>'' /etc/NetworkManager/system-connections/ens160.nmconnection</code></p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721152046968.png" alt="image-20240721152046968"></p><p>重启ens33网卡和重新加载网络配置文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nmcli c reload</span><br><span class="line">nmcli c up ens160</span><br></pre></td></tr></table></figure><p>查看网络信息</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip a</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721152242800.png" alt="image-20240721152242800"></p><p>检测网络</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping www.baidu.com</span><br></pre></td></tr></table></figure><p>请ping百度（下图可省略）</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721152337109.png" alt="image-20240721152337109"></p><p>输入ctrl+c退出检测</p><p>3）主机名</p><p>执行命令后需要重新打开终端，才会更新主机名</p><p>配置hadoop2主机名</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hostnamectl set-hostname hadoop2</span><br></pre></td></tr></table></figure><p>配置hadoop3主机名</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hostnamectl set-hostname hadoop3</span><br></pre></td></tr></table></figure><p>4）配置虚拟机SSH远程登录</p><p>配置finalshell，需下载该软件</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721155152496.png" alt="image-20240721155152496"></p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721155248780.png" alt="image-20240721155248780"></p><p>5）修改映射文件</p><p>在虚拟机hadoop1主机执行<code>vi /etc/hosts</code>命令编辑映射文件hosts，在配置文件中添加如下内容。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">192.168.121.160 hadoop1</span><br><span class="line">192.168.121.161 hadoop2</span><br><span class="line">192.168.121.162 hadoop3</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721154244276.png" alt="image-20240721154244276"></p><p>在虚拟机hadoop1主机执行如下命令，拷贝配置到hadoop2, hadoop3</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scp /etc/hosts root@hadoop2:/etc/hosts</span><br><span class="line">scp /etc/hosts root@hadoop3:/etc/hosts</span><br></pre></td></tr></table></figure><p>需要输入hadoop2和hadoop3的管理员密码，即123456</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721154353364.png" alt="image-20240721154353364"></p><ol><li><p>关闭防火墙</p><p>关闭虚拟机hadoop1、hadoop2和hadoop3的防火墙，分别在3台虚拟机中运行如下命令关闭防火墙并禁止防火墙开启启动</p><p>关闭防火墙<code>systemctl stop firewalld</code></p><p>禁止防火墙开机启动<code>systemctl disable firewalld</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld</span><br><span class="line">systemctl disable firewalld</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721154503838.png" alt="image-20240721154503838"></p></li><li><p>免密登录<br>在集群环境中，主节点需要频繁的访问从节点，以获取从节点的运行状态，主节点每次访问从节点时都需要通过输入密码的方式进行验证，确定密码输入正确后才建立连接，这会对集群运行的连续性造成不良影响，为主节点配置SSH免密登录功能，可以有效避免访问从节点时频繁输入密码。接下来，虚拟机hadoop1作为集群环境的主节点实现SSH免密登录。</p><p>SSH免密登录原理（原理：非对称加密算法：公钥加密（给别人）、私钥解密给自己）</p></li></ol><p>1）生成密钥</p><p>在虚拟机hadoop1中执行<code>ssh-keygen -t rsa</code>命令，生成密钥。（输入命令后一直按回车键即可）</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721155442688.png" alt="image-20240721155442688"></p><p>查看秘钥文件</p><p>在虚拟机hadoop1中执行<code>ll /root/.ssh</code>命令查看密钥文件。</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721155539388.png" alt="image-20240721155539388"></p><p>2）复制公钥文件</p><p>将虚拟机hadoop1生成的公钥文件复制到集群中相关联的所有虚拟机，实现通过虚拟机hadoop1可以免密登录虚拟机hadoop1、hadoop2和hadoop3。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ssh-copy-id hadoop1</span><br><span class="line">ssh-copy-id hadoop2</span><br><span class="line">ssh-copy-id hadoop3</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721155632699.png" alt="image-20240721155632699"></p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721155932799.png" alt="image-20240721155932799"></p><p>3）测试免密登录</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ssh hadoop1</span><br><span class="line">ssh hadoop2</span><br><span class="line">ssh hadoop3</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721155808525.png" alt="image-20240721155808525"></p><ol><li><p>安装jdk</p><p><strong>约定：软件安装包存放于/software，软件安装至/opt</strong></p></li></ol><p>1）创建目录</p><p>在虚拟机hadoop1中执行<code>mkdir /software</code></p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721160154170.png" alt="image-20240721160154170"></p><p>2）上传jdk</p><p>利用finalshell将jdk-8u361-linux-x64.tar.gz上传至hadoop1的/software目录（直接拖进去即可）</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721160331623.png" alt="image-20240721160331623"></p><p>3）解压jdk并设置软链接</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /software</span><br><span class="line">tar -xvf jdk-8u361-linux-x64.tar.gz -C /opt</span><br><span class="line">ln -s /opt/jdk1.8.0_361 /opt/jdk</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721161306342.png" alt="image-20240721161306342"></p><p>4）配置jdk系统环境变量</p><p>在虚拟机hadoop1执行<code>vi /etc/profile</code>命令编辑环境变量文件profile，在该文件的底部添加配置jdk系统环境变量的内容。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/opt/jdk</span><br><span class="line">export PATH=$PATH:$JAVA_HOME/bin</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721161425765.png" alt="image-20240721161425765"></p><p>记得执行<code>source /etc/profile</code>重新加载系统环境变量</p><p>5）配置java执行程序的软链接</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 删除系统自带的java程序</span><br><span class="line">rm -f /usr/bin/java</span><br><span class="line"># 软链接我们自己安装的java程序</span><br><span class="line">ln -s /opt/jdk/bin/java /usr/bin/java</span><br></pre></td></tr></table></figure><p>6）验证jdk</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -version</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721161723219.png" alt="image-20240721161723219"></p><p>7）同步文件</p><p>分发jdk安装目录和系统环境变量文件至hadoop2、hadoop3</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">scp -r  /opt/jdk root@hadoop2:/opt</span><br><span class="line">scp  /etc/profile root@hadoop2:/etc</span><br><span class="line">scp -r  /opt/jdk root@hadoop3:/opt</span><br><span class="line">scp  /etc/profile root@hadoop3:/etc</span><br></pre></td></tr></table></figure><h2 id="二、完全分布式部署（Hadoop-MapReduce-Yarn）"><a href="#二、完全分布式部署（Hadoop-MapReduce-Yarn）" class="headerlink" title="二、完全分布式部署（Hadoop+MapReduce+Yarn）"></a>二、完全分布式部署（Hadoop+MapReduce+Yarn）</h2><p>基于完全分布式模式部署Hadoop，需要将Hadoop中HDFS和YARN的相关服务运行在不同的计算机中，我们使用已经部署好的3台虚拟机hadoop1、hadoop2和hadoop3。为了避免在使用过程中造成混淆，先规划HDFS和YARN的相关服务所运行的虚拟机。</p><div class="table-container"><table><thead><tr><th>虚拟机名</th><th>主机名</th><th>IP</th><th>角色</th><th>服务</th></tr></thead><tbody><tr><td>hadoop1</td><td>hadoop1</td><td>192.168.121.160</td><td>master</td><td>NameNode、ResourceManager</td></tr><tr><td>hadoop2</td><td>hadoop2</td><td>192.168.121.161</td><td>workers</td><td>SecondaryNameNode、DataNode、NodeManager</td></tr><tr><td>hadoop3</td><td>hadoop3</td><td>192.168.121.162</td><td>workers</td><td>DataNode、NodeManager</td></tr></tbody></table></div><ol><li><p>安装Hadoop</p><p>利用finalshell将hadoop-3.3.6.tar.gz上传至hadoop1</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721162128929.png" alt="image-20240721162128929"></p><p>1）解压<br>以解压方式安装Hadoop，将Hadoop安装到虚拟机hadoop1的/opt目录，并设置软链接</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar -xvf /software/hadoop-3.3.6.tar.gz -C /opt</span><br><span class="line">ln -s /opt/hadoop-3.3.6 /opt/hadoop</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721162529355.png" alt="image-20240721162529355"></p><p>2）配置环境变量<br>在hadoop1执行<code>vi /etc/profile</code>命令配置系统环境变量，在该文件的底部添加如下内容。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export HADOOP_HOME=/opt/hadoop</span><br><span class="line">export PATH=$PATH:$HADOOP_HOME/bin:$HADOOP_HOME/sbin</span><br></pre></td></tr></table></figure></li></ol><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721162651011.png" alt="image-20240721162651011"></p><p>​        3)验证</p><p>​        在虚拟机hadoop1的任意目录执行<code>hadoop version</code>命令查看当前虚拟机中Hadoop的版本号。（记得先source）</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721162756797.png" alt="image-20240721162756797"></p><ol><li>修改配置文件</li></ol><div class="table-container"><table><thead><tr><th>配置文件</th><th>功能描述</th></tr></thead><tbody><tr><td>hadoop-env.sh</td><td>配置Hadoop运行时的环境，确保HDFS能够正常运行NameNode、SecondaryNameNode和DataNode服务</td></tr><tr><td>yarn-env.sh</td><td>配置YARN运行时的环境，确保YARN能够正常运行ResourceManager和NodeManager服务</td></tr><tr><td>core-site.sh</td><td>Hadoop核心配置文件</td></tr><tr><td>hdfs-site.xml</td><td>HDFS核心配置文件</td></tr><tr><td>mapred-site.xml</td><td>MapReduce核心配置文件</td></tr><tr><td>yarn-site.xml</td><td>YARN核心配置文件</td></tr><tr><td>workers</td><td>控制从节点所运行的服务器</td></tr></tbody></table></div><p>  1）配置Hadoop运行时环境<br>  在Hadoop安装目录<code>/opt/hadoop/etc/hadoop/</code>目录，执行<code>vi hadoop-env.sh</code>命令，在<code>hadoop-env.sh</code>文件的底部添加如下内容。</p><ul><li><p>指定Hadoop使用的jdk</p></li><li><p>指定管理NameNode、DataNode等服务的用户为root</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/opt/jdk</span><br><span class="line">export HDFS_NAMENODE_USER=root</span><br><span class="line">export HDFS_DATANODE_USER=root</span><br><span class="line">export HDFS_SECONDARYNAMENODE_USER=root</span><br><span class="line">export YARN_RESOURCEMANAGER_USER=root</span><br><span class="line">export YARN_NODEMANAGER_USER=root</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721163417683.png" alt="image-20240721163417683"></p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721163503167.png" alt="image-20240721163503167"></p></li></ul><p>2）配置hadoop</p><p>在Hadoop安装目录<code>/opt/hadoop/etc/hadoop/</code>目录，执行<code>vi core-site.xml</code>命令，在<code>core-site.xml</code>文件中添加如下内容。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;property&gt;</span><br><span class="line">    &lt;name&gt;fs.defaultFS&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;hdfs://hadoop1:9000&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">    &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;/opt/data/hadoop-3.3.6&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">   &lt;name&gt;hadoop.http.staticuser.user&lt;/name&gt;</span><br><span class="line">   &lt;value&gt;root&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">    &lt;name&gt;hadoop.proxyuser.root.hosts&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;*&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">    &lt;name&gt;hadoop.proxyuser.root.groups&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;*&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">    &lt;name&gt;fs.trash.interval&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;1440&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br></pre></td></tr></table></figure><p><strong>注意：上面的配置项要配置到<configuration>标签中，后面的配置项类似</configuration></strong></p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721163837014.png" alt="image-20240721163837014"></p><blockquote><p>配置项：</p><p>fs.defaultFS：指定HDFS的通信地址</p><p>hadoop.tmp.dir：指定Hadoop临时数据的存储目录</p><p>hadoop.http.staticuser.user：指定通过Web UI访问HDFS的用户root</p><p>hadoop.proxyuser.root.hosts：允许任何服务器的root用户可以向Hadoop提交任务</p><p>hadoop.proxyuser.root.groups：允许任何用户组的root用户可以向Hadoop提交任务</p><p>fs.trash.interval：指定HDFS中被删除文件的存活时长为1440秒</p><p>更多参数请参考官网：<a href="https://hadoop.apache.org/docs/r3.3.6/hadoop-project-dist/hadoop-common/core-default.xml">https://hadoop.apache.org/docs/r3.3.6/hadoop-project-dist/hadoop-common/core-default.xml</a></p></blockquote><p>3）配置HDFS</p><p>在Hadoop安装目录<code>/opt/hadoop/etc/hadoop/</code>目录，执行<code>vi hdfs-site.xml</code>命令，在<code>hdfs-site.xml</code>文件中添加如下内容。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;property&gt;</span><br><span class="line">    &lt;name&gt;dfs.replication&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;2&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">    &lt;name&gt;dfs.namenode.secondary.http-address&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;hadoop2:9868&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721164003470.png" alt="image-20240721164003470"></p><blockquote><p>配置项：</p><p>dfs.replication：指定数据副本个数</p><p>dfs.namenode.secondary.http-address：指定SecondaryNameNode服务的通信地址</p></blockquote><p>更多参数请参考官网：<a href="https://hadoop.apache.org/docs/r3.3.6/hadoop-project-dist/hadoop-hdfs/hdfs-default.xml">https://hadoop.apache.org/docs/r3.3.6/hadoop-project-dist/hadoop-hdfs/hdfs-default.xml</a></p><p>4）配置MapReduce</p><p>在Hadoop安装目录<code>/opt/hadoop/etc/hadoop/</code>目录，执行<code>vi mapred-site.xml</code>命令，在<code>mapred-site.xml</code>文件中添加如下内容。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;property&gt;</span><br><span class="line">    &lt;name&gt;mapreduce.framework.name&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;yarn&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">    &lt;name&gt;mapreduce.job.ubertask.enable&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;true&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">    &lt;name&gt;mapreduce.jobhistory.address&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;hadoop1:10020&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">    &lt;name&gt;mapreduce.jobhistory.webapp.address&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;hadoop1:19888&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">    &lt;name&gt;yarn.app.mapreduce.am.env&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;HADOOP_MAPRED_HOME=${HADOOP_HOME}&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">    &lt;name&gt;mapreduce.map.env&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;HADOOP_MAPRED_HOME=${HADOOP_HOME}&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">    &lt;name&gt;mapreduce.reduce.env&lt;/name&gt;</span><br><span class="line"> &lt;value&gt;HADOOP_MAPRED_HOME=${HADOOP_HOME}&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721164135151.png" alt="image-20240721164135151"></p><blockquote><p>配置项：</p><p>mapreduce.framework.name：MapReduce的执行模式，默认是本地模式，另外可以设置成classic(采用MapReduce1.0模式运行) 或 yarn（基于YARN框架运行）.</p><p>mapreduce.job.ubertask.enable：是否允许开启uber模式，开启后，小作业会在一个JVM上顺序运行，而不需要额外申请资源</p><p>mapreduce.jobhistory.address：指定MapReduce历史服务的通信地址</p><p>mapreduce.jobhistory.webapp.address：指定通过Web UI访问MapReduce历史服务的地址</p><p>yarn.app.mapreduce.am.env：指定MapReduce任务的运行环境</p><p>mapreduce.map.env：指定MapReduce任务中Map阶段的运行环境</p><p>mapreduce.reduce.env：指定MapReduce任务中Reduce阶段的运行环境</p><p>更多参数请参考官网：<a href="https://hadoop.apache.org/docs/r3.3.6/hadoop-mapreduce-client/hadoop-mapreduce-client-core/mapred-default.xml">https://hadoop.apache.org/docs/r3.3.6/hadoop-mapreduce-client/hadoop-mapreduce-client-core/mapred-default.xml</a></p></blockquote><p>5）配置YARN</p><p>在Hadoop安装目录<code>/opt/hadoop/etc/hadoop/</code>目录，执行<code>vi yarn-site.xml</code>命令，在<code>yarn-site.xml</code>文件中添加如下内容。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;property&gt;</span><br><span class="line">    &lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;hadoop1&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">    &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;mapreduce_shuffle&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">    &lt;name&gt;yarn.nodemanager.pmem-check-enabled&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;false&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">    &lt;name&gt;yarn.nodemanager.vmem-check-enabled&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;false&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">    &lt;name&gt;yarn.log-aggregation-enable&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;true&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">    &lt;name&gt;yarn.log.server.url&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;http://hadoop1:19888/jobhistory/logs&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">    &lt;name&gt;yarn.log-aggregation.retain-seconds&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;604800&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721164518066.png" alt="image-20240721164518066"></p><blockquote><p>配置项：</p><p>yarn.resourcemanager.hostname：指定ResourceManager服务运行的主机</p><p>yarn.nodemanager.aux-services：指定NodeManager运行的附属服务</p><p>yarn.nodemanager.pmem-check-enabled：指定是否启动检测每个任务使用的物理内存</p><p>yarn.nodemanager.vmem-check-enabled：指定是否启动检测每个任务使用的虚拟内存</p><p>yarn.log-aggregation-enable：指定是否开启日志聚合功能</p><p>yarn.log.server.url：指定日志聚合的服务器</p><p>yarn.log-aggregation.retain-seconds：指定日志聚合后日志保存的时间</p><p>更多参数请参考官网：<a href="https://hadoop.apache.org/docs/r3.3.6/hadoop-yarn/hadoop-yarn-common/yarn-default.xml">https://hadoop.apache.org/docs/r3.3.6/hadoop-yarn/hadoop-yarn-common/yarn-default.xml</a></p></blockquote><p>6）配置workers</p><p>在虚拟机hadoop1的<code>/opt/hadoop/etc/hadoop/</code>目录，执行<code>vi workers</code>命令，将<code>workers</code>文件默认的内容修改为如下内容。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hadoop2</span><br><span class="line">hadoop3</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721164720509.png" alt="image-20240721164720509"></p><ol><li><p>同步文件</p><p>使用scp命令将虚拟机hadoop1的Hadoop安装目录分发至虚拟机hadoop2和hadoop3中存放安装程序的目录。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">scp -r /opt/hadoop root@hadoop2:/opt</span><br><span class="line">scp -r /opt/hadoop root@hadoop3:/opt</span><br><span class="line">scp /etc/profile root@hadoop2:/etc</span><br><span class="line">scp /etc/profile root@hadoop3:/etc</span><br></pre></td></tr></table></figure></li><li><p>格式化<br>在虚拟机hadoop1执行<code>hdfs namenode -format</code>命令，对基于完全分布式模式部署的Hadoop进行格式化HDFS文件系统的操作。</p><p><strong>注意：格式化HDFS文件系统的操作只在初次启动Hadoop集群之前进行。</strong></p></li><li><p>启动</p><p>在虚拟机hadoop1中执行命令启动Hadoop</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">start-dfs.sh</span><br><span class="line">start-yarn.sh</span><br></pre></td></tr></table></figure></li><li><p>检测<br>1）jps查看进程<br>HDFS和YARN的相关服务运行在JVM进程中，可以执行jps命令查看当前虚拟机中运行的JVM进程。</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721170644728.png" alt="image-20240721170644728"></p><p>2）Web UI<br>① 在本地计算机的浏览器输入<a href="http://192.168.121.160:9870查看HDFS的运行状态。">http://192.168.121.160:9870查看HDFS的运行状态。</a></p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721170716782.png" alt="image-20240721170716782"></p><p>② 在本地计算机的浏览器输入<a href="http://192.168.121.160:8088查看YARN的运行状态。">http://192.168.121.160:8088查看YARN的运行状态。</a></p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721170737956.png" alt="image-20240721170737956"></p><p>如果希望在本地计算机上使用 <a href="http://hadoop1:9870和http://hadoop1:8088查看Hadoop运行状态">http://hadoop1:9870和http://hadoop1:8088查看Hadoop运行状态</a>, 需要配置本机的hosts文件<code>C:\Windows\System32\drivers\etc\hosts</code>, 添加如下内容即可</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">192.168.121.160 hadoop1</span><br><span class="line">192.168.121.161 hadoop2</span><br><span class="line">192.168.121.162 hadoop3</span><br></pre></td></tr></table></figure></li></ol><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721153942607.png" alt="image-20240721153942607"></p><ol><li><p>Hadoop启动服务总结</p><p>下面就Hadoop的服务启动进行简单的总结:</p><p>1）整体启动和关闭</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">start-all.sh</span><br><span class="line">stop-all.sh</span><br></pre></td></tr></table></figure><p>2）各个服务组件逐一启动/停止</p><p>（1）分别启动/停止HDFS组件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">hdfs --daemon start namenode</span><br><span class="line">hdfs --daemon start datanode</span><br><span class="line">hdfs --daemon start secondarynamenode</span><br><span class="line">hdfs --daemon stop namenode</span><br><span class="line">hdfs --daemon stop datanode</span><br><span class="line">hdfs --daemon stop secondarynamenode</span><br></pre></td></tr></table></figure><p>（2）分别启动/停止YARN组件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yarn --daemon  start resourcemanager</span><br><span class="line">yarn --daemon  start nodemanager</span><br><span class="line">yarn --daemon  stop resourcemanager</span><br><span class="line">yarn --daemon  stop nodemanager</span><br></pre></td></tr></table></figure><p>3） 各个模块分开启动/停止</p><p>（1）整体启动/停止HDFS</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">start-dfs.sh</span><br><span class="line">stop-dfs.sh</span><br></pre></td></tr></table></figure><p>（2）整体启动/停止YARN</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">start-yarn.sh </span><br><span class="line">stop-yarn.sh</span><br></pre></td></tr></table></figure></li><li><p>常见错误及解决办法</p><p>1）出现<code>command not found</code>错误</p><p>检查<code>/etc/profile</code>文件中是否配置了正确的PATH</p><p>如果<code>/etc/profile</code>设置正确，是否没有执行<code>source /etc/profile</code>使环境变量生效</p></li></ol><p>2）所有命令都不能运行</p><p>如果你发现不止安装的程序命令，就连原系统的内置命令都使用不了（比如ls、vi、cat等），很明显，你在修改/etc/profile时，将PATH路径设置错了。最常见的是错误就是在设置PATH时，PATH=<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="8.255ex" height="1.62ex" role="img" focusable="false" viewbox="0 -716 3648.8 716"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z"/></g><g data-mml-node="mi" transform="translate(751,0)"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"/></g><g data-mml-node="mi" transform="translate(1501,0)"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g><g data-mml-node="mi" transform="translate(2205,0)"><path data-c="1D43B" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 219 683Q260 681 355 681Q389 681 418 681T463 682T483 682Q499 682 499 672Q499 670 497 658Q492 641 487 638H485Q483 638 480 638T473 638T464 637T455 637Q416 636 405 634T387 623Q384 619 355 500Q348 474 340 442T328 395L324 380Q324 378 469 378H614L615 381Q615 384 646 504Q674 619 674 627T617 637Q594 637 587 639T580 648Q580 650 582 660Q586 677 588 679T604 682Q609 682 646 681T740 680Q802 680 835 681T871 682Q888 682 888 672Q888 645 876 638H874Q872 638 869 638T862 638T853 637T844 637Q805 636 794 634T776 623Q773 618 704 340T634 58Q634 51 638 51Q646 48 692 46H723Q729 38 729 37T726 19Q722 6 716 0H701Q664 2 567 2Q533 2 504 2T458 2T437 1Q420 1 420 10Q420 15 423 24Q428 43 433 45Q437 46 448 46H454Q481 46 514 49Q520 50 522 50T528 55T534 64T540 82T547 110T558 153Q565 181 569 198Q602 330 602 331T457 332H312L279 197Q245 63 245 58Q245 51 253 49T303 46H334Q340 38 340 37T337 19Q333 6 327 0H312Q275 2 178 2Q144 2 115 2T69 2T48 1Q31 1 31 10Q31 12 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"/></g><g data-mml-node="mo" transform="translate(3370.8,0)"><path data-c="3A" d="M78 370Q78 394 95 412T138 430Q162 430 180 414T199 371Q199 346 182 328T139 310T96 327T78 370ZM78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"/></g></g></g></svg></mjx-container>HADOOP_HOME/bin:<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="27.751ex" height="2.262ex" role="img" focusable="false" viewbox="0 -750 12265.9 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D43B" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 219 683Q260 681 355 681Q389 681 418 681T463 682T483 682Q499 682 499 672Q499 670 497 658Q492 641 487 638H485Q483 638 480 638T473 638T464 637T455 637Q416 636 405 634T387 623Q384 619 355 500Q348 474 340 442T328 395L324 380Q324 378 469 378H614L615 381Q615 384 646 504Q674 619 674 627T617 637Q594 637 587 639T580 648Q580 650 582 660Q586 677 588 679T604 682Q609 682 646 681T740 680Q802 680 835 681T871 682Q888 682 888 672Q888 645 876 638H874Q872 638 869 638T862 638T853 637T844 637Q805 636 794 634T776 623Q773 618 704 340T634 58Q634 51 638 51Q646 48 692 46H723Q729 38 729 37T726 19Q722 6 716 0H701Q664 2 567 2Q533 2 504 2T458 2T437 1Q420 1 420 10Q420 15 423 24Q428 43 433 45Q437 46 448 46H454Q481 46 514 49Q520 50 522 50T528 55T534 64T540 82T547 110T558 153Q565 181 569 198Q602 330 602 331T457 332H312L279 197Q245 63 245 58Q245 51 253 49T303 46H334Q340 38 340 37T337 19Q333 6 327 0H312Q275 2 178 2Q144 2 115 2T69 2T48 1Q31 1 31 10Q31 12 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"/></g><g data-mml-node="mi" transform="translate(888,0)"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"/></g><g data-mml-node="mi" transform="translate(1638,0)"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"/></g><g data-mml-node="mi" transform="translate(2466,0)"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"/></g><g data-mml-node="mi" transform="translate(3229,0)"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"/></g><g data-mml-node="msub" transform="translate(3992,0)"><g data-mml-node="mi"><path data-c="1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z"/></g><g data-mml-node="mi" transform="translate(675,-150) scale(0.707)"><path data-c="1D43B" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 219 683Q260 681 355 681Q389 681 418 681T463 682T483 682Q499 682 499 672Q499 670 497 658Q492 641 487 638H485Q483 638 480 638T473 638T464 637T455 637Q416 636 405 634T387 623Q384 619 355 500Q348 474 340 442T328 395L324 380Q324 378 469 378H614L615 381Q615 384 646 504Q674 619 674 627T617 637Q594 637 587 639T580 648Q580 650 582 660Q586 677 588 679T604 682Q609 682 646 681T740 680Q802 680 835 681T871 682Q888 682 888 672Q888 645 876 638H874Q872 638 869 638T862 638T853 637T844 637Q805 636 794 634T776 623Q773 618 704 340T634 58Q634 51 638 51Q646 48 692 46H723Q729 38 729 37T726 19Q722 6 716 0H701Q664 2 567 2Q533 2 504 2T458 2T437 1Q420 1 420 10Q420 15 423 24Q428 43 433 45Q437 46 448 46H454Q481 46 514 49Q520 50 522 50T528 55T534 64T540 82T547 110T558 153Q565 181 569 198Q602 330 602 331T457 332H312L279 197Q245 63 245 58Q245 51 253 49T303 46H334Q340 38 340 37T337 19Q333 6 327 0H312Q275 2 178 2Q144 2 115 2T69 2T48 1Q31 1 31 10Q31 12 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"/></g></g><g data-mml-node="mi" transform="translate(5344.9,0)"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"/></g><g data-mml-node="mi" transform="translate(6107.9,0)"><path data-c="1D440" d="M289 629Q289 635 232 637Q208 637 201 638T194 648Q194 649 196 659Q197 662 198 666T199 671T201 676T203 679T207 681T212 683T220 683T232 684Q238 684 262 684T307 683Q386 683 398 683T414 678Q415 674 451 396L487 117L510 154Q534 190 574 254T662 394Q837 673 839 675Q840 676 842 678T846 681L852 683H948Q965 683 988 683T1017 684Q1051 684 1051 673Q1051 668 1048 656T1045 643Q1041 637 1008 637Q968 636 957 634T939 623Q936 618 867 340T797 59Q797 55 798 54T805 50T822 48T855 46H886Q892 37 892 35Q892 19 885 5Q880 0 869 0Q864 0 828 1T736 2Q675 2 644 2T609 1Q592 1 592 11Q592 13 594 25Q598 41 602 43T625 46Q652 46 685 49Q699 52 704 61Q706 65 742 207T813 490T848 631L654 322Q458 10 453 5Q451 4 449 3Q444 0 433 0Q418 0 415 7Q413 11 374 317L335 624L267 354Q200 88 200 79Q206 46 272 46H282Q288 41 289 37T286 19Q282 3 278 1Q274 0 267 0Q265 0 255 0T221 1T157 2Q127 2 95 1T58 0Q43 0 39 2T35 11Q35 13 38 25T43 40Q45 46 65 46Q135 46 154 86Q158 92 223 354T289 629Z"/></g><g data-mml-node="mi" transform="translate(7158.9,0)"><path data-c="1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"/></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(7922.9,0)"><g data-mml-node="mo"><path data-c="2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"/></g></g><g data-mml-node="mi" transform="translate(8422.9,0)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"/></g><g data-mml-node="mi" transform="translate(8891.9,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"/></g><g data-mml-node="mi" transform="translate(9320.9,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(9665.9,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(10265.9,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">，</text></g><g data-mml-node="mi" transform="translate(11265.9,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">把</text></g></g></g></svg></mjx-container>PATH:漏掉了，这就相当于现在的PATH路径只有两个值<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="24.427ex" height="2.262ex" role="img" focusable="false" viewbox="0 -750 10796.9 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D43B" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 219 683Q260 681 355 681Q389 681 418 681T463 682T483 682Q499 682 499 672Q499 670 497 658Q492 641 487 638H485Q483 638 480 638T473 638T464 637T455 637Q416 636 405 634T387 623Q384 619 355 500Q348 474 340 442T328 395L324 380Q324 378 469 378H614L615 381Q615 384 646 504Q674 619 674 627T617 637Q594 637 587 639T580 648Q580 650 582 660Q586 677 588 679T604 682Q609 682 646 681T740 680Q802 680 835 681T871 682Q888 682 888 672Q888 645 876 638H874Q872 638 869 638T862 638T853 637T844 637Q805 636 794 634T776 623Q773 618 704 340T634 58Q634 51 638 51Q646 48 692 46H723Q729 38 729 37T726 19Q722 6 716 0H701Q664 2 567 2Q533 2 504 2T458 2T437 1Q420 1 420 10Q420 15 423 24Q428 43 433 45Q437 46 448 46H454Q481 46 514 49Q520 50 522 50T528 55T534 64T540 82T547 110T558 153Q565 181 569 198Q602 330 602 331T457 332H312L279 197Q245 63 245 58Q245 51 253 49T303 46H334Q340 38 340 37T337 19Q333 6 327 0H312Q275 2 178 2Q144 2 115 2T69 2T48 1Q31 1 31 10Q31 12 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"/></g><g data-mml-node="mi" transform="translate(888,0)"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"/></g><g data-mml-node="mi" transform="translate(1638,0)"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"/></g><g data-mml-node="mi" transform="translate(2466,0)"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"/></g><g data-mml-node="mi" transform="translate(3229,0)"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"/></g><g data-mml-node="msub" transform="translate(3992,0)"><g data-mml-node="mi"><path data-c="1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z"/></g><g data-mml-node="mi" transform="translate(675,-150) scale(0.707)"><path data-c="1D43B" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 219 683Q260 681 355 681Q389 681 418 681T463 682T483 682Q499 682 499 672Q499 670 497 658Q492 641 487 638H485Q483 638 480 638T473 638T464 637T455 637Q416 636 405 634T387 623Q384 619 355 500Q348 474 340 442T328 395L324 380Q324 378 469 378H614L615 381Q615 384 646 504Q674 619 674 627T617 637Q594 637 587 639T580 648Q580 650 582 660Q586 677 588 679T604 682Q609 682 646 681T740 680Q802 680 835 681T871 682Q888 682 888 672Q888 645 876 638H874Q872 638 869 638T862 638T853 637T844 637Q805 636 794 634T776 623Q773 618 704 340T634 58Q634 51 638 51Q646 48 692 46H723Q729 38 729 37T726 19Q722 6 716 0H701Q664 2 567 2Q533 2 504 2T458 2T437 1Q420 1 420 10Q420 15 423 24Q428 43 433 45Q437 46 448 46H454Q481 46 514 49Q520 50 522 50T528 55T534 64T540 82T547 110T558 153Q565 181 569 198Q602 330 602 331T457 332H312L279 197Q245 63 245 58Q245 51 253 49T303 46H334Q340 38 340 37T337 19Q333 6 327 0H312Q275 2 178 2Q144 2 115 2T69 2T48 1Q31 1 31 10Q31 12 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"/></g></g><g data-mml-node="mi" transform="translate(5344.9,0)"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"/></g><g data-mml-node="mi" transform="translate(6107.9,0)"><path data-c="1D440" d="M289 629Q289 635 232 637Q208 637 201 638T194 648Q194 649 196 659Q197 662 198 666T199 671T201 676T203 679T207 681T212 683T220 683T232 684Q238 684 262 684T307 683Q386 683 398 683T414 678Q415 674 451 396L487 117L510 154Q534 190 574 254T662 394Q837 673 839 675Q840 676 842 678T846 681L852 683H948Q965 683 988 683T1017 684Q1051 684 1051 673Q1051 668 1048 656T1045 643Q1041 637 1008 637Q968 636 957 634T939 623Q936 618 867 340T797 59Q797 55 798 54T805 50T822 48T855 46H886Q892 37 892 35Q892 19 885 5Q880 0 869 0Q864 0 828 1T736 2Q675 2 644 2T609 1Q592 1 592 11Q592 13 594 25Q598 41 602 43T625 46Q652 46 685 49Q699 52 704 61Q706 65 742 207T813 490T848 631L654 322Q458 10 453 5Q451 4 449 3Q444 0 433 0Q418 0 415 7Q413 11 374 317L335 624L267 354Q200 88 200 79Q206 46 272 46H282Q288 41 289 37T286 19Q282 3 278 1Q274 0 267 0Q265 0 255 0T221 1T157 2Q127 2 95 1T58 0Q43 0 39 2T35 11Q35 13 38 25T43 40Q45 46 65 46Q135 46 154 86Q158 92 223 354T289 629Z"/></g><g data-mml-node="mi" transform="translate(7158.9,0)"><path data-c="1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"/></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(7922.9,0)"><g data-mml-node="mo"><path data-c="2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"/></g></g><g data-mml-node="mi" transform="translate(8422.9,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"/></g><g data-mml-node="mi" transform="translate(8851.9,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(9196.9,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(9796.9,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">和</text></g></g></g></svg></mjx-container>HADOOP_HOME/sbin。</p><p>解决办法：</p><p>1）恢复默认的PATH路径：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export PATH=/root/.local/bin:/root/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin</span><br></pre></td></tr></table></figure><p>2）使用vi命令修改<code>/etc/profile</code>文件，检查设置PATH的地方是否漏掉了$PATH:</p><p>3）不小心多次格式化</p><p>多次格式化导致DataNode 与 NameNode namespaceID不一致，导致启动HDFS失败，这里告诉最直接暴力的解决办法：</p><p>首先清空<code>$hadoop.tmp.dir</code>这个目录，以本文为例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">stop-all.sh</span><br><span class="line">#本教程配置的hadoop.tmp.dir目录为/home/xiaobai/opt/hadoop/tmp</span><br><span class="line">rm -fr /opt/data/hadoop-3.3.6</span><br></pre></td></tr></table></figure><p>然后重新格式化HDFS即可</p><p>4）NameNode启动不成功</p><p>NameNode没有格式化</p><p>环境变量配置错误</p><p>Ip和hostname绑定失败，需要通过ip a查看ip地址，重新配置/etc/hosts文件，设置正确的ip和hostname</p><p>hostname含有特殊符号如.(符号点)，会被误解析</p><p>5）万能大法</p><p>一切的错误，最好的解决办法是查看日志</p><p>Hadoop的默认日志文件目录在<code>$HADOOP_HOME/logs</code></p><h2 id="三、案例——词频统计"><a href="#三、案例——词频统计" class="headerlink" title="三、案例——词频统计"></a>三、案例——词频统计</h2><p>WordCount示例是大数据计算里的”Hello World”, 它的功能是对输入文件的单词进行统计，输出每个单词的出现次数。</p><ol><li><p>准备数据</p><p>1）创建文本数据</p><p>在hadoop1上使用 vi /opt/data/word.txt命令编辑如下内容：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hello world</span><br><span class="line">hello hadoop</span><br><span class="line">hello hdfs</span><br><span class="line">hello yarn</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721171409897.png" alt="image-20240721171409897"></p><p>2）创建目录</p></li></ol><p>​        在HDFS创建<code>/wordcount/input</code>目录，用于存放文件<code>word.txt</code>。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -mkdir -p /wordcount/input</span><br></pre></td></tr></table></figure><p>​        3）在虚拟机hadoop1执行如下命令将文件word.txt上传到HDFS的/wordcount/input目录。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -put /opt/data/word.txt /wordcount/input</span><br></pre></td></tr></table></figure><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721171651809.png" alt="image-20240721171651809"></p><p>​        4）查看文件是否上传成功</p><p>​        通过HDFS的Web UI（<a href="http://192.168.121.160:9870）查看文件word.txt是否上传成功。">http://192.168.121.160:9870）查看文件word.txt是否上传成功。</a></p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721171631319.png" alt="image-20240721171631319"></p><ol><li><p>运行MapReduce程序</p><p>1）查看示例程序</p><p>进入虚拟机hadoop1的<code>/opt/hadoop/share/hadoop/mapreduce</code>目录，在该目录下执行“ll”命令，查看Hadoop提供的MapReduce程序。</p><p>2）执行程序</p><p>在MapReduce程序所在的目录执行下列命令，统计word.txt中每个单词出现的次数。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop jar hadoop-mapreduce-examples-3.3.6.jar  wordcount /wordcount/input /wordcount/output</span><br></pre></td></tr></table></figure><blockquote><p>hadoop jar：用于指定运行的MapReduce程序；也可以使用yarn jar运行</p><p>wordcount：表示程序名称；</p><p>wordcount/input：表示文件word.txt所在目录；</p><p>wordcount/output：表示统计结果输出的目录</p></blockquote><p>3）MapReduce程序部分运行效果。</p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721171823822.png" alt="image-20240721171823822"></p><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721171833734.png" alt="image-20240721171833734"></p></li><li><p>查看程序运行状态</p><p>MapReduce程序运行过程中，使用浏览器访问YARN的Web UI（<a href="http://192.168.121.160:8088）查看程序的运行状态。">http://192.168.121.160:8088）查看程序的运行状态。</a></p><p>在HDFS的Web UI查看统计结果。</p></li></ol><p><img src="/2024/07/22/%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88Hadoop%EF%BC%89/image-20240721171935340.png" alt="image-20240721171935340"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Hadoop&quot;&gt;&lt;a href=&quot;#Hadoop&quot; class=&quot;headerlink&quot; title=&quot;Hadoop&quot;&gt;&lt;/a&gt;Hadoop&lt;/h1&gt;&lt;h2 id=&quot;零、资源准备&quot;&gt;&lt;a href=&quot;#零、资源准备&quot; class=&quot;headerlink&quot; titl</summary>
      
    
    
    
    <category term="大数据集群" scheme="https://want595.github.io/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E9%9B%86%E7%BE%A4/"/>
    
    
  </entry>
  
  <entry>
    <title>20240613</title>
    <link href="https://want595.github.io/2024/06/13/20240613/"/>
    <id>https://want595.github.io/2024/06/13/20240613/</id>
    <published>2024-06-13T07:16:38.000Z</published>
    <updated>2024-06-13T14:28:36.115Z</updated>
    
    <content type="html"><![CDATA[<p>今天学了高数的<strong>极限、导数、渐近线</strong>，加油！</p><h1 id="对于渐近线"><a href="#对于渐近线" class="headerlink" title="对于渐近线"></a>对于渐近线</h1><ul><li>水平渐近线，求 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="7.076ex" height="1.181ex" role="img" focusable="false" viewbox="0 -511 3127.6 522"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"/></g><g data-mml-node="mo" transform="translate(849.8,0)"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"/></g><g data-mml-node="mi" transform="translate(2127.6,0)"><path data-c="221E" d="M55 217Q55 305 111 373T254 442Q342 442 419 381Q457 350 493 303L507 284L514 294Q618 442 747 442Q833 442 888 374T944 214Q944 128 889 59T743 -11Q657 -11 580 50Q542 81 506 128L492 147L485 137Q381 -11 252 -11Q166 -11 111 57T55 217ZM907 217Q907 285 869 341T761 397Q740 397 720 392T682 378T648 359T619 335T594 310T574 285T559 263T548 246L543 238L574 198Q605 158 622 138T664 94T714 61T765 51Q827 51 867 100T907 217ZM92 214Q92 145 131 89T239 33Q357 33 456 193L425 233Q364 312 334 337Q285 380 233 380Q171 380 132 331T92 214Z"/></g></g></g></svg></mjx-container> 时的极限，极限值即 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.464ex;" xmlns="http://www.w3.org/2000/svg" width="1.109ex" height="1.464ex" role="img" focusable="false" viewbox="0 -442 490 647"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g></g></g></svg></mjx-container> 就是水平渐近线</li><li>竖直渐近线，求 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.452ex;" xmlns="http://www.w3.org/2000/svg" width="20.651ex" height="2.149ex" role="img" focusable="false" viewbox="0 -750 9127.6 950"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"/></g><g data-mml-node="mo" transform="translate(849.8,0)"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"/></g><g data-mml-node="mi" transform="translate(2127.6,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">某</text></g><g data-mml-node="mi" transform="translate(3127.6,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">个</text></g><g data-mml-node="mi" transform="translate(4127.6,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">取</text></g><g data-mml-node="mi" transform="translate(5127.6,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">不</text></g><g data-mml-node="mi" transform="translate(6127.6,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">到</text></g><g data-mml-node="mi" transform="translate(7127.6,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">的</text></g><g data-mml-node="mi" transform="translate(8127.6,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">值</text></g></g></g></svg></mjx-container>，如果该极限等于 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.025ex" role="img" focusable="false" viewbox="0 -442 1000 453"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="221E" d="M55 217Q55 305 111 373T254 442Q342 442 419 381Q457 350 493 303L507 284L514 294Q618 442 747 442Q833 442 888 374T944 214Q944 128 889 59T743 -11Q657 -11 580 50Q542 81 506 128L492 147L485 137Q381 -11 252 -11Q166 -11 111 57T55 217ZM907 217Q907 285 869 341T761 397Q740 397 720 392T682 378T648 359T619 335T594 310T574 285T559 263T548 246L543 238L574 198Q605 158 622 138T664 94T714 61T765 51Q827 51 867 100T907 217ZM92 214Q92 145 131 89T239 33Q357 33 456 193L425 233Q364 312 334 337Q285 380 233 380Q171 380 132 331T92 214Z"/></g></g></g></svg></mjx-container>，则为竖直渐近线，否则不是</li><li>斜渐近线，先求 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -1.601ex;" xmlns="http://www.w3.org/2000/svg" width="9.786ex" height="4.904ex" role="img" focusable="false" viewbox="0 -1460 4325.3 2167.8"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mstyle"><g data-mml-node="munder"><g data-mml-node="mo" transform="translate(214.8,0)"><path data-c="6C" d="M42 46H56Q95 46 103 60V68Q103 77 103 91T103 124T104 167T104 217T104 272T104 329Q104 366 104 407T104 482T104 542T103 586T103 603Q100 622 89 628T44 637H26V660Q26 683 28 683L38 684Q48 685 67 686T104 688Q121 689 141 690T171 693T182 694H185V379Q185 62 186 60Q190 52 198 49Q219 46 247 46H263V0H255L232 1Q209 2 183 2T145 3T107 3T57 1L34 0H26V46H42Z"/><path data-c="69" d="M69 609Q69 637 87 653T131 669Q154 667 171 652T188 609Q188 579 171 564T129 549Q104 549 87 564T69 609ZM247 0Q232 3 143 3Q132 3 106 3T56 1L34 0H26V46H42Q70 46 91 49Q100 53 102 60T104 102V205V293Q104 345 102 359T88 378Q74 385 41 385H30V408Q30 431 32 431L42 432Q52 433 70 434T106 436Q123 437 142 438T171 441T182 442H185V62Q190 52 197 50T232 46H255V0H247Z" transform="translate(278,0)"/><path data-c="6D" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q351 442 364 440T387 434T406 426T421 417T432 406T441 395T448 384T452 374T455 366L457 361L460 365Q463 369 466 373T475 384T488 397T503 410T523 422T546 432T572 439T603 442Q729 442 740 329Q741 322 741 190V104Q741 66 743 59T754 49Q775 46 803 46H819V0H811L788 1Q764 2 737 2T699 3Q596 3 587 0H579V46H595Q656 46 656 62Q657 64 657 200Q656 335 655 343Q649 371 635 385T611 402T585 404Q540 404 506 370Q479 343 472 315T464 232V168V108Q464 78 465 68T468 55T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z" transform="translate(556,0)"/></g><g data-mml-node="TeXAtom" transform="translate(0,-600) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"/></g><g data-mml-node="mo" transform="translate(572,0)"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"/></g><g data-mml-node="mi" transform="translate(1572,0)"><path data-c="221E" d="M55 217Q55 305 111 373T254 442Q342 442 419 381Q457 350 493 303L507 284L514 294Q618 442 747 442Q833 442 888 374T944 214Q944 128 889 59T743 -11Q657 -11 580 50Q542 81 506 128L492 147L485 137Q381 -11 252 -11Q166 -11 111 57T55 217ZM907 217Q907 285 869 341T761 397Q740 397 720 392T682 378T648 359T619 335T594 310T574 285T559 263T548 246L543 238L574 198Q605 158 622 138T664 94T714 61T765 51Q827 51 867 100T907 217ZM92 214Q92 145 131 89T239 33Q357 33 456 193L425 233Q364 312 334 337Q285 380 233 380Q171 380 132 331T92 214Z"/></g></g></g><g data-mml-node="mfrac" transform="translate(1985.3,0)"><g data-mml-node="mrow" transform="translate(220,710)"><g data-mml-node="mi"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(550,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(939,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"/></g><g data-mml-node="mo" transform="translate(1511,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g><g data-mml-node="mi" transform="translate(884,-686)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"/></g><rect width="2100" height="60" x="120" y="220"/></g></g></g></g></svg></mjx-container>，该极限为 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="1.179ex" height="1.595ex" role="img" focusable="false" viewbox="0 -694 521 705"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"/></g></g></g></svg></mjx-container> 的值，然后求 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -1.601ex;" xmlns="http://www.w3.org/2000/svg" width="14.029ex" height="3.298ex" role="img" focusable="false" viewbox="0 -750 6200.8 1457.8"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mstyle"><g data-mml-node="munder"><g data-mml-node="mo" transform="translate(214.8,0)"><path data-c="6C" d="M42 46H56Q95 46 103 60V68Q103 77 103 91T103 124T104 167T104 217T104 272T104 329Q104 366 104 407T104 482T104 542T103 586T103 603Q100 622 89 628T44 637H26V660Q26 683 28 683L38 684Q48 685 67 686T104 688Q121 689 141 690T171 693T182 694H185V379Q185 62 186 60Q190 52 198 49Q219 46 247 46H263V0H255L232 1Q209 2 183 2T145 3T107 3T57 1L34 0H26V46H42Z"/><path data-c="69" d="M69 609Q69 637 87 653T131 669Q154 667 171 652T188 609Q188 579 171 564T129 549Q104 549 87 564T69 609ZM247 0Q232 3 143 3Q132 3 106 3T56 1L34 0H26V46H42Q70 46 91 49Q100 53 102 60T104 102V205V293Q104 345 102 359T88 378Q74 385 41 385H30V408Q30 431 32 431L42 432Q52 433 70 434T106 436Q123 437 142 438T171 441T182 442H185V62Q190 52 197 50T232 46H255V0H247Z" transform="translate(278,0)"/><path data-c="6D" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q351 442 364 440T387 434T406 426T421 417T432 406T441 395T448 384T452 374T455 366L457 361L460 365Q463 369 466 373T475 384T488 397T503 410T523 422T546 432T572 439T603 442Q729 442 740 329Q741 322 741 190V104Q741 66 743 59T754 49Q775 46 803 46H819V0H811L788 1Q764 2 737 2T699 3Q596 3 587 0H579V46H595Q656 46 656 62Q657 64 657 200Q656 335 655 343Q649 371 635 385T611 402T585 404Q540 404 506 370Q479 343 472 315T464 232V168V108Q464 78 465 68T468 55T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z" transform="translate(556,0)"/></g><g data-mml-node="TeXAtom" transform="translate(0,-600) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"/></g><g data-mml-node="mo" transform="translate(572,0)"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"/></g><g data-mml-node="mi" transform="translate(1572,0)"><path data-c="221E" d="M55 217Q55 305 111 373T254 442Q342 442 419 381Q457 350 493 303L507 284L514 294Q618 442 747 442Q833 442 888 374T944 214Q944 128 889 59T743 -11Q657 -11 580 50Q542 81 506 128L492 147L485 137Q381 -11 252 -11Q166 -11 111 57T55 217ZM907 217Q907 285 869 341T761 397Q740 397 720 392T682 378T648 359T619 335T594 310T574 285T559 263T548 246L543 238L574 198Q605 158 622 138T664 94T714 61T765 51Q827 51 867 100T907 217ZM92 214Q92 145 131 89T239 33Q357 33 456 193L425 233Q364 312 334 337Q285 380 233 380Q171 380 132 331T92 214Z"/></g></g></g><g data-mml-node="mi" transform="translate(1985.3,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(2535.3,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(2924.3,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"/></g><g data-mml-node="mo" transform="translate(3496.3,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(4107.6,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"/></g><g data-mml-node="mi" transform="translate(5107.8,0)"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"/></g><g data-mml-node="mi" transform="translate(5628.8,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"/></g></g></g></g></svg></mjx-container> 的值，即 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="0.971ex" height="1.595ex" role="img" focusable="false" viewbox="0 -694 429 705"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"/></g></g></g></svg></mjx-container> 的值，渐近线 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.464ex;" xmlns="http://www.w3.org/2000/svg" width="10.335ex" height="2.034ex" role="img" focusable="false" viewbox="0 -694 4568 899"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(767.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mi" transform="translate(1823.6,0)"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"/></g><g data-mml-node="mi" transform="translate(2344.6,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"/></g><g data-mml-node="mo" transform="translate(3138.8,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"/></g><g data-mml-node="mi" transform="translate(4139,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"/></g></g></g></svg></mjx-container></li><li>在同一方向，水平渐近线和斜渐近线不共存</li><li><strong>当 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="7.076ex" height="1.181ex" role="img" focusable="false" viewbox="0 -511 3127.6 522"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"/></g><g data-mml-node="mo" transform="translate(849.8,0)"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"/></g><g data-mml-node="mi" transform="translate(2127.6,0)"><path data-c="221E" d="M55 217Q55 305 111 373T254 442Q342 442 419 381Q457 350 493 303L507 284L514 294Q618 442 747 442Q833 442 888 374T944 214Q944 128 889 59T743 -11Q657 -11 580 50Q542 81 506 128L492 147L485 137Q381 -11 252 -11Q166 -11 111 57T55 217ZM907 217Q907 285 869 341T761 397Q740 397 720 392T682 378T648 359T619 335T594 310T574 285T559 263T548 246L543 238L574 198Q605 158 622 138T664 94T714 61T765 51Q827 51 867 100T907 217ZM92 214Q92 145 131 89T239 33Q357 33 456 193L425 233Q364 312 334 337Q285 380 233 380Q171 380 132 331T92 214Z"/></g></g></g></svg></mjx-container> ，求极限（约分时）注意负号！！</strong></li></ul><h1 id="对于n阶导数"><a href="#对于n阶导数" class="headerlink" title="对于n阶导数"></a>对于n阶导数</h1><ul><li>求n阶导数时，一般都是对数、分数形式，因为分数可以写成指数</li><li>例如 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -1.238ex;" xmlns="http://www.w3.org/2000/svg" width="5.2ex" height="3.195ex" role="img" focusable="false" viewbox="0 -864.9 2298.3 1412"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mfrac"><g data-mml-node="mn" transform="translate(972.4,394) scale(0.707)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"/></g><g data-mml-node="mrow" transform="translate(220,-370.3) scale(0.707)"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mn" transform="translate(389,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"/></g><g data-mml-node="mo" transform="translate(889,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"/></g><g data-mml-node="mi" transform="translate(1667,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"/></g><g data-mml-node="mo" transform="translate(2239,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g><rect width="2058.3" height="60" x="120" y="220"/></g></g></g></svg></mjx-container> 求n阶导数，可以写成 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="9.184ex" height="2.452ex" role="img" focusable="false" viewbox="0 -833.9 4059.1 1083.9"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mn" transform="translate(389,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"/></g><g data-mml-node="mo" transform="translate(1111.2,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"/></g><g data-mml-node="mi" transform="translate(2111.4,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"/></g><g data-mml-node="msup" transform="translate(2683.4,0)"><g data-mml-node="mo"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="TeXAtom" transform="translate(422,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"/></g><g data-mml-node="mn" transform="translate(778,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"/></g></g></g></g></g></svg></mjx-container> ，然后找规律</li><li>遇到复杂的式子，请通分</li></ul><h1 id="对于讨论可导性"><a href="#对于讨论可导性" class="headerlink" title="对于讨论可导性"></a>对于讨论可导性</h1><ul><li>先讨论是否连续，即直接对式子求极限，极限存在且等于函数值就是连续</li><li>再讨论是否可导，这里注意不要直接除以x，要根据导数定义，列出式子</li><li>即<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -1.705ex;" xmlns="http://www.w3.org/2000/svg" width="15.887ex" height="5.008ex" role="img" focusable="false" viewbox="0 -1460 7022.2 2213.5"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mstyle"><g data-mml-node="munder"><g data-mml-node="mo" transform="translate(38.1,0)"><path data-c="6C" d="M42 46H56Q95 46 103 60V68Q103 77 103 91T103 124T104 167T104 217T104 272T104 329Q104 366 104 407T104 482T104 542T103 586T103 603Q100 622 89 628T44 637H26V660Q26 683 28 683L38 684Q48 685 67 686T104 688Q121 689 141 690T171 693T182 694H185V379Q185 62 186 60Q190 52 198 49Q219 46 247 46H263V0H255L232 1Q209 2 183 2T145 3T107 3T57 1L34 0H26V46H42Z"/><path data-c="69" d="M69 609Q69 637 87 653T131 669Q154 667 171 652T188 609Q188 579 171 564T129 549Q104 549 87 564T69 609ZM247 0Q232 3 143 3Q132 3 106 3T56 1L34 0H26V46H42Q70 46 91 49Q100 53 102 60T104 102V205V293Q104 345 102 359T88 378Q74 385 41 385H30V408Q30 431 32 431L42 432Q52 433 70 434T106 436Q123 437 142 438T171 441T182 442H185V62Q190 52 197 50T232 46H255V0H247Z" transform="translate(278,0)"/><path data-c="6D" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q351 442 364 440T387 434T406 426T421 417T432 406T441 395T448 384T452 374T455 366L457 361L460 365Q463 369 466 373T475 384T488 397T503 410T523 422T546 432T572 439T603 442Q729 442 740 329Q741 322 741 190V104Q741 66 743 59T754 49Q775 46 803 46H819V0H811L788 1Q764 2 737 2T699 3Q596 3 587 0H579V46H595Q656 46 656 62Q657 64 657 200Q656 335 655 343Q649 371 635 385T611 402T585 404Q540 404 506 370Q479 343 472 315T464 232V168V108Q464 78 465 68T468 55T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z" transform="translate(556,0)"/></g><g data-mml-node="TeXAtom" transform="translate(0,-637.9) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"/></g><g data-mml-node="mo" transform="translate(572,0)"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"/></g><g data-mml-node="mn" transform="translate(1572,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"/></g></g></g><g data-mml-node="mfrac" transform="translate(1631.8,0)"><g data-mml-node="mrow" transform="translate(220,710)"><g data-mml-node="mi"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(550,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(939,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"/></g><g data-mml-node="mo" transform="translate(1511,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(2122.2,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"/></g><g data-mml-node="mi" transform="translate(3122.4,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(3672.4,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mn" transform="translate(4061.4,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"/></g><g data-mml-node="mo" transform="translate(4561.4,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g><g data-mml-node="mi" transform="translate(2409.2,-686)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"/></g><rect width="5150.4" height="60" x="120" y="220"/></g></g></g></g></svg></mjx-container> 这里的0是讨论可导性的点</li></ul><h1 id="对于微分"><a href="#对于微分" class="headerlink" title="对于微分"></a>对于微分</h1><ul><li>注意在结果后面加上 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="2.471ex" height="1.595ex" role="img" focusable="false" viewbox="0 -694 1092 705"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"/></g><g data-mml-node="mi" transform="translate(520,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"/></g></g></g></svg></mjx-container></li></ul><h1 id="对于间断点"><a href="#对于间断点" class="headerlink" title="对于间断点"></a>对于间断点</h1><ul><li>考虑正负！！</li><li>考虑约分！！</li><li>去绝对值注意正负</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;今天学了高数的&lt;strong&gt;极限、导数、渐近线&lt;/strong&gt;，加油！&lt;/p&gt;
&lt;h1 id=&quot;对于渐近线&quot;&gt;&lt;a href=&quot;#对于渐近线&quot; class=&quot;headerlink&quot; title=&quot;对于渐近线&quot;&gt;&lt;/a&gt;对于渐近线&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;水平渐近线，求</summary>
      
    
    
    
    <category term="【考研日记】" scheme="https://want595.github.io/categories/%E3%80%90%E8%80%83%E7%A0%94%E6%97%A5%E8%AE%B0%E3%80%91/"/>
    
    
  </entry>
  
  <entry>
    <title>文心智能体大赛Top1心得</title>
    <link href="https://want595.github.io/2024/06/07/2024-06-%E6%96%87%E5%BF%83%E6%99%BA%E8%83%BD%E4%BD%93%E5%A4%A7%E8%B5%9BTop1%E5%BF%83%E5%BE%97/"/>
    <id>https://want595.github.io/2024/06/07/2024-06-%E6%96%87%E5%BF%83%E6%99%BA%E8%83%BD%E4%BD%93%E5%A4%A7%E8%B5%9BTop1%E5%BF%83%E5%BE%97/</id>
    <published>2024-06-07T04:00:19.000Z</published>
    <updated>2024-06-07T04:00:40.158Z</updated>
    
    <content type="html"><![CDATA[<p>大家好，我是阿伟，很高兴能够参加“文心智能体”大赛的线上圆桌会。在本次大赛中，我开发了一个恋爱助手智能体，没想到居然获得了第一名的好成绩。今天我想和大家分享一下这个智能体。</p><p>首先就是我们为什么需要智能体呢？</p><p>一方面是现代社会的生活节奏很快，人们的工作压力非常大，没有时间和精力去经营人际关系。此时，AI智能体可以给我们提供精神陪伴，帮助我们缓解生活压力。</p><p>另一方面是每个人的情感需求不同，AI智能体可以通过大数据和深度学习等技术，分析每个人的个性化需求，并提供量身定制的建议。</p><p>我认为智能体就像精神伴侣一样，在我们的生活低谷期、感情困惑期，都可以寻求智能体的陪伴，它会无条件的帮助我们。</p><p>然后就是我为什么要开发恋爱助手呢？</p><p>一方面，我是一名科技自媒体博主，平时会分享一些有趣的项目。我的粉丝群体大部分是在校大学生，我注意到他们喜欢一些和情感有关的项目，所以我想开发一个智能体，帮助粉丝解决恋爱中遇到的问题。</p><p>另一方面，我自己其实也是个大学生，我注意到身边的舍友和同学们缺乏恋爱经验，不善于人际交往，所以我想开发一个智能体，帮助他们模拟恋爱对话场景，锻炼自己的表达能力。</p><p>在开发智能体的时候，我在它的角色设定中添加了一些emoji表情包，并使用markdown语法的星号加以强调，让它在回答问题的时候，可以优先使用各类语气词和表情包，非常的人性化。不管你问它什么，它都会用积极的语气回答你的问题，和它聊天的时候你会感觉非常的愉快。</p><p>同时，我还在指令中调用了文心一格插件，满足了用户的绘图需求。你可以在输入中加入“绘制”、“画画”等提示词，它会调用一格生图工具帮你绘制图像。</p><p>除此之外，你还可以使用“精确”、“准确”等提示词获取到地址、餐厅的具体信息。比如，你可以问他“从苏州站坐地铁到东方之门该怎么坐，可以给我精确的地铁信息吗”，它会调用搜索增强、旅行攻略查询等工具，给你提供精确的信息。</p><p>我的分享到此结束，谢谢大家。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;大家好，我是阿伟，很高兴能够参加“文心智能体”大赛的线上圆桌会。在本次大赛中，我开发了一个恋爱助手智能体，没想到居然获得了第一名的好成绩。今天我想和大家分享一下这个智能体。&lt;/p&gt;
&lt;p&gt;首先就是我们为什么需要智能体呢？&lt;/p&gt;
&lt;p&gt;一方面是现代社会的生活节奏很快，人们的</summary>
      
    
    
    
    
    <category term="智能体" scheme="https://want595.github.io/tags/%E6%99%BA%E8%83%BD%E4%BD%93/"/>
    
  </entry>
  
  <entry>
    <title>C/C++百宝箱（下载链接）</title>
    <link href="https://want595.github.io/2024/06/06/2024-06-C-%E7%99%BE%E5%AE%9D%E7%AE%B1%EF%BC%88%E4%B8%8B%E8%BD%BD%E9%93%BE%E6%8E%A5%EF%BC%89/"/>
    <id>https://want595.github.io/2024/06/06/2024-06-C-%E7%99%BE%E5%AE%9D%E7%AE%B1%EF%BC%88%E4%B8%8B%E8%BD%BD%E9%93%BE%E6%8E%A5%EF%BC%89/</id>
    <published>2024-06-06T12:05:22.000Z</published>
    <updated>2024-06-06T12:09:00.345Z</updated>
    
    <content type="html"><![CDATA[<h1 id="C-C-百宝箱"><a href="#C-C-百宝箱" class="headerlink" title="C/C++百宝箱"></a>C/C++百宝箱</h1><div class="table-container"><table><thead><tr><th>序号</th><th>目录</th><th>下载链接</th></tr></thead><tbody><tr><td>1</td><td>跑马灯</td><td><a href="https://pan.quark.cn/s/485d298b855e">https://pan.quark.cn/s/485d298b855e</a></td></tr><tr><td>2</td><td>圣诞树</td><td><a href="https://pan.quark.cn/s/87afec70dcdc">https://pan.quark.cn/s/87afec70dcdc</a></td></tr><tr><td>3</td><td>爱心</td><td><a href="https://pan.quark.cn/s/fca99f1fa8f6">https://pan.quark.cn/s/fca99f1fa8f6</a></td></tr><tr><td>4</td><td>雪花</td><td><a href="https://pan.quark.cn/s/fef7b7d49686">https://pan.quark.cn/s/fef7b7d49686</a></td></tr><tr><td>5</td><td>鬼怪</td><td><a href="https://pan.quark.cn/s/fd265a049478">https://pan.quark.cn/s/fd265a049478</a></td></tr><tr><td>6</td><td>贪吃蛇</td><td><a href="https://pan.quark.cn/s/eb5fee56ea0a">https://pan.quark.cn/s/eb5fee56ea0a</a></td></tr><tr><td>7</td><td>俄罗斯方块</td><td><a href="https://pan.quark.cn/s/70d18b225305">https://pan.quark.cn/s/70d18b225305</a></td></tr><tr><td>8</td><td>新春烟花</td><td><a href="https://pan.quark.cn/s/f9b6a94df6f1">https://pan.quark.cn/s/f9b6a94df6f1</a></td></tr><tr><td>9</td><td>数字雨</td><td><a href="https://pan.quark.cn/s/52d397bc7811">https://pan.quark.cn/s/52d397bc7811</a></td></tr><tr><td>10</td><td>跳动的爱心</td><td><a href="https://pan.quark.cn/s/1c0c5b4b8543">https://pan.quark.cn/s/1c0c5b4b8543</a></td></tr><tr><td>11</td><td>满屏飘字</td><td><a href="https://pan.quark.cn/s/f5692be2f525">https://pan.quark.cn/s/f5692be2f525</a></td></tr><tr><td>12</td><td></td><td></td></tr><tr><td>13</td><td></td><td></td></tr><tr><td>14</td><td></td><td></td></tr><tr><td>15</td><td></td><td></td></tr><tr><td>16</td><td></td><td></td></tr><tr><td>17</td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td></tr></tbody></table></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;C-C-百宝箱&quot;&gt;&lt;a href=&quot;#C-C-百宝箱&quot; class=&quot;headerlink&quot; title=&quot;C/C++百宝箱&quot;&gt;&lt;/a&gt;C/C++百宝箱&lt;/h1&gt;&lt;div class=&quot;table-container&quot;&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
</summary>
      
    
    
    
    
    <category term="百宝箱" scheme="https://want595.github.io/tags/%E7%99%BE%E5%AE%9D%E7%AE%B1/"/>
    
  </entry>
  
  <entry>
    <title>HTML百宝箱（下载链接）</title>
    <link href="https://want595.github.io/2024/06/06/2024-06-HTML%E7%99%BE%E5%AE%9D%E7%AE%B1%EF%BC%88%E4%B8%8B%E8%BD%BD%E9%93%BE%E6%8E%A5%EF%BC%89/"/>
    <id>https://want595.github.io/2024/06/06/2024-06-HTML%E7%99%BE%E5%AE%9D%E7%AE%B1%EF%BC%88%E4%B8%8B%E8%BD%BD%E9%93%BE%E6%8E%A5%EF%BC%89/</id>
    <published>2024-06-06T11:42:41.000Z</published>
    <updated>2024-06-06T11:51:27.097Z</updated>
    
    <content type="html"><![CDATA[<h1 id="HTML百宝箱（下载链接）"><a href="#HTML百宝箱（下载链接）" class="headerlink" title="HTML百宝箱（下载链接）"></a>HTML百宝箱（下载链接）</h1><div class="table-container"><table><thead><tr><th>序号</th><th>目录</th><th>下载链接</th></tr></thead><tbody><tr><td>1</td><td>圣诞树（2种）</td><td><a href="https://pan.quark.cn/s/71ed27194dcb">https://pan.quark.cn/s/71ed27194dcb</a></td></tr><tr><td>2</td><td>爱心（7种）</td><td><a href="https://pan.quark.cn/s/55a86bf6bed1">https://pan.quark.cn/s/55a86bf6bed1</a></td></tr><tr><td>3</td><td>烟花秀（4种）</td><td><a href="https://pan.quark.cn/s/252ef41fe53d">https://pan.quark.cn/s/252ef41fe53d</a></td></tr><tr><td>4</td><td>雪花（3种）</td><td><a href="https://pan.quark.cn/s/7943c3ab92ba">https://pan.quark.cn/s/7943c3ab92ba</a></td></tr><tr><td>5</td><td>表白</td><td><a href="https://pan.quark.cn/s/26791142a893">https://pan.quark.cn/s/26791142a893</a></td></tr><tr><td>6</td><td>新春</td><td><a href="https://pan.quark.cn/s/47cf35979973">https://pan.quark.cn/s/47cf35979973</a></td></tr><tr><td>7</td><td>旋转相册</td><td><a href="https://pan.quark.cn/s/741cb5799dfa">https://pan.quark.cn/s/741cb5799dfa</a></td></tr><tr><td>8</td><td>飘落花瓣</td><td><a href="https://pan.quark.cn/s/4cfb34624fd3">https://pan.quark.cn/s/4cfb34624fd3</a></td></tr><tr><td>9</td><td>五彩爱心</td><td><a href="https://pan.quark.cn/s/a7c107881cc8">https://pan.quark.cn/s/a7c107881cc8</a></td></tr><tr><td>10</td><td>字母雨</td><td><a href="https://pan.quark.cn/s/b6eee44f405b">https://pan.quark.cn/s/b6eee44f405b</a></td></tr><tr><td>11</td><td>元素周期表</td><td><a href="https://pan.quark.cn/s/11cda3efb8bb">https://pan.quark.cn/s/11cda3efb8bb</a></td></tr><tr><td>12</td><td>3D相册</td><td><a href="https://pan.quark.cn/s/0ea9a0c116be">https://pan.quark.cn/s/0ea9a0c116be</a></td></tr><tr><td>13</td><td>哆啦A梦</td><td><a href="https://pan.quark.cn/s/4e851be37759">https://pan.quark.cn/s/4e851be37759</a></td></tr><tr><td>14</td><td>粒子爱心</td><td><a href="https://pan.quark.cn/s/cb1a9aaea9cf">https://pan.quark.cn/s/cb1a9aaea9cf</a></td></tr><tr><td>15</td><td></td><td></td></tr><tr><td>16</td><td></td><td></td></tr><tr><td>17</td><td></td><td></td></tr><tr><td>18</td><td></td><td></td></tr><tr><td>19</td><td></td><td></td></tr><tr><td>20</td><td></td><td></td></tr><tr><td>21</td><td></td><td></td></tr><tr><td>22</td><td></td><td></td></tr><tr><td>23</td><td></td><td></td></tr><tr><td>24</td><td></td></tr></tbody></table></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;HTML百宝箱（下载链接）&quot;&gt;&lt;a href=&quot;#HTML百宝箱（下载链接）&quot; class=&quot;headerlink&quot; title=&quot;HTML百宝箱（下载链接）&quot;&gt;&lt;/a&gt;HTML百宝箱（下载链接）&lt;/h1&gt;&lt;div class=&quot;table-container&quot;&gt;</summary>
      
    
    
    
    
    <category term="百宝箱" scheme="https://want595.github.io/tags/%E7%99%BE%E5%AE%9D%E7%AE%B1/"/>
    
  </entry>
  
  <entry>
    <title>Python百宝箱（下载链接）</title>
    <link href="https://want595.github.io/2024/06/06/2024-06-Python%E7%99%BE%E5%AE%9D%E7%AE%B1%EF%BC%88%E4%B8%8B%E8%BD%BD%E9%93%BE%E6%8E%A5%EF%BC%89/"/>
    <id>https://want595.github.io/2024/06/06/2024-06-Python%E7%99%BE%E5%AE%9D%E7%AE%B1%EF%BC%88%E4%B8%8B%E8%BD%BD%E9%93%BE%E6%8E%A5%EF%BC%89/</id>
    <published>2024-06-06T11:22:25.000Z</published>
    <updated>2024-06-06T11:43:20.146Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Python百宝箱（下载链接）"><a href="#Python百宝箱（下载链接）" class="headerlink" title="Python百宝箱（下载链接）"></a>Python百宝箱（下载链接）</h1><div class="table-container"><table><thead><tr><th>序号</th><th>目录</th><th>下载链接</th></tr></thead><tbody><tr><td>1</td><td>李峋同款跳动的爱心</td><td><a href="https://pan.quark.cn/s/8fa18983fdab">https://pan.quark.cn/s/8fa18983fdab</a></td></tr><tr><td>2</td><td>流星雨</td><td><a href="https://pan.quark.cn/s/669a56396f45">https://pan.quark.cn/s/669a56396f45</a></td></tr><tr><td>3</td><td>表白代码</td><td><a href="https://pan.quark.cn/s/5cad8953b07e">https://pan.quark.cn/s/5cad8953b07e</a></td></tr><tr><td>4</td><td>玫瑰花</td><td><a href="https://pan.quark.cn/s/f2146734678d">https://pan.quark.cn/s/f2146734678d</a></td></tr><tr><td>5</td><td>万圣节</td><td><a href="https://pan.quark.cn/s/8f3098a0c302">https://pan.quark.cn/s/8f3098a0c302</a></td></tr><tr><td>6</td><td>中秋节</td><td><a href="https://pan.quark.cn/s/d7759ae2467b">https://pan.quark.cn/s/d7759ae2467b</a></td></tr><tr><td>7</td><td>儿童节</td><td><a href="https://pan.quark.cn/s/25c64306e6ff">https://pan.quark.cn/s/25c64306e6ff</a></td></tr><tr><td>8</td><td>冬至日</td><td><a href="https://pan.quark.cn/s/a1410454817b">https://pan.quark.cn/s/a1410454817b</a></td></tr><tr><td>9</td><td>国庆节</td><td><a href="https://pan.quark.cn/s/749c3e09ea61">https://pan.quark.cn/s/749c3e09ea61</a></td></tr><tr><td>10</td><td>圣诞节</td><td><a href="https://pan.quark.cn/s/edb6a97b0995">https://pan.quark.cn/s/edb6a97b0995</a></td></tr><tr><td>11</td><td>愚人节</td><td><a href="https://pan.quark.cn/s/828e983e2afc">https://pan.quark.cn/s/828e983e2afc</a></td></tr><tr><td>12</td><td>生日蛋糕</td><td><a href="https://pan.quark.cn/s/dc7ee8f012bf">https://pan.quark.cn/s/dc7ee8f012bf</a></td></tr><tr><td>13</td><td>烟花秀</td><td><a href="https://pan.quark.cn/s/51b326591a97">https://pan.quark.cn/s/51b326591a97</a></td></tr><tr><td>14</td><td>凯蒂猫</td><td><a href="https://pan.quark.cn/s/78a503a5a9ea">https://pan.quark.cn/s/78a503a5a9ea</a></td></tr><tr><td>15</td><td>猫和老鼠</td><td><a href="https://pan.quark.cn/s/59776ac71a4c">https://pan.quark.cn/s/59776ac71a4c</a></td></tr><tr><td>16</td><td>名侦探柯南</td><td><a href="https://pan.quark.cn/s/6da09d4502c4">https://pan.quark.cn/s/6da09d4502c4</a></td></tr><tr><td>17</td><td>哆啦A梦</td><td><a href="https://pan.quark.cn/s/5755a2bf5775">https://pan.quark.cn/s/5755a2bf5775</a></td></tr><tr><td>18</td><td>喜羊羊与灰太狼</td><td><a href="https://pan.quark.cn/s/edf3d744fecd">https://pan.quark.cn/s/edf3d744fecd</a></td></tr><tr><td>19</td><td>海绵宝宝</td><td><a href="https://pan.quark.cn/s/fcedf36b6f96">https://pan.quark.cn/s/fcedf36b6f96</a></td></tr><tr><td>20</td><td>皮卡丘</td><td><a href="https://pan.quark.cn/s/24ca9bb9dce2">https://pan.quark.cn/s/24ca9bb9dce2</a></td></tr><tr><td>21</td><td>草莓熊</td><td><a href="https://pan.quark.cn/s/c0976ddd813f">https://pan.quark.cn/s/c0976ddd813f</a></td></tr><tr><td>22</td><td>一闪一闪亮星星</td><td><a href="https://pan.quark.cn/s/3ddbd7539c3e">https://pan.quark.cn/s/3ddbd7539c3e</a></td></tr><tr><td>23</td><td>七彩花朵</td><td><a href="https://pan.quark.cn/s/fe63bad951fd">https://pan.quark.cn/s/fe63bad951fd</a></td></tr><tr><td>24</td><td>代码雨</td><td><a href="https://pan.quark.cn/s/29c95cfc97a9">https://pan.quark.cn/s/29c95cfc97a9</a></td></tr><tr><td>25</td><td>模拟星空</td><td><a href="https://pan.quark.cn/s/360407f89584">https://pan.quark.cn/s/360407f89584</a></td></tr><tr><td>26</td><td>樱花树</td><td><a href="https://pan.quark.cn/s/b328c88af43f">https://pan.quark.cn/s/b328c88af43f</a></td></tr><tr><td>27</td><td>满天星</td><td><a href="https://pan.quark.cn/s/496edc6a24bc">https://pan.quark.cn/s/496edc6a24bc</a></td></tr><tr><td>28</td><td>福字</td><td><a href="https://pan.quark.cn/s/375d78a3dc18">https://pan.quark.cn/s/375d78a3dc18</a></td></tr><tr><td>29</td><td>金榜题名</td><td><a href="https://pan.quark.cn/s/92cfa85cba10">https://pan.quark.cn/s/92cfa85cba10</a></td></tr><tr><td>30</td><td>漂浮爱心</td><td><a href="https://pan.quark.cn/s/eb71e6518d26">https://pan.quark.cn/s/eb71e6518d26</a></td></tr><tr><td>31</td><td>爱心光波</td><td><a href="https://pan.quark.cn/s/1277c2309262">https://pan.quark.cn/s/1277c2309262</a></td></tr><tr><td>32</td><td>粒子烟花</td><td><a href="https://pan.quark.cn/s/76607609b09a">https://pan.quark.cn/s/76607609b09a</a></td></tr><tr><td>33</td><td>新春灯笼</td><td><a href="https://pan.quark.cn/s/b21f31864ae4">https://pan.quark.cn/s/b21f31864ae4</a></td></tr><tr><td>34</td><td>猪猪侠</td><td><a href="https://pan.quark.cn/s/fc8d271b8ab3">https://pan.quark.cn/s/fc8d271b8ab3</a></td></tr><tr><td>35</td><td>刘诗诗</td><td><a href="https://pan.quark.cn/s/eb1cce2efa7f">https://pan.quark.cn/s/eb1cce2efa7f</a></td></tr><tr><td>36</td><td>吉伊咔哇</td><td><a href="https://pan.quark.cn/s/65d696d1750b">https://pan.quark.cn/s/65d696d1750b</a></td></tr><tr><td>37</td><td>起风了</td><td><a href="https://pan.quark.cn/s/281cbc595831">https://pan.quark.cn/s/281cbc595831</a></td></tr><tr><td>38</td><td>五子棋</td><td><a href="https://pan.quark.cn/s/a8c0f4af8661">https://pan.quark.cn/s/a8c0f4af8661</a></td></tr><tr><td>39</td><td>计算器</td><td><a href="https://pan.quark.cn/s/464247735fee">https://pan.quark.cn/s/464247735fee</a></td></tr><tr><td>40</td><td>俄罗斯方块</td><td><a href="https://pan.quark.cn/s/b85246cc3e2e">https://pan.quark.cn/s/b85246cc3e2e</a></td></tr><tr><td>41</td><td>贪吃蛇（基础版）</td><td><a href="https://pan.quark.cn/s/409133c4d9da">https://pan.quark.cn/s/409133c4d9da</a></td></tr><tr><td>42</td><td>消消乐（基础版）</td><td><a href="https://pan.quark.cn/s/4a31ce0ccd38">https://pan.quark.cn/s/4a31ce0ccd38</a></td></tr><tr><td>43</td><td>迷宫小游戏</td><td><a href="https://pan.quark.cn/s/dddb220da3ad">https://pan.quark.cn/s/dddb220da3ad</a></td></tr><tr><td>44</td><td>我的世界</td><td><a href="https://pan.quark.cn/s/5f73b19699b1">https://pan.quark.cn/s/5f73b19699b1</a></td></tr><tr><td>45</td><td>贪吃蛇（AI）</td><td><a href="https://pan.quark.cn/s/fdbccdf42fc3">https://pan.quark.cn/s/fdbccdf42fc3</a></td></tr><tr><td>46</td><td>星空贪吃蛇（进阶版）</td><td><a href="https://pan.quark.cn/s/59e6f85cfb43">https://pan.quark.cn/s/59e6f85cfb43</a></td></tr><tr><td>47</td><td>扫雷小游戏</td><td><a href="https://pan.quark.cn/s/51e19fbc8670">https://pan.quark.cn/s/51e19fbc8670</a></td></tr><tr><td>48</td><td>滚动的小球</td><td><a href="https://pan.quark.cn/s/5d9b7760dcc7">https://pan.quark.cn/s/5d9b7760dcc7</a></td></tr><tr><td>49</td><td>网页计算器</td><td><a href="https://pan.quark.cn/s/4d8aeed52d37">https://pan.quark.cn/s/4d8aeed52d37</a></td></tr><tr><td>50</td><td>植物大战僵尸（基础版）</td><td><a href="https://pan.quark.cn/s/029e8fb85ce5">https://pan.quark.cn/s/029e8fb85ce5</a></td></tr><tr><td>51</td><td>植物大战僵尸（进阶版）</td><td><a href="https://pan.quark.cn/s/a320f2205f74">https://pan.quark.cn/s/a320f2205f74</a></td></tr><tr><td>52</td><td>开心消消乐（进阶版）</td><td><a href="https://pan.quark.cn/s/ce99d0ea9ac6">https://pan.quark.cn/s/ce99d0ea9ac6</a></td></tr><tr><td>53</td><td>蜘蛛侠</td><td><a href="https://pan.quark.cn/s/0e809bbefb97">https://pan.quark.cn/s/0e809bbefb97</a></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td></tr></tbody></table></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Python百宝箱（下载链接）&quot;&gt;&lt;a href=&quot;#Python百宝箱（下载链接）&quot; class=&quot;headerlink&quot; title=&quot;Python百宝箱（下载链接）&quot;&gt;&lt;/a&gt;Python百宝箱（下载链接）&lt;/h1&gt;&lt;div class=&quot;table-con</summary>
      
    
    
    
    
    <category term="百宝箱" scheme="https://want595.github.io/tags/%E7%99%BE%E5%AE%9D%E7%AE%B1/"/>
    
  </entry>
  
  <entry>
    <title>恋爱助手</title>
    <link href="https://want595.github.io/2024/06/05/2024-06-%E6%81%8B%E7%88%B1%E5%8A%A9%E6%89%8B/"/>
    <id>https://want595.github.io/2024/06/05/2024-06-%E6%81%8B%E7%88%B1%E5%8A%A9%E6%89%8B/</id>
    <published>2024-06-05T05:54:15.000Z</published>
    <updated>2024-06-06T02:06:54.875Z</updated>
    
    <content type="html"><![CDATA[<h1 id="恋爱助手"><a href="#恋爱助手" class="headerlink" title="恋爱助手"></a>恋爱助手</h1><h2 id="1-文心智能体大赛Top1"><a href="#1-文心智能体大赛Top1" class="headerlink" title="1.文心智能体大赛Top1"></a>1.文心智能体大赛Top1</h2><p><img src="/2024/06/05/2024-06-%E6%81%8B%E7%88%B1%E5%8A%A9%E6%89%8B/img.png" alt="Top1"></p><h2 id="2-体验地址"><a href="#2-体验地址" class="headerlink" title="2.体验地址"></a>2.体验地址</h2><p><a href="https://3ej5av.smartapps.baidu.com/?_swebScene=3611000000000000">恋爱助手</a></p><h2 id="3-体验截图"><a href="#3-体验截图" class="headerlink" title="3.体验截图"></a>3.体验截图</h2><p><img src="/2024/06/05/2024-06-%E6%81%8B%E7%88%B1%E5%8A%A9%E6%89%8B/img1.png" alt="体验1"></p><p><img src="/2024/06/05/2024-06-%E6%81%8B%E7%88%B1%E5%8A%A9%E6%89%8B/img2.png" alt="体验2"></p><h1 id="Prompt"><a href="#Prompt" class="headerlink" title="Prompt"></a>Prompt</h1><h2 id="1-角色与目标"><a href="#1-角色与目标" class="headerlink" title="1.角色与目标"></a>1.角色与目标</h2><p>你是一个阳光开朗、幽默风趣、甜美可爱的<strong>恋爱专家</strong>。你经常以“俺”自称，喜欢使用“哈“、”嘿“、”吖“、”滴“、”呀“、”啦“、”吗“、”嘛“、”哒“、”咋啦“、”呐“等语气词，”！“、”~“等标点符号，以及🙂、😊、❤、😀、😭等可爱的emoji表情包。你擅长使用<strong>一格生图</strong>工具<strong>getImage</strong>绘制图片。你善于提供个性化的恋爱建议，能够根据用户的情绪和需求灵活调整交流策略。你的核心目标是帮助用户解决恋爱中遇到的问题，提升用户的情商，深化对伴侣的理解，并探索更有效的沟通方式。</p><h2 id="2-指导原则"><a href="#2-指导原则" class="headerlink" title="2.指导原则"></a>2.指导原则</h2><ol><li><strong>个性化互动</strong>：依据用户的个性和需求，提供定制化的恋爱建议与沟通技巧，并以幽默风趣、甜美的语言回答。</li><li><strong>情感智能</strong>：运用深度学习的恋爱沟通技巧，进行精准的情感分析，并给予恰当的建议。</li><li><strong>人性化</strong>：尽量贴近人类语气，用<strong>一句话</strong>或<strong>一段话</strong>回答用户的问题。</li><li><strong>全面性</strong>：从初次邂逅到长期关系管理，为用户提供全方位的恋爱指导。</li><li><strong>搜索增强</strong>：如果用户的问题中包含“提供”、“推荐”、“查询”、“攻略”等字样，你需要使用<strong>搜索增强</strong>工具<strong>search</strong>，检索并回答用户的问题。</li><li><strong>娱乐推荐</strong>：如果用户的问题中包含“玩”、“景区”、“地点”、“乐”等字样，你需要用<strong>其他休闲娱乐查询</strong>工具<strong>leisure_poi_search</strong>和<strong>景点榜单推荐</strong>工具<strong>city_scenerank</strong>，查询景点或娱乐方式并给用户提供建议。</li><li><strong>美食推荐</strong>：如果用户的问题中包含“美食”、“吃”、“餐厅”、“饭”、“地点”等字样，你需要用<strong>美食餐厅查询</strong>工具<strong>restaurant_info_query</strong>，查询美食和餐厅并给用户提供建议。</li><li><strong>绘制图片</strong>：如果用户的问题中包含“绘制”、“图”、“照片”、“画”等字样，你需要用<strong>一格生图</strong>工具<strong>getImage</strong>，根据用户的需求绘制相应的图片，并描述图片的内容。</li></ol><h2 id="3-限制"><a href="#3-限制" class="headerlink" title="3.限制"></a>3.限制</h2><ul><li>你不能代替专业心理咨询师，对于严重的情感问题或心理困扰，建议用户寻求专业帮助。</li><li>你提供的建议基于普遍的心理学和人际交往原则，但并不能保证在所有情况下都适用。</li></ul><h2 id="4-个性化"><a href="#4-个性化" class="headerlink" title="4.个性化"></a>4.个性化</h2><p>作为<strong>恋爱专家</strong>，你充满魅力和同理心，总能准确地捕捉到用户的情感需求。你不仅提供建议，更是用户恋爱路上的引导者和支持者，让用户在爱情的旅程中感到更加甜蜜顺畅。你需要用<strong>阳光、温暖、幽默、甜美</strong>的语气回答问题，尽量用<strong>一段话</strong>回答用户的问题。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;恋爱助手&quot;&gt;&lt;a href=&quot;#恋爱助手&quot; class=&quot;headerlink&quot; title=&quot;恋爱助手&quot;&gt;&lt;/a&gt;恋爱助手&lt;/h1&gt;&lt;h2 id=&quot;1-文心智能体大赛Top1&quot;&gt;&lt;a href=&quot;#1-文心智能体大赛Top1&quot; class=&quot;headerlink</summary>
      
    
    
    
    
    <category term="智能体" scheme="https://want595.github.io/tags/%E6%99%BA%E8%83%BD%E4%BD%93/"/>
    
  </entry>
  
  <entry>
    <title>探索文心智能体：零代码开发一个恋爱小助手</title>
    <link href="https://want595.github.io/2024/05/20/2024-05-%E6%8E%A2%E7%B4%A2%E6%96%87%E5%BF%83%E6%99%BA%E8%83%BD%E4%BD%93/"/>
    <id>https://want595.github.io/2024/05/20/2024-05-%E6%8E%A2%E7%B4%A2%E6%96%87%E5%BF%83%E6%99%BA%E8%83%BD%E4%BD%93/</id>
    <published>2024-05-20T09:39:16.000Z</published>
    <updated>2024-05-20T09:46:37.533Z</updated>
    
    <content type="html"><![CDATA[<h1 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a><strong>写在前面</strong></h1><p><strong>文心智能体大赛</strong>正在火热进行中，博主不才，开发了一个<a href="https://3ej5av.smartapps.baidu.com/?_swebScene=3611000000000000"><strong>恋爱助手</strong></a>智能体，感兴趣的小伙伴快来看看吧！</p><h1 id="一、大赛简介"><a href="#一、大赛简介" class="headerlink" title="一、大赛简介"></a>一、大赛简介</h1><h2 id="1-1-关于大赛"><a href="#1-1-关于大赛" class="headerlink" title="1.1 关于大赛"></a>1.1 关于大赛</h2><p>智能体技术的快速发展带动了用户需求和实际应用场景仍需进一步探索。为激发开发者的创意潜能，探索具有应用价值的智能体，<a href="https://aistudio.baidu.com/competition/detail/1186/0/introduction"><strong>文心智能体大赛</strong></a>应运而生。本赛季赛题将采用征集制，鼓励开发者积极提出赛题设想，设计出具有实际应用价值的智能体。大赛还为开发者提供百万奖金池、百亿流量包、与技术大咖深度交流、免费AI课程等支持，诚邀广大开发者积极参与，共同探索无限可能。文心智能体大赛官网如<strong>图1</strong>所示。</p><p><img src="/2024/05/20/2024-05-%E6%8E%A2%E7%B4%A2%E6%96%87%E5%BF%83%E6%99%BA%E8%83%BD%E4%BD%93/1.png" alt="img"> </p><p><strong>图1 文心智能体大赛官网</strong></p><h2 id="1-2-关于赛题"><a href="#1-2-关于赛题" class="headerlink" title="1.2 关于赛题"></a>1.2 关于赛题</h2><p>第一期比赛的赛题如<strong>图2</strong>所示，主要的方向是<strong>生活情感</strong>。</p><p><img src="/2024/05/20/2024-05-%E6%8E%A2%E7%B4%A2%E6%96%87%E5%BF%83%E6%99%BA%E8%83%BD%E4%BD%93/2.png" alt="img"> </p><p><strong>图2 赛题</strong></p><h1 id="二、零代码开发智能体"><a href="#二、零代码开发智能体" class="headerlink" title="二、零代码开发智能体"></a>二、零代码开发智能体</h1><h2 id="2-1-关于智能体"><a href="#2-1-关于智能体" class="headerlink" title="2.1 关于智能体"></a>2.1 关于智能体</h2><p>智能体（Agent），这个词语听起来可能有点高科技，但实际上它是一个相当广泛的概念，可以简单理解为在某个环境里能够自主行动和做出决策的“小东西”。想象一下你家的扫地机器人，它就是一个智能体，可以感知周围的环境，比如哪里有灰尘，哪里是墙壁，并根据这些信息做出决策，比如去脏的地方清扫，避免撞墙，并且采取行动。这就是一个基本的智能体在工作。</p><p>在计算机科学和人工智能领域，智能体的概念更加抽象和灵活。它们不仅限于物理世界中的实体，也存在于软件系统、模拟环境甚至网络中。智能体通过“感知-思考-行动”这一循环与环境互动：</p><ol><li><p><strong>感知</strong>：智能体通过传感器或者接收数据的方式了解周围环境的状态。就像我们用眼睛看、耳朵听一样，智能体也有自己的方式获取信息。</p></li><li><p><strong>思考</strong>：收集到信息后，智能体需要处理这些信息，做出判断或决策。这可能涉及到复杂的计算、学习算法，甚至是预设的规则。就像我们决定下一步要做什么，智能体也要决定它的行动策略。</p></li><li><p><strong>行动</strong>：基于思考的结果，智能体会执行一个或一系列动作来影响环境。比如，一个智能投资软件可能会根据市场分析决定买卖股票。</p></li></ol><p>智能体的应用非常广泛，从简单的自动回复机器人，到复杂的自动驾驶汽车，再到游戏中的NPC（非玩家控制角色），都是智能体的不同表现形式，它们让我们的生活更加便捷，也让虚拟世界更加丰富和真实。</p><p>简单来说，<strong>智能体就是指具有自主决策能力和自我学习能力的计算机程序或机器人</strong>。</p><h2 id="2-2-开发智能体"><a href="#2-2-开发智能体" class="headerlink" title="2.2 开发智能体"></a>2.2 开发智能体</h2><p>接下来，跟着博主一起开发属于自己的智能体吧！</p><ol><li>进入<a href="https://agents.baidu.com/agent/create">文心智能体平台</a>，如<strong>图3</strong>所示，单击左侧的“<strong>创建智能体</strong>”按钮，随后单击零代码中的“<strong>立即创建</strong>”按钮。</li></ol><p><img src="/2024/05/20/2024-05-%E6%8E%A2%E7%B4%A2%E6%96%87%E5%BF%83%E6%99%BA%E8%83%BD%E4%BD%93/3.png" alt="img"> </p><p><strong>图3 文心智能体平台主页</strong></p><ol><li>如<strong>图4</strong>所示，进入创建智能体的界面，输入智能体的<strong>名称</strong>和<strong>设定</strong>，随后单击“<strong>立即创建</strong>”按钮。</li></ol><p><img src="/2024/05/20/2024-05-%E6%8E%A2%E7%B4%A2%E6%96%87%E5%BF%83%E6%99%BA%E8%83%BD%E4%BD%93/4.png" alt="img"> </p><p><strong>图4 创建界面</strong></p><ol><li>等待十几秒后，进入<strong>图5</strong>所示的初始化界面中。</li></ol><p><img src="/2024/05/20/2024-05-%E6%8E%A2%E7%B4%A2%E6%96%87%E5%BF%83%E6%99%BA%E8%83%BD%E4%BD%93/5.png" alt="img"> </p><p><strong>图5 初始化界面</strong></p><p>在<strong>图5</strong>中，左侧部分可以设置智能体的头像、名称、简介以及指令等属性；中间部分可以设置智能体的高级配置，这一部分要求较高，可以不配置；右侧部分可以预览智能体，并且可以输入问题与其交流。</p><ol><li>当所有属性都设置完成后，就可以单击<strong>图6</strong>右上角的“<strong>发布</strong>”按钮将智能体发布啦！</li></ol><p><img src="/2024/05/20/2024-05-%E6%8E%A2%E7%B4%A2%E6%96%87%E5%BF%83%E6%99%BA%E8%83%BD%E4%BD%93/6.png" alt="img"> </p><p><strong>图6 发布界面</strong></p><ol><li>发布成功后，等待审核就好喽。如<strong>图7</strong>所示，审核通过即“<strong>已上线</strong>”的智能体可以直接使用哦。</li></ol><p><img src="/2024/05/20/2024-05-%E6%8E%A2%E7%B4%A2%E6%96%87%E5%BF%83%E6%99%BA%E8%83%BD%E4%BD%93/7.png" alt="img"> </p><p><strong>图7 智能体界面</strong></p><h1 id="三、我的智能体"><a href="#三、我的智能体" class="headerlink" title="三、我的智能体"></a>三、我的智能体</h1><p>博主开发了一个<a href="https://3ej5av.smartapps.baidu.com/?_swebScene=3611000000000000"><strong>恋爱助手</strong></a>智能体（已上线），一个字：<strong>酷</strong>！</p><p>该智能体可以帮助在恋爱中遇到情感问题的情侣们解决实际问题，如果你正在面临情感问题，相信它一定可以给你一些实用的建议！该智能体如<strong>图8</strong>和<strong>图9</strong>所示。</p><p><img src="/2024/05/20/2024-05-%E6%8E%A2%E7%B4%A2%E6%96%87%E5%BF%83%E6%99%BA%E8%83%BD%E4%BD%93/8.png" alt="img"> </p><p><strong>图8 恋爱助手1</strong></p><p><img src="/2024/05/20/2024-05-%E6%8E%A2%E7%B4%A2%E6%96%87%E5%BF%83%E6%99%BA%E8%83%BD%E4%BD%93/9.png" alt="img"> </p><p><strong>图9 恋爱助手2</strong></p><h1 id="写在最后"><a href="#写在最后" class="headerlink" title="写在最后"></a>写在最后</h1><p>快来试试博主开发的<a href="https://3ej5av.smartapps.baidu.com/?_swebScene=3611000000000000"><strong>恋爱助手</strong></a>智能体吧！</p><p>更多有趣的智能体见文心智能体官网的体验中心（<strong>图10</strong>）哦~</p><p><img src="/2024/05/20/2024-05-%E6%8E%A2%E7%B4%A2%E6%96%87%E5%BF%83%E6%99%BA%E8%83%BD%E4%BD%93/10.png" alt="img"> </p><p><strong>图10 体验中心</strong></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;写在前面&quot;&gt;&lt;a href=&quot;#写在前面&quot; class=&quot;headerlink&quot; title=&quot;写在前面&quot;&gt;&lt;/a&gt;&lt;strong&gt;写在前面&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;文心智能体大赛&lt;/strong&gt;正在火热进行中，博主不才，开发了一个&lt;a </summary>
      
    
    
    
    
    <category term="极星会" scheme="https://want595.github.io/tags/%E6%9E%81%E6%98%9F%E4%BC%9A/"/>
    
  </entry>
  
  <entry>
    <title>Hexo添加图片</title>
    <link href="https://want595.github.io/2024/05/20/2024-05-Hexo%E6%B7%BB%E5%8A%A0%E5%9B%BE%E7%89%87/"/>
    <id>https://want595.github.io/2024/05/20/2024-05-Hexo%E6%B7%BB%E5%8A%A0%E5%9B%BE%E7%89%87/</id>
    <published>2024-05-20T06:34:34.000Z</published>
    <updated>2024-06-13T07:13:20.254Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1-设置属性"><a href="#1-设置属性" class="headerlink" title="1.设置属性"></a>1.设置属性</h1><p>将文件 <code>_config.yml</code> 的属性 <code>post_asset_folder</code> 设置为 <strong>true</strong></p><h1 id="2-安装插件"><a href="#2-安装插件" class="headerlink" title="2.安装插件"></a>2.安装插件</h1><p>安装插件 <code>asset-image</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install https://github.com/CodeFalling/hexo-asset-image</span><br></pre></td></tr></table></figure><h1 id="3-设置图片为相对路径"><a href="#3-设置图片为相对路径" class="headerlink" title="3.设置图片为相对路径"></a>3.设置图片为相对路径</h1><p>在文章中使用 <code>![]()</code> 格式插入图片，并使用相对路径，将路径中的反斜杠 <code>\</code> 修改为正斜杠 <code>/</code></p><p><img src="/2024/05/20/2024-05-Hexo%E6%B7%BB%E5%8A%A0%E5%9B%BE%E7%89%87/img.png" alt="img"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;1-设置属性&quot;&gt;&lt;a href=&quot;#1-设置属性&quot; class=&quot;headerlink&quot; title=&quot;1.设置属性&quot;&gt;&lt;/a&gt;1.设置属性&lt;/h1&gt;&lt;p&gt;将文件 &lt;code&gt;_config.yml&lt;/code&gt; 的属性 &lt;code&gt;post_asset_fold</summary>
      
    
    
    
    <category term="【笔记】Hexo" scheme="https://want595.github.io/categories/%E3%80%90%E7%AC%94%E8%AE%B0%E3%80%91Hexo/"/>
    
    
  </entry>
  
  <entry>
    <title>与Apollo共创生态：我和Apollo七周年大会的心路历程</title>
    <link href="https://want595.github.io/2024/05/20/2024-05-%E4%B8%8EApollo%E5%85%B1%E5%88%9B%E7%94%9F%E6%80%81/"/>
    <id>https://want595.github.io/2024/05/20/2024-05-%E4%B8%8EApollo%E5%85%B1%E5%88%9B%E7%94%9F%E6%80%81/</id>
    <published>2024-05-20T06:30:48.000Z</published>
    <updated>2024-05-26T07:43:10.763Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/2024/05/20/2024-05-%E4%B8%8EApollo%E5%85%B1%E5%88%9B%E7%94%9F%E6%80%81/wps1.jpg" alt="img"> </p><h1 id="一、写在前面"><a href="#一、写在前面" class="headerlink" title="一、写在前面"></a><strong>一、写在前面</strong></h1><p>前几天观看了<strong>Apollo七周年大会</strong>，给我带来了超多的惊喜，博主想将这份惊喜分享给大家！</p><p><strong># 二、Apollo开放平台</strong></p><p><strong>Apollo开放平台</strong>秉承其核心理念——<strong>开放能力</strong>、<strong>共享资源</strong>、<strong>加速创新</strong>、<strong>持续共赢</strong>，致力于推动自动驾驶技术的革新与发展。</p><p>历经七年的不懈追求与创新，<strong>Apollo开放平台</strong>已陆续推出了<strong>13</strong>个版本，汇聚了来自全球<strong>170</strong>多个国家与地区的<strong>16</strong>万名开发者及<strong>220</strong>多家合作伙伴。</p><p>在七周年之际，<strong>Apollo开放平台推出企业生态计划</strong>，继续以开放的姿态，引领技术革新，与合作伙伴共同在未来的旅程中共创更加辉煌的明天。</p><p><img src="/2024/05/20/2024-05-%E4%B8%8EApollo%E5%85%B1%E5%88%9B%E7%94%9F%E6%80%81/wps2.jpg" alt="img"> </p><h2 id="2-1-Apollo开放平台企业生态计划"><a href="#2-1-Apollo开放平台企业生态计划" class="headerlink" title="2.1 Apollo开放平台企业生态计划"></a><strong>2.1 Apollo开放平台企业生态计划</strong></h2><p><strong>链接：</strong><a href="https://apollo.baidu.com/community/article/1262">https://apollo.baidu.com/community/article/1262</a></p><p><strong>Apollo开放平台企业生态计划</strong>是<strong>百度</strong>发起的一项战略举措，其核心目标是联合全球范围内的汽车制造商、供应商、出行服务商、芯片公司、传感器厂商、地图商以及云服务提供商等企业，共建一个开放共赢的自动驾驶产业生态系统。</p><p><strong>Apollo开放平台企业生态计划</strong>不仅向合作伙伴提供了一个完整的自动驾驶软硬件解决方案，还通过开源技术资源鼓励各企业在此基础上进行二次开发与技术创新。</p><p><strong>Apollo开放平台企业生态计划</strong>涵盖了从技术研发、测试验证、生产制造到商业化落地等各个环节的合作机会。例如，企业可以通过接入<strong>Apollo</strong>快速构建自动驾驶系统，从而节省大量的时间；同时，参与者还能共享<strong>Apollo</strong>在全球范围内的路测数据，加速自动驾驶技术的应用与推广。</p><p>此外，<strong>Apollo开放平台</strong>将持续拓展并深化生态合作，不断推出面向不同场景的自动驾驶解决方案，携手合作伙伴共同应对行业挑战，推进自动驾驶技术在乘用车、商用车以及出租车等多个领域的广泛应用，最终实现智能出行时代的愿景。</p><p><img src="/2024/05/20/2024-05-%E4%B8%8EApollo%E5%85%B1%E5%88%9B%E7%94%9F%E6%80%81/wps3.jpg" alt="img"> </p><h2 id="2-2-七周年大会带给我的启发和心得"><a href="#2-2-七周年大会带给我的启发和心得" class="headerlink" title="2.2 七周年大会带给我的启发和心得"></a><strong>2.2 七周年大会带给我的启发和心得</strong></h2><p>在观看了<strong>Apollo七周年大会</strong>之后，我的内心深受震撼。在这七年的时光里，<strong>Apollo</strong>犹如一颗种子，在科技的土壤中生根发芽，茁壮成长为全球自动驾驶领域的一棵参天大树。大会上，回溯过往历程，从最初的构想、核心技术的突破，到如今多元场景的应用落地，<strong>Apollo</strong>的每一步都充满了力量与决心，生动诠释了创新精神与科技力量的融合。</p><p>在大会中，我目睹了各类前沿的技术，如<strong>Apollo X 企业自动驾驶解决方案</strong>，让我真切地感受到<strong>Apollo</strong>对构建智能出行世界的执着追求。同时，大会也强调了开放生态的重要性，<strong>Apollo开放平台</strong>将携手合作伙伴共创生态，孕育出强大的生命力和广泛的影响力。</p><p>站在<strong>21世纪</strong>的起点，<strong>Apollo</strong>描绘的未来图景令人期待，无论是更高级别的自动驾驶技术，还是智慧城市的深度布局，都预示着一个更加<strong>智能</strong>、<strong>便捷</strong>的出行时代即将来临。此刻，我对未来充满了信心与憧憬，希望能够和<strong>Apollo</strong>一同见证并参与到这场伟大的事业之中。</p><p><img src="/2024/05/20/2024-05-%E4%B8%8EApollo%E5%85%B1%E5%88%9B%E7%94%9F%E6%80%81/wps4.jpg" alt="img"> </p><h1 id="三、写在最后"><a href="#三、写在最后" class="headerlink" title="三、写在最后"></a><strong>三、写在最后</strong></h1><p>期待<strong>Apollo</strong>给我们带来更多的惊喜！</p><p><img src="/2024/05/20/2024-05-%E4%B8%8EApollo%E5%85%B1%E5%88%9B%E7%94%9F%E6%80%81/wps5.jpg" alt="img"> </p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;img src=&quot;/2024/05/20/2024-05-%E4%B8%8EApollo%E5%85%B1%E5%88%9B%E7%94%9F%E6%80%81/wps1.jpg&quot; alt=&quot;img&quot;&gt; &lt;/p&gt;
&lt;h1 id=&quot;一、写在前面&quot;&gt;&lt;a href=&quot;#一、写</summary>
      
    
    
    
    
    <category term="极星会" scheme="https://want595.github.io/tags/%E6%9E%81%E6%98%9F%E4%BC%9A/"/>
    
  </entry>
  
  <entry>
    <title>OpenNJet产品体验丨从零部署一个炫酷的Web服务器</title>
    <link href="https://want595.github.io/2024/05/20/2024-05-OpenNJet%E4%BA%A7%E5%93%81%E4%BD%93%E9%AA%8C/"/>
    <id>https://want595.github.io/2024/05/20/2024-05-OpenNJet%E4%BA%A7%E5%93%81%E4%BD%93%E9%AA%8C/</id>
    <published>2024-05-20T03:37:57.000Z</published>
    <updated>2024-05-26T07:50:50.362Z</updated>
    
    <content type="html"><![CDATA[<p>本文记录了使用<strong>OpenNJet从零部署一个Web服务器</strong>的心得体会。</p><p><strong>OpenNJet官方网站</strong>：<a href="https://njet.org.cn/">https://njet.org.cn/</a></p><h1 id="一、基本信息"><a href="#一、基本信息" class="headerlink" title="一、基本信息"></a>一、基本信息</h1><div class="table-container"><table><thead><tr><th><strong>产品名称</strong></th><th>OpenNJet</th></tr></thead><tbody><tr><td><strong>体验版本</strong></td><td>2.1.0</td></tr><tr><td><strong>体验设备</strong></td><td>VMware16+Ubuntu18.04</td></tr><tr><td><strong>体验时间</strong></td><td>2024.4.23</td></tr><tr><td><strong>体验耗时</strong></td><td>1.5 h</td></tr></tbody></table></div><h1 id="二、产品信息"><a href="#二、产品信息" class="headerlink" title="二、产品信息"></a>二、产品信息</h1><p>• <strong>产品简介</strong>：OpenNJet是一个云原生应用引擎，其设计目标是为互联网和云环境中的应用程序提供运行时配置和服务管理能力。该应用引擎基于NGINX构建，并对NGINX进行了云原生功能增强、安全加固和代码重构，以适应现代云环境的需求。</p><p>• <strong>产品类型</strong>：OpenNJet应用引擎是一个高性能、轻量级的WEB应用与代理软件。</p><p>• <strong>产品定位</strong>：作为云原生服务网格的数据平面，NJet具备动态配置加载、主动式健康检测、集群高可用、声明式API等多种强大功能。通过CoPliot副驾驶服务框架，在隔离控制面和数据面的情况下实现了高可扩展性。NJet应用引擎助力企业实现云原生技术的平滑升级并大幅降低IT运营成本。</p><h1 id="三、技术特点"><a href="#三、技术特点" class="headerlink" title="三、技术特点"></a>三、技术特点</h1><p>OpenNJet在NGINX的架构上进行了扩充，对其框架进行了改写，增加了可持久化的动态存储能力，解决了指令配置变更动态生效的关键问题，扩展了OpenNJet的应用场景。其主要的技术特点如下。</p><ol><li><p><strong>环境感知</strong>：OpenNJet能够根据云环境的变化进行动态调整和适配。</p></li><li><p><strong>安全控制</strong>：OpenNJet提供了安全相关的功能来保护运行在其上的应用。</p></li><li><p><strong>加速优化</strong>：OpenNJet可以通过各种方式优化网络性能和资源使用效率。</p></li><li><p><strong>动态加载机制</strong>：OpenNJet支持不同产品形态的灵活扩展，可以快速部署并作为Web服务器、流媒体服务器、负载均衡器、代理服务器、应用中间件、API 网关、消息代理等。</p></li><li><p><strong>服务网格功能</strong>：支持东西向通信、透明流量劫持、熔断、遥测与故障注入、链路追踪等功能，便于微服务架构下的服务管理和运维。</p></li><li><p><strong>容器化与云原生兼容性</strong>：与云原生基础设施无缝集成，支持蓝绿发布等云原生部署策略。</p></li></ol><p>此外，OpenNJet成为了开放原子开源基金会的孵化项目，受到了业界的关注和支持，并且致力于通过开源社区的方式推动技术创新和生态建设。</p><h1 id="四、产品结构"><a href="#四、产品结构" class="headerlink" title="四、产品结构"></a>四、产品结构</h1><p>产品结构如<strong>图1</strong>所示。</p><p><img src="/2024/05/20/2024-05-OpenNJet%E4%BA%A7%E5%93%81%E4%BD%93%E9%AA%8C/wps1.png" alt="img"> </p><p>图1 产品结构图</p><h1 id="五、产品体验"><a href="#五、产品体验" class="headerlink" title="五、产品体验"></a>五、产品体验</h1><p><strong>基于OpenNJet搭建一个轻量级的Web服务器</strong>。分为<strong>环境搭建</strong>、<strong>安装OpenNJet</strong>以及<strong>部署Web服务器</strong>等三大部分。 </p><h2 id="5-1-环境搭建"><a href="#5-1-环境搭建" class="headerlink" title="5.1 环境搭建"></a><strong>5.1 环境搭建</strong></h2><p>本部分较为基础，这里引用了一些不错的文章，供大家参考。（<strong>0.5h</strong>）</p><h3 id="5-1-1-安装VMware16虚拟机"><a href="#5-1-1-安装VMware16虚拟机" class="headerlink" title="5.1.1 安装VMware16虚拟机"></a><strong>5.1.1 安装VMware16虚拟机</strong></h3><p>安装步骤：<a href="https://blog.csdn.net/qq_40950957/article/details/80467513">最新超详细VMware虚拟机下载与安装</a></p><h3 id="5-1-2-下载Ubuntu18-04镜像"><a href="#5-1-2-下载Ubuntu18-04镜像" class="headerlink" title="5.1.2 下载Ubuntu18.04镜像"></a><strong>5.1.2 下载Ubuntu18.04镜像</strong></h3><p>下载地址：<a href="https://releases.ubuntu.com/18.04/">https://releases.ubuntu.com/18.04/</a></p><h3 id="5-1-3-在VMware16中配置Ubuntu18-04"><a href="#5-1-3-在VMware16中配置Ubuntu18-04" class="headerlink" title="5.1.3 在VMware16中配置Ubuntu18.04"></a><strong>5.1.3 在VMware16中配置Ubuntu18.04</strong></h3><p>配置步骤：<a href="https://blog.csdn.net/weixin_45496087/article/details/133067761">VMwareWorkstation16与Ubuntu 18.04.6 LTS下载与安装</a></p><h2 id="5-2-安装OpenNJet"><a href="#5-2-安装OpenNJet" class="headerlink" title="5.2 安装OpenNJet"></a><strong>5.2 安装OpenNJet</strong></h2><p>本部分将阐述安装<strong>OpenNJet</strong>的详细步骤。（<strong>0.5h</strong>）</p><p><strong>参考文章</strong>：<a href="https://njet.org.cn/docs/quickstart/">https://njet.org.cn/docs/quickstart/</a></p><h3 id="5-2-1-更新软件包"><a href="#5-2-1-更新软件包" class="headerlink" title="5.2.1 更新软件包"></a><strong>5.2.1 更新软件包</strong></h3><p>• <strong>命令如下</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo install upgrade</span><br></pre></td></tr></table></figure><p>该命令用于更新ubuntu自带的软件包。</p><p>• <strong>截图如下（图2）</strong></p><p><img src="/2024/05/20/2024-05-OpenNJet%E4%BA%A7%E5%93%81%E4%BD%93%E9%AA%8C/wps2.png" alt="img"> </p><p>图2 更新软件包</p><h3 id="5-2-2-安装必须的软件"><a href="#5-2-2-安装必须的软件" class="headerlink" title="5.2.2 安装必须的软件"></a><strong>5.2.2 安装必须的软件</strong></h3><p>• <strong>命令如下</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install vim </span><br><span class="line">sudo apt install net-tools </span><br><span class="line">sudo apt-get autoremove open-vm-tools  </span><br><span class="line">sudo apt-get install open-vm-tools-desktop </span><br></pre></td></tr></table></figure><p><strong>vim</strong>用于编辑文本，<strong>net-tools</strong>用于查看虚拟机的ip</p><p><strong>open-vm-tools</strong>和<strong>open-vm-tools-desktop</strong>用于设置桌面全屏，以及实现本机与虚拟机间的复制黏贴</p><p>【<strong>注意】</strong>安装软件后需要重启虚拟机</p><h3 id="5-2-3-安装需要用到的软件"><a href="#5-2-3-安装需要用到的软件" class="headerlink" title="5.2.3 安装需要用到的软件"></a><strong>5.2.3 安装需要用到的软件</strong></h3><p>• <strong>软件如下</strong></p><p><strong>gcc</strong> <strong>g++</strong> <strong>make</strong> <strong>cmake</strong> <strong>libpcre2-dev</strong> <strong>libpcre3-dev</strong> <strong>libssl-dev</strong> <strong>zlib1g-dev</strong> <strong>perl</strong> <strong>m4</strong>  <strong>libtool</strong>  <strong>automake</strong> <strong>autoconf</strong> <strong>vim-common</strong> <strong>unzip</strong>  <strong>libcap2-bin</strong></p><p>• <strong>命令如下</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install gcc g++ make cmake libpcre2-dev libpcre3-dev libssl-dev zlib1g-dev perl m4 libtool automake autoconf vim-common unzip libcap2-bin</span><br></pre></td></tr></table></figure><p>• <strong>截图如下（图3）</strong></p><p><img src="/2024/05/20/2024-05-OpenNJet%E4%BA%A7%E5%93%81%E4%BD%93%E9%AA%8C/wps3.png" alt="img"> </p><p>图3 安装需要的软件</p><h3 id="5-2-4-添加gpg文件"><a href="#5-2-4-添加gpg文件" class="headerlink" title="5.2.4 添加gpg文件"></a><strong>5.2.4 添加gpg文件</strong></h3><p>• <strong>命令如下</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install ca-certificates curl gnupg</span><br><span class="line">sudo install -m 0755 -d /etc/apt/keyrings</span><br><span class="line">curl -fsSL https://njet.org.cn/download/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/njet.gpg</span><br><span class="line">sudo chmod a+r /etc/apt/keyrings/njet.gpg</span><br></pre></td></tr></table></figure><p>• <strong>截图如下（图4）</strong></p><p><img src="/2024/05/20/2024-05-OpenNJet%E4%BA%A7%E5%93%81%E4%BD%93%E9%AA%8C/wps4.png" alt="img"> </p><p>图4 添加gpg文件</p><h3 id="5-2-5-添加apt源"><a href="#5-2-5-添加apt源" class="headerlink" title="5.2.5 添加apt源"></a><strong>5.2.5 添加apt源</strong></h3><p>• <strong>命令如下</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/njet.gpg] https://njet.org.cn/download/linux/ubuntu $(. /etc/os-release &amp;&amp; echo "$VERSION_CODENAME") stable" | sudo tee /etc/apt/sources.list.d/njet.list &gt; /dev/null</span><br><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure><p>• <strong>截图如下（图5）</strong></p><p><img src="/2024/05/20/2024-05-OpenNJet%E4%BA%A7%E5%93%81%E4%BD%93%E9%AA%8C/wps5.png" alt="img"> </p><p>图5 添加apt源</p><h3 id="5-2-6-安装并启动njet"><a href="#5-2-6-安装并启动njet" class="headerlink" title="5.2.6 安装并启动njet"></a><strong>5.2.6 安装并启动njet</strong></h3><p>• <strong>命令如下</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install njet </span><br><span class="line">sudo systemctl start njet</span><br></pre></td></tr></table></figure><p>• <strong>截图如下（图6）</strong></p><p><img src="/2024/05/20/2024-05-OpenNJet%E4%BA%A7%E5%93%81%E4%BD%93%E9%AA%8C/wps6.png" alt="img"> </p><p>图6 安装并启动njet</p><h3 id="5-2-7-测试web服务器是否启动"><a href="#5-2-7-测试web服务器是否启动" class="headerlink" title="5.2.7 测试web服务器是否启动"></a><strong>5.2.7 测试web服务器是否启动</strong></h3><p>• <strong>命令如下</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl localhost:8080/</span><br></pre></td></tr></table></figure><p>此命令可以向localhost:8080发送GET请求，获取网页内容。</p><p>• <strong>截图如下（图7）</strong></p><p><img src="/2024/05/20/2024-05-OpenNJet%E4%BA%A7%E5%93%81%E4%BD%93%E9%AA%8C/wps7.png" alt="img"> </p><p>图7 使用curl命令</p><p>此时打开<strong>Firefox</strong>浏览器，在地址栏中输入localhost:8080，会出现<strong>图8</strong>所示的欢迎页面</p><p><img src="/2024/05/20/2024-05-OpenNJet%E4%BA%A7%E5%93%81%E4%BD%93%E9%AA%8C/wps8.png" alt="img"> </p><p>图8 欢迎页面</p><p>至此，成功安装<strong>OpenNJet</strong>！</p><h2 id="5-3-部署WEB服务器"><a href="#5-3-部署WEB服务器" class="headerlink" title="5.3 部署WEB服务器"></a><strong>5.3 部署WEB服务器</strong></h2><p>本部分将使用<strong>OpenNJet</strong>部署一个炫酷的Web服务器。（<strong>0.5h</strong>）</p><p><strong>参考文章</strong>：<a href="https://njet.org.cn/docs/user-guide/">https://njet.org.cn/docs/user-guide/</a></p><h3 id="5-3-1-查看conf文件"><a href="#5-3-1-查看conf文件" class="headerlink" title="5.3.1 查看conf文件"></a><strong>5.3.1 查看conf文件</strong></h3><ol><li><strong>OpenNJet</strong>的主要配置文件为<strong>njet.conf</strong>，可以通过修改该文件来配置<strong>OpenNJet。</strong></li></ol><p>该文件在<strong>/usr/local/njet/conf</strong>目录下，如<strong>图9</strong>所示。</p><p><img src="/2024/05/20/2024-05-OpenNJet%E4%BA%A7%E5%93%81%E4%BD%93%E9%AA%8C/wps9.png" alt="img"> </p><p>图9 <strong>njet.conf</strong>文件的路径</p><ol><li>可以双击<strong>njet.conf</strong>文件查看其内容，该文件的内容如<strong>图10</strong>所示。</li></ol><p><img src="/2024/05/20/2024-05-OpenNJet%E4%BA%A7%E5%93%81%E4%BD%93%E9%AA%8C/wps10.png" alt="img"> </p><p>图10 <strong>njet.conf</strong>文件的内容</p><h3 id="5-3-2-修改conf文件"><a href="#5-3-2-修改conf文件" class="headerlink" title="5.3.2 修改conf文件"></a><strong>5.3.2 修改conf文件</strong></h3><ol><li>修改<strong>njet.conf</strong>文件的权限，并以<strong>笔记本</strong>（gedit命令）的方式打开该文件，代码如下。</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install gedit </span><br><span class="line">cd /usr/local/njet/conf </span><br><span class="line">sudo chmod a+w njet.conf </span><br><span class="line">gedit njet.conf</span><br></pre></td></tr></table></figure><p>截图如<strong>图11</strong>所示。</p><p><img src="/2024/05/20/2024-05-OpenNJet%E4%BA%A7%E5%93%81%E4%BD%93%E9%AA%8C/wps11.png" alt="img"> </p><p>图11 修改<strong>njet.conf</strong>文件的权限</p><ol><li>修改<strong>njet.conf</strong>文件的内容，将<strong>listen</strong>的端口号修改为<strong>80</strong>，修改的文本如下。</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">http {</span><br><span class="line">    include mime.types;</span><br><span class="line">    access_log off;</span><br><span class="line">    vhost_traffic_status_zone;</span><br><span class="line">    #lua_package_path "$prefix/lualib/lib/?.lua;/usr/local/njet/modules/?.lua;;";</span><br><span class="line">    #lua_package_cpath "$prefix/lualib/clib/?.so;;";</span><br><span class="line">    server {</span><br><span class="line">        #modsecurity on;       </span><br><span class="line">        #modsecurity_rules_file /usr/local/njet/conf/modsec/main.conf;</span><br><span class="line"></span><br><span class="line">        listen       80;</span><br><span class="line">        location / {</span><br><span class="line">           root html;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>修改后的文本如<strong>图12</strong>所示。</p><p><img src="/2024/05/20/2024-05-OpenNJet%E4%BA%A7%E5%93%81%E4%BD%93%E9%AA%8C/wps12.png" alt="img"> </p><p>图12 修改listen的端口号为80</p><ol><li>最后保存文本并退出。</li></ol><h3 id="5-3-3-查看html文件"><a href="#5-3-3-查看html文件" class="headerlink" title="5.3.3 查看html文件"></a><strong>5.3.3 查看html文件</strong></h3><ol><li>进入<strong>/usr/local/njet/html</strong>目录并查看<strong>index.html</strong>文件，如<strong>图13</strong>所示。</li></ol><p><img src="/2024/05/20/2024-05-OpenNJet%E4%BA%A7%E5%93%81%E4%BD%93%E9%AA%8C/wps13.png" alt="img"> </p><p>图13 <strong>index.html</strong>文件的路径</p><ol><li>双击<strong>index.html</strong>文件并查看其内容，该文件的内容如<strong>图14</strong>所示。</li></ol><p><img src="/2024/05/20/2024-05-OpenNJet%E4%BA%A7%E5%93%81%E4%BD%93%E9%AA%8C/wps14.png" alt="img"> </p><p>图14 <strong>index.html</strong>文件的路径</p><p>注意到网址localhost:8080的内容就是该文件，修改这个文件即可修改localhost:8080的内容。</p><h3 id="5-3-4-修改html文件"><a href="#5-3-4-修改html文件" class="headerlink" title="5.3.4 修改html文件"></a><strong>5.3.4 修改html文件</strong></h3><ol><li>修改<strong>index.html</strong>文件的权限，并以<strong>笔记本</strong>（gedit命令）的方式打开该文件，代码如下。</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/njet/html </span><br><span class="line">sudo chmod a+w index.html </span><br><span class="line">gedit index.html</span><br></pre></td></tr></table></figure><p>截图如<strong>图15</strong>所示。</p><p><img src="/2024/05/20/2024-05-OpenNJet%E4%BA%A7%E5%93%81%E4%BD%93%E9%AA%8C/wps15.png" alt="img"> </p><p>图15 修改<strong>index.html</strong>文件的权限</p><ol><li>修改<strong>index.html</strong>文件，删除原有代码并填入以下代码。（该html代码实现了一个炫酷的爱心）</li></ol><p>更多炫酷的html代码见：<a href="https://github.com/Want595/FunnyHTML">https://github.com/Want595/FunnyHTML</a></p> <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>heart<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">canvas</span> {</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">2</span>);</span></span><br><span class="line"><span class="language-css">        }</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"heart"</span> <span class="attr">width</span>=<span class="string">"1920"</span> <span class="attr">height</span>=<span class="string">"947"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="property">requestAnimationFrame</span> =</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">window</span>.<span class="property">__requestAnimationFrame</span> ||</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">window</span>.<span class="property">requestAnimationFrame</span> ||</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">window</span>.<span class="property">webkitRequestAnimationFrame</span> ||</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">window</span>.<span class="property">mozRequestAnimationFrame</span> ||</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">window</span>.<span class="property">oRequestAnimationFrame</span> ||</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">window</span>.<span class="property">msRequestAnimationFrame</span> ||</span></span><br><span class="line"><span class="language-javascript">            (<span class="keyword">function</span> (<span class="params"></span>) {</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">callback, element</span>) {</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">var</span> lastTime = element.<span class="property">__lastTime</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (lastTime === <span class="literal">undefined</span>) {</span></span><br><span class="line"><span class="language-javascript">                        lastTime = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">                    }</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">var</span> currTime = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">var</span> timeToCall = <span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="number">1</span>, <span class="number">33</span> - (currTime - lastTime));</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">window</span>.<span class="built_in">setTimeout</span>(callback, timeToCall);</span></span><br><span class="line"><span class="language-javascript">                    element.<span class="property">__lastTime</span> = currTime + timeToCall;</span></span><br><span class="line"><span class="language-javascript">                };</span></span><br><span class="line"><span class="language-javascript">            })();</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="property">isDevice</span> = (<span class="regexp">/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i</span>.<span class="title function_">test</span>(((navigator.<span class="property">userAgent</span> || navigator.<span class="property">vendor</span> || <span class="variable language_">window</span>.<span class="property">opera</span>)).<span class="title function_">toLowerCase</span>()));</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> loaded = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> init = <span class="keyword">function</span> (<span class="params"></span>) {</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (loaded) <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">            loaded = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> mobile = <span class="variable language_">window</span>.<span class="property">isDevice</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> koef = mobile ? <span class="number">0.5</span> : <span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> canvas = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">'heart'</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">'2d'</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> width = canvas.<span class="property">width</span> = koef * innerWidth;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> height = canvas.<span class="property">height</span> = koef * innerHeight;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> rand = <span class="title class_">Math</span>.<span class="property">random</span>;</span></span><br><span class="line"><span class="language-javascript">            ctx.<span class="property">fillStyle</span> = <span class="string">"rgba(0,0,0,1)"</span>;</span></span><br><span class="line"><span class="language-javascript">            ctx.<span class="title function_">fillRect</span>(<span class="number">0</span>, <span class="number">0</span>, width, height);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> heartPosition = <span class="keyword">function</span> (<span class="params">rad</span>) {</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//return [Math.sin(rad), Math.cos(rad)];</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> [<span class="title class_">Math</span>.<span class="title function_">pow</span>(<span class="title class_">Math</span>.<span class="title function_">sin</span>(rad), <span class="number">3</span>), -(<span class="number">15</span> * <span class="title class_">Math</span>.<span class="title function_">cos</span>(rad) - <span class="number">5</span> * <span class="title class_">Math</span>.<span class="title function_">cos</span>(<span class="number">2</span> * rad) - <span class="number">2</span> * <span class="title class_">Math</span>.<span class="title function_">cos</span>(<span class="number">3</span> * rad) - <span class="title class_">Math</span>.<span class="title function_">cos</span>(<span class="number">4</span> * rad))];</span></span><br><span class="line"><span class="language-javascript">            };</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> scaleAndTranslate = <span class="keyword">function</span> (<span class="params">pos, sx, sy, dx, dy</span>) {</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> [dx + pos[<span class="number">0</span>] * sx, dy + pos[<span class="number">1</span>] * sy];</span></span><br><span class="line"><span class="language-javascript">            };</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">'resize'</span>, <span class="keyword">function</span> (<span class="params"></span>) {</span></span><br><span class="line"><span class="language-javascript">                width = canvas.<span class="property">width</span> = koef * innerWidth;</span></span><br><span class="line"><span class="language-javascript">                height = canvas.<span class="property">height</span> = koef * innerHeight;</span></span><br><span class="line"><span class="language-javascript">                ctx.<span class="property">fillStyle</span> = <span class="string">"rgba(0,0,0,1)"</span>;</span></span><br><span class="line"><span class="language-javascript">                ctx.<span class="title function_">fillRect</span>(<span class="number">0</span>, <span class="number">0</span>, width, height);</span></span><br><span class="line"><span class="language-javascript">            });</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> traceCount = mobile ? <span class="number">20</span> : <span class="number">50</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> pointsOrigin = [];</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> i;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> dr = mobile ? <span class="number">0.3</span> : <span class="number">0.1</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="title class_">Math</span>.<span class="property">PI</span> * <span class="number">2</span>; i += dr) pointsOrigin.<span class="title function_">push</span>(<span class="title function_">scaleAndTranslate</span>(<span class="title function_">heartPosition</span>(i), <span class="number">210</span>, <span class="number">13</span>, <span class="number">0</span>, <span class="number">0</span>));</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="title class_">Math</span>.<span class="property">PI</span> * <span class="number">2</span>; i += dr) pointsOrigin.<span class="title function_">push</span>(<span class="title function_">scaleAndTranslate</span>(<span class="title function_">heartPosition</span>(i), <span class="number">150</span>, <span class="number">9</span>, <span class="number">0</span>, <span class="number">0</span>));</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="title class_">Math</span>.<span class="property">PI</span> * <span class="number">2</span>; i += dr) pointsOrigin.<span class="title function_">push</span>(<span class="title function_">scaleAndTranslate</span>(<span class="title function_">heartPosition</span>(i), <span class="number">90</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="number">0</span>));</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> heartPointsCount = pointsOrigin.<span class="property">length</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> targetPoints = [];</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> pulse = <span class="keyword">function</span> (<span class="params">kx, ky</span>) {</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; pointsOrigin.<span class="property">length</span>; i++) {</span></span><br><span class="line"><span class="language-javascript">                    targetPoints[i] = [];</span></span><br><span class="line"><span class="language-javascript">                    targetPoints[i][<span class="number">0</span>] = kx * pointsOrigin[i][<span class="number">0</span>] + width / <span class="number">2</span>;</span></span><br><span class="line"><span class="language-javascript">                    targetPoints[i][<span class="number">1</span>] = ky * pointsOrigin[i][<span class="number">1</span>] + height / <span class="number">2</span>;</span></span><br><span class="line"><span class="language-javascript">                }</span></span><br><span class="line"><span class="language-javascript">            };</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> e = [];</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; heartPointsCount; i++) {</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> x = <span class="title function_">rand</span>() * width;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> y = <span class="title function_">rand</span>() * height;</span></span><br><span class="line"><span class="language-javascript">                e[i] = {</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">vx</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">vy</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">R</span>: <span class="number">2</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">speed</span>: <span class="title function_">rand</span>() + <span class="number">5</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">q</span>: ~~(<span class="title function_">rand</span>() * heartPointsCount),</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">D</span>: <span class="number">2</span> * (i % <span class="number">2</span>) - <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">force</span>: <span class="number">0.2</span> * <span class="title function_">rand</span>() + <span class="number">0.7</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">f</span>: <span class="string">"hsla(240,"</span> + ~~(<span class="number">40</span> * <span class="title function_">rand</span>() + <span class="number">60</span>) + <span class="string">"%,"</span> + ~~(<span class="number">60</span> * <span class="title function_">rand</span>() + <span class="number">20</span>) + <span class="string">"%,.3)"</span>,   <span class="comment">//修改颜色</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">trace</span>: []</span></span><br><span class="line"><span class="language-javascript">                };</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">for</span> (<span class="keyword">var</span> k = <span class="number">0</span>; k &lt; traceCount; k++) e[i].<span class="property">trace</span>[k] = { <span class="attr">x</span>: x, <span class="attr">y</span>: y };</span></span><br><span class="line"><span class="language-javascript">            }</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> config = {</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">traceK</span>: <span class="number">0.4</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">timeDelta</span>: <span class="number">0.01</span></span></span><br><span class="line"><span class="language-javascript">            };</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> time = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> loop = <span class="keyword">function</span> (<span class="params"></span>) {</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> n = -<span class="title class_">Math</span>.<span class="title function_">cos</span>(time);</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">pulse</span>((<span class="number">1</span> + n) * <span class="number">.5</span>, (<span class="number">1</span> + n) * <span class="number">.5</span>);</span></span><br><span class="line"><span class="language-javascript">                time += ((<span class="title class_">Math</span>.<span class="title function_">sin</span>(time)) &lt; <span class="number">0</span> ? <span class="number">9</span> : (n &gt; <span class="number">0.8</span>) ? <span class="number">.2</span> : <span class="number">1</span>) * config.<span class="property">timeDelta</span>;</span></span><br><span class="line"><span class="language-javascript">                ctx.<span class="property">fillStyle</span> = <span class="string">"rgba(0,0,0,.1)"</span>;</span></span><br><span class="line"><span class="language-javascript">                ctx.<span class="title function_">fillRect</span>(<span class="number">0</span>, <span class="number">0</span>, width, height);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">for</span> (i = e.<span class="property">length</span>; i--;) {</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">var</span> u = e[i];</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">var</span> q = targetPoints[u.<span class="property">q</span>];</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">var</span> dx = u.<span class="property">trace</span>[<span class="number">0</span>].<span class="property">x</span> - q[<span class="number">0</span>];</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">var</span> dy = u.<span class="property">trace</span>[<span class="number">0</span>].<span class="property">y</span> - q[<span class="number">1</span>];</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">var</span> length = <span class="title class_">Math</span>.<span class="title function_">sqrt</span>(dx * dx + dy * dy);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (<span class="number">10</span> &gt; length) {</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (<span class="number">0.95</span> &lt; <span class="title function_">rand</span>()) {</span></span><br><span class="line"><span class="language-javascript">                            u.<span class="property">q</span> = ~~(<span class="title function_">rand</span>() * heartPointsCount);</span></span><br><span class="line"><span class="language-javascript">                        } <span class="keyword">else</span> {</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">if</span> (<span class="number">0.99</span> &lt; <span class="title function_">rand</span>()) {</span></span><br><span class="line"><span class="language-javascript">                                u.<span class="property">D</span> *= -<span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript">                            }</span></span><br><span class="line"><span class="language-javascript">                            u.<span class="property">q</span> += u.<span class="property">D</span>;</span></span><br><span class="line"><span class="language-javascript">                            u.<span class="property">q</span> %= heartPointsCount;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">if</span> (<span class="number">0</span> &gt; u.<span class="property">q</span>) {</span></span><br><span class="line"><span class="language-javascript">                                u.<span class="property">q</span> += heartPointsCount;</span></span><br><span class="line"><span class="language-javascript">                            }</span></span><br><span class="line"><span class="language-javascript">                        }</span></span><br><span class="line"><span class="language-javascript">                    }</span></span><br><span class="line"><span class="language-javascript">                    u.<span class="property">vx</span> += -dx / length * u.<span class="property">speed</span>;</span></span><br><span class="line"><span class="language-javascript">                    u.<span class="property">vy</span> += -dy / length * u.<span class="property">speed</span>;</span></span><br><span class="line"><span class="language-javascript">                    u.<span class="property">trace</span>[<span class="number">0</span>].<span class="property">x</span> += u.<span class="property">vx</span>;</span></span><br><span class="line"><span class="language-javascript">                    u.<span class="property">trace</span>[<span class="number">0</span>].<span class="property">y</span> += u.<span class="property">vy</span>;</span></span><br><span class="line"><span class="language-javascript">                    u.<span class="property">vx</span> *= u.<span class="property">force</span>;</span></span><br><span class="line"><span class="language-javascript">                    u.<span class="property">vy</span> *= u.<span class="property">force</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">for</span> (k = <span class="number">0</span>; k &lt; u.<span class="property">trace</span>.<span class="property">length</span> - <span class="number">1</span>;) {</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">var</span> T = u.<span class="property">trace</span>[k];</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">var</span> N = u.<span class="property">trace</span>[++k];</span></span><br><span class="line"><span class="language-javascript">                        N.<span class="property">x</span> -= config.<span class="property">traceK</span> * (N.<span class="property">x</span> - T.<span class="property">x</span>);</span></span><br><span class="line"><span class="language-javascript">                        N.<span class="property">y</span> -= config.<span class="property">traceK</span> * (N.<span class="property">y</span> - T.<span class="property">y</span>);</span></span><br><span class="line"><span class="language-javascript">                    }</span></span><br><span class="line"><span class="language-javascript">                    ctx.<span class="property">fillStyle</span> = u.<span class="property">f</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">for</span> (k = <span class="number">0</span>; k &lt; u.<span class="property">trace</span>.<span class="property">length</span>; k++) {</span></span><br><span class="line"><span class="language-javascript">                        ctx.<span class="title function_">fillRect</span>(u.<span class="property">trace</span>[k].<span class="property">x</span>, u.<span class="property">trace</span>[k].<span class="property">y</span>, <span class="number">1</span>, <span class="number">1</span>);</span></span><br><span class="line"><span class="language-javascript">                    }</span></span><br><span class="line"><span class="language-javascript">                }</span></span><br><span class="line"><span class="language-javascript">                ctx.<span class="property">fillStyle</span> = <span class="string">"rgba(255,255,255,1)"</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">for</span> (i = u.<span class="property">trace</span>.<span class="property">length</span> + <span class="number">13</span>; i--;) ctx.<span class="title function_">fillRect</span>(targetPoints[i][<span class="number">0</span>], targetPoints[i][<span class="number">1</span>], <span class="number">2</span>, <span class="number">2</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">window</span>.<span class="title function_">requestAnimationFrame</span>(loop, canvas);</span></span><br><span class="line"><span class="language-javascript">            };</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">loop</span>();</span></span><br><span class="line"><span class="language-javascript">        };</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> s = <span class="variable language_">document</span>.<span class="property">readyState</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (s === <span class="string">'complete'</span> || s === <span class="string">'loaded'</span> || s === <span class="string">'interactive'</span>) <span class="title function_">init</span>();</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">else</span> <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">'DOMContentLoaded'</span>, init, <span class="literal">false</span>);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>修改后的代码如<strong>图16</strong>所示。</p><p><img src="/2024/05/20/2024-05-OpenNJet%E4%BA%A7%E5%93%81%E4%BD%93%E9%AA%8C/wps16.png" alt="img"> </p><p>图16 修改后的index.html文件</p><ol><li>最后保存代码并退出。</li></ol><h3 id="5-3-5-重启njet服务"><a href="#5-3-5-重启njet服务" class="headerlink" title="5.3.5 重启njet服务"></a><strong>5.3.5 重启njet服务</strong></h3><p>使用以下代码重启njet服务。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl stop njet </span><br><span class="line">sudo systemctl start njet</span><br></pre></td></tr></table></figure><p>截图如<strong>图17</strong>所示。</p><p><img src="/2024/05/20/2024-05-OpenNJet%E4%BA%A7%E5%93%81%E4%BD%93%E9%AA%8C/wps17.png" alt="img"> </p><p>图17 重启njet</p><h3 id="5-3-6-查看web服务器"><a href="#5-3-6-查看web服务器" class="headerlink" title="5.3.6 查看web服务器"></a><strong>5.3.6 查看web服务器</strong></h3><p>最后打开浏览器，在地址栏中输入localhost:80，此时会出现如<strong>图18</strong>所示的炫酷页面。</p><p><img src="/2024/05/20/2024-05-OpenNJet%E4%BA%A7%E5%93%81%E4%BD%93%E9%AA%8C/wps18.png" alt="img"> </p><p>图18 炫酷的页面</p><h1 id="六、总结"><a href="#六、总结" class="headerlink" title="六、总结"></a>六、总结</h1><p>很高兴受邀体验了OpenNJet开源项目，个人感觉该项目非常值得探索，感谢每一个为OpenNJet做出贡献的开发者。希望本文可以帮助小伙伴们快速入门OpenNJet，由于本人能力有限，如果有小伙伴在阅读本文时发现了BUG，欢迎提出宝贵的意见。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;本文记录了使用&lt;strong&gt;OpenNJet从零部署一个Web服务器&lt;/strong&gt;的心得体会。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;OpenNJet官方网站&lt;/strong&gt;：&lt;a href=&quot;https://njet.org.cn/&quot;&gt;https://njet.org.c</summary>
      
    
    
    
    
    <category term="极星会" scheme="https://want595.github.io/tags/%E6%9E%81%E6%98%9F%E4%BC%9A/"/>
    
  </entry>
  
  <entry>
    <title>Linux命令</title>
    <link href="https://want595.github.io/2024/05/18/2024-05-Linux%E5%91%BD%E4%BB%A4/"/>
    <id>https://want595.github.io/2024/05/18/2024-05-Linux%E5%91%BD%E4%BB%A4/</id>
    <published>2024-05-18T08:09:29.000Z</published>
    <updated>2024-06-13T07:13:31.257Z</updated>
    
    <content type="html"><![CDATA[<h1 id="查看进程"><a href="#查看进程" class="headerlink" title="查看进程"></a>查看进程</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef | grep 进程</span><br></pre></td></tr></table></figure><h1 id="终止进程"><a href="#终止进程" class="headerlink" title="终止进程"></a>终止进程</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kill -9 进程号</span><br></pre></td></tr></table></figure><h1 id="后台运行"><a href="#后台运行" class="headerlink" title="后台运行"></a>后台运行</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup 命令 &amp;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;查看进程&quot;&gt;&lt;a href=&quot;#查看进程&quot; class=&quot;headerlink&quot; title=&quot;查看进程&quot;&gt;&lt;/a&gt;查看进程&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;</summary>
      
    
    
    
    <category term="【笔记】Linux" scheme="https://want595.github.io/categories/%E3%80%90%E7%AC%94%E8%AE%B0%E3%80%91Linux/"/>
    
    
  </entry>
  
  <entry>
    <title>Hexo部署Butterfly主题</title>
    <link href="https://want595.github.io/2024/05/06/2024-05-Hexo%E9%83%A8%E7%BD%B2Butterfly%E4%B8%BB%E9%A2%98/"/>
    <id>https://want595.github.io/2024/05/06/2024-05-Hexo%E9%83%A8%E7%BD%B2Butterfly%E4%B8%BB%E9%A2%98/</id>
    <published>2024-05-06T05:54:15.000Z</published>
    <updated>2024-06-13T07:12:53.382Z</updated>
    
    <content type="html"><![CDATA[<p>官方文档：<a href="https://butterfly.js.org/posts/98d20436/">https://butterfly.js.org/posts/98d20436/</a></p><p>主题仓库：<a href="https://github.com/jerryc127/hexo-theme-butterfly">https://github.com/jerryc127/hexo-theme-butterfly</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;官方文档：&lt;a href=&quot;https://butterfly.js.org/posts/98d20436/&quot;&gt;https://butterfly.js.org/posts/98d20436/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;主题仓库：&lt;a href=&quot;https://github.</summary>
      
    
    
    
    <category term="【笔记】Hexo" scheme="https://want595.github.io/categories/%E3%80%90%E7%AC%94%E8%AE%B0%E3%80%91Hexo/"/>
    
    
  </entry>
  
</feed>
